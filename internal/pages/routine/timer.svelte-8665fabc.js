import{S as C,i as K,s as j,w as h,x as $,y as v,H as E,q as f,o as _,B as y,M as S,O,Y as F,k as N,e as H,m as R,c as Q,a as Y,f as q,g as w,d as T,v as J,l as P,n as L,p as U,a2 as X,Q as Z,R as x,U as ee}from"../../chunks/vendor-e13e40a5.js";import{A as B,L as te}from"../../chunks/appStore-343e38e2.js";import{V as A}from"../../chunks/helpers-54c49464.js";import{F as ne,M as se,I as re,P as ae,a as oe}from"../../chunks/playPauseToggleIcon-0a45c742.js";import{T as ie}from"../../chunks/TimeKeeper-87c5f3af.js";function ce(a){let t,n;return t=new ne({props:{id:"timerSettingsForm",title:"Timer Settings",fieldsets:a[2]()}}),t.$on("change",a[1]),t.$on("submit",a[3]),t.$on("click",a[4]),{c(){h(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,s){v(t,e,s),n=!0},p:E,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function le(a,t,n){let e;const s=B.userSettings;S(a,s,o=>n(6,e=o));const i=o=>{switch(o.currentTarget.name){case"prep_time":case"announce_every":const u=parseInt(o.currentTarget.value);isNaN(u)||O(s,e[o.currentTarget.name]=u,e);break;case"show_plank":case"use_voice":O(s,e[o.currentTarget.name]=o.currentTarget.checked,e);break;case"preferred_voice":O(s,e.preferred_voice=o.currentTarget.value,e),A.defaultVoice=e.preferred_voice;break}},r=()=>[{legend:"Update",inputs:[{id:"prep_time",name:"prep_time",value:e.prep_time,label:"Prep Time (seconds)",type:"number"},{id:"announce_every",name:"announce_every",value:e.announce_every,label:"Announce Every (seconds)",type:"number"},{id:"show_plank",name:"show_plank",checked:e.show_plank,label:"Show Planks?",type:"slider"},{id:"use_voice",name:"use_voice",checked:e.use_voice,label:"Use Voice?",type:"slider"},{id:"preferred_voice",name:"preferred_voice",value:e.preferred_voice,label:"Preferred Voice",type:"select",placeholder:"Available Voices",options:A.getVoices(null,!0)}]}];function c(o){F.call(this,a,o)}function l(o){F.call(this,a,o)}return[s,i,r,c,l]}class ue extends C{constructor(t){super();K(this,t,le,ce,j,{})}}function z(a){let t,n;return t=new oe({props:{label:"Plank",value:a[0]}}),{c(){h(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,s){v(t,e,s),n=!0},p(e,s){const i={};s&1&&(i.value=e[0]),t.$set(i)},i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function pe(a){let t,n,e=a[2].show_plank&&z(a);return{c(){e&&e.c(),t=P()},l(s){e&&e.l(s),t=P()},m(s,i){e&&e.m(s,i),w(s,t,i),n=!0},p(s,i){s[2].show_plank?e?(e.p(s,i),i&4&&f(e,1)):(e=z(s),e.c(),f(e,1),e.m(t.parentNode,t)):e&&(L(),_(e,1,1,()=>{e=null}),U())},i(s){n||(f(e),n=!0)},o(s){_(e),n=!1},d(s){e&&e.d(s),s&&T(t)}}}function me(a){let t,n,e,s,i;return t=new se({props:{timeKeeper:a[5],value:a[1],$$slots:{default:[pe]},$$scope:{ctx:a}}}),e=new re({props:{buttons:a[7]()}}),e.$on("click",a[6]),{c(){h(t.$$.fragment),n=N(),s=H("div"),h(e.$$.fragment),this.h()},l(r){$(t.$$.fragment,r),n=R(r),s=Q(r,"DIV",{style:!0});var c=Y(s);$(e.$$.fragment,c),this.h()},h(){q(s,"display","contents"),q(s,"--theme-icon-size","1.6rem")},m(r,c){v(t,r,c),w(r,n,c),w(r,s,c),v(e,s,null),i=!0},p(r,[c]){const l={};c&2&&(l.value=r[1]),c&8197&&(l.$$scope={dirty:c,ctx:r}),t.$set(l)},i(r){i||(f(t.$$.fragment,r),f(e.$$.fragment,r),i=!0)},o(r){_(t.$$.fragment,r),_(e.$$.fragment,r),i=!1},d(r){y(t,r),r&&T(n),r&&T(s),y(e,r)}}}function fe(a,t,n){let e,s,i,r,{settingsOpen:c,planks:l}=t;const o=B.userSettings;S(a,o,p=>n(2,e=p));const u=B.routine;S(a,u,p=>n(10,i=p));const d=B.docBodyBgColor,m=ie();S(a,m,p=>n(9,s=p));const W=p=>{switch(p.currentTarget.dataset.action){case"reset":m.reset();break;case"settings_open":m.isTicking()&&m.stop(),n(8,c=!0);break}},D=()=>[{icon:"bi bi-bootstrap-reboot",title:"Reset",data:{"data-action":"reset"}},{component:ae,props:{}},{icon:"bi bi-gear-wide-connected",title:"Timer Settings",data:{"data-action":"settings_open"}}];J(()=>(m.set(i.stopTime),()=>{G(),O(u,i.stopTime=s,i),d.set(null)}));const G=m.subscribe(p=>{const g=p-e.prep_time,k=g<0?Math.abs(g):g;if(!m.isTicking()){n(1,r=g>0?m.asClock(k):0),d.set(null);return}if(e.use_voice){let b="";switch(g){case 0:b+="Go";break;case-1:case-2:case-3:b+=k.toString();break;default:const M=e.announce_every;if(M>0&&k%M==0){const{m:V,s:I}=m.minSecs(k);V!==0&&(b+=V+" minute"+(V==1?" ":"s ")),I!==0&&(b+=I+" second"+(I==1?"":"s"))}break}b.length&&A.speak(b)}g<0?(n(1,r=k),d.set("PREP")):(n(1,r=m.asClock(k)),d.set("WORK"))});return a.$$set=p=>{"settingsOpen"in p&&n(8,c=p.settingsOpen),"planks"in p&&n(0,l=p.planks)},[l,r,e,o,u,m,W,D,c]}class _e extends C{constructor(t){super();K(this,t,fe,me,j,{settingsOpen:8,planks:0})}}function de(a){let t,n,e;function s(r){a[4](r)}let i={planks:a[1]()};return a[0]!==void 0&&(i.settingsOpen=a[0]),t=new _e({props:i}),Z.push(()=>x(t,"settingsOpen",s)),{c(){h(t.$$.fragment)},l(r){$(t.$$.fragment,r)},m(r,c){v(t,r,c),e=!0},p(r,c){const l={};!n&&c&1&&(n=!0,l.settingsOpen=r[0],ee(()=>n=!1)),t.$set(l)},i(r){e||(f(t.$$.fragment,r),e=!0)},o(r){_(t.$$.fragment,r),e=!1},d(r){y(t,r)}}}function ge(a){let t,n;return t=new ue({}),t.$on("click",a[2]),t.$on("submit",a[3]),{c(){h(t.$$.fragment)},l(e){$(t.$$.fragment,e)},m(e,s){v(t,e,s),n=!0},p:E,i(e){n||(f(t.$$.fragment,e),n=!0)},o(e){_(t.$$.fragment,e),n=!1},d(e){y(t,e)}}}function ke(a){let t,n,e,s,i;const r=[ge,de],c=[];function l(o,u){return o[0]?0:1}return n=l(a),e=c[n]=r[n](a),{c(){t=N(),e.c(),s=P(),this.h()},l(o){X('[data-svelte="svelte-7xz59n"]',document.head).forEach(T),t=R(o),e.l(o),s=P(),this.h()},h(){document.title="SWEAT Timer"},m(o,u){w(o,t,u),c[n].m(o,u),w(o,s,u),i=!0},p(o,[u]){let d=n;n=l(o),n===d?c[n].p(o,u):(L(),_(c[d],1,1,()=>{c[d]=null}),U(),e=c[n],e?e.p(o,u):(e=c[n]=r[n](o),e.c()),f(e,1),e.m(s.parentNode,s))},i(o){i||(f(e),i=!0)},o(o){_(e),i=!1},d(o){o&&T(t),c[n].d(o),o&&T(s)}}}function be(a,t,n){const e=()=>{const l=te.getItem("workout");return(l&&"planks"in l?l.planks:[]).map(u=>u.display_name)};let s=!1;const i=()=>n(0,s=!s),r=()=>n(0,s=!s);function c(l){s=l,n(0,s)}return[s,e,i,r,c]}class we extends C{constructor(t){super();K(this,t,be,ke,j,{})}}export{we as default};
