import{D as Re,S as A,i as N,s as U,T as te,k as K,w,m as W,x as y,g as v,y as R,V as ne,W as re,X as se,q as d,o as h,d as b,B as S,H as F,M as V,O as J,Y as ae,e as B,c as O,a as C,b as D,G as P,K as z,l as L,n as G,p as Y,I as oe,Q as Z,t as H,h as q,j as Se,R as le,f as ce,U as ie,a3 as Te,a4 as Ee,a2 as Ie,a5 as Pe}from"../../chunks/vendor-e13e40a5.js";import{A as M,L as ue,S as x}from"../../chunks/appStore-343e38e2.js";import{r as $,R as Q,E as Be,S as Oe}from"../../chunks/exerciseCard-9f40ced8.js";import{V as ee,s as fe,P as Ke}from"../../chunks/helpers-7746061f.js";import{g as We}from"../../chunks/navigation-bd39ff07.js";import{L as Ce,F as je,a as X,M as Ve,I as Le,P as Ae}from"../../chunks/playPauseToggleIcon-daa24825.js";import{T as Ne}from"../../chunks/TimeKeeper-59cb4b66.js";import"../../chunks/stores-e2f0a4ed.js";import"../../chunks/singletons-a6a7384f.js";const Ue=()=>{const{subscribe:l,set:e,update:n}=Re([]),t=s=>{e(r(s.meta,s.exercises))},r=(s,c)=>{let i=[];for(let f=0;f<s.tabatas;f++)if(c.forEach((p,m)=>{const g=Object.assign({cycle:m+1,round:f+1,elapsed:0,duration:s.time_on},p);if(g.type=$.WORK,i.push(Q(g)),m<c.length-1){const T={name:"Rest",display_name:"Rest",type:$.REST,cycle:m+1,round:f+1,elapsed:0,duration:s.time_off};i.push(Q(T))}}),f<s.tabatas-1){const p={name:"Break",display_name:"Break",type:$.BREAK,cycle:0,round:f+2,elapsed:0,duration:s.rest_time};i.push(Q(p))}return i.unshift(Q({name:"Prepare",display_name:"Prep",type:$.PREP,cycle:0,round:0,elapsed:0,duration:s.prep_time})),i};return{subscribe:l,set:e,update:n,setWorkout:t,reset:()=>{n(s=>s.map(c=>(c.elapsed=0,c)))},isComplete:()=>{let s=!1;return n(c=>(s=Boolean(c.length)&&c.every(i=>i.elapsed===i.duration),c)),s},hasStarted:()=>{let s=!1;return l(i=>{i.length&&(s=i[0].elapsed>0)})(),s}}};var I=Ue();function De(l){let e,n,t;const r=l[1].default,o=te(r,l,l[0],null);return n=new Ce({props:{label:"Create New Workout",type:"button",name:"create",id:"create"}}),n.$on("click",l[2]),{c(){o&&o.c(),e=K(),w(n.$$.fragment)},l(a){o&&o.l(a),e=W(a),y(n.$$.fragment,a)},m(a,u){o&&o.m(a,u),v(a,e,u),R(n,a,u),t=!0},p(a,[u]){o&&o.p&&(!t||u&1)&&ne(o,r,a,a[0],t?se(r,a[0],u,null):re(a[0]),null)},i(a){t||(d(o,a),d(n.$$.fragment,a),t=!0)},o(a){h(o,a),h(n.$$.fragment,a),t=!1},d(a){o&&o.d(a),a&&b(e),S(n,a)}}}function He(l,e,n){let{$$slots:t={},$$scope:r}=e;const o=()=>We("/workout",{replaceState:!0});return l.$$set=a=>{"$$scope"in a&&n(0,r=a.$$scope)},[r,t,o]}class pe extends A{constructor(e){super();N(this,e,He,De,U,{})}}function qe(l){let e,n;return e=new je({props:{id:"tabataSettingsForm",title:"Tabata Settings",fieldsets:l[1]()}}),e.$on("change",l[2]),e.$on("submit",l[3]),e.$on("click",l[4]),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,r){R(e,t,r),n=!0},p:F,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function Fe(l,e,n){let t,r;V(l,I,i=>n(7,r=i));const o=M.userSettings;V(l,o,i=>n(6,t=i));const a=()=>{const i=r.find(T=>T.type===$.PREP),f=r.find(T=>T.type===$.WORK),p=r.find(T=>T.type===$.REST),m=r.find(T=>T.type===$.BREAK);return[{legend:"Runtime",inputs:[{id:"prep_time",name:"PREP",value:i?i.duration:0,label:"Prep Time (seconds)",type:"number"},{id:"time_on",name:"WORK",value:f?f.duration:0,label:"Exercise Time (seconds)",type:"number"},{id:"time_off",name:"REST",value:p?p.duration:0,label:"Rest Time (seconds)",type:"number"},{id:"rest_time",name:"BREAK",value:m?m.duration:0,label:"Break Time (seconds)",type:"number"},{id:"use_voice",name:"use_voice",checked:t.use_voice,label:"Use Voice?",type:"slider"},{id:"preferred_voice",name:"preferred_voice",value:t.preferred_voice,label:"Preferred Voice",type:"select",placeholder:"Available Voices",options:ee.getVoices(null,!0)}]}]},u=i=>{switch(i.currentTarget.name){case"PREP":case"WORK":case"REST":case"BREAK":const f=parseInt(i.currentTarget.value);isNaN(f)||I.update(p=>(p.forEach((m,g)=>{m.type===$[i.currentTarget.name]&&p[g].elapsed!==p[g].duration&&(p[g].duration=f)}),p));break;case"use_voice":J(o,t.use_voice=i.currentTarget.checked,t);break;case"preferred_voice":J(o,t.preferred_voice=i.currentTarget.value,t),ee.defaultVoice=t.preferred_voice;break}};function s(i){ae.call(this,l,i)}function c(i){ae.call(this,l,i)}return[o,a,u,s,c]}class Ge extends A{constructor(e){super();N(this,e,Fe,qe,U,{})}}function Ye(l){let e,n,t,r,o,a,u,s,c;return n=new X({props:{label:"Elapsed",value:l[0]}}),r=new X({props:{label:"Remaining",value:l[1]}}),a=new X({props:{label:"Cycles",value:l[2]}}),s=new X({props:{label:"Tabatas",value:l[3]}}),{c(){e=B("div"),w(n.$$.fragment),t=K(),w(r.$$.fragment),o=K(),w(a.$$.fragment),u=K(),w(s.$$.fragment),this.h()},l(i){e=O(i,"DIV",{class:!0});var f=C(e);y(n.$$.fragment,f),t=W(f),y(r.$$.fragment,f),o=W(f),y(a.$$.fragment,f),u=W(f),y(s.$$.fragment,f),f.forEach(b),this.h()},h(){D(e,"class","svelte-1ujgwto")},m(i,f){v(i,e,f),R(n,e,null),P(e,t),R(r,e,null),P(e,o),R(a,e,null),P(e,u),R(s,e,null),c=!0},p(i,[f]){const p={};f&1&&(p.value=i[0]),n.$set(p);const m={};f&2&&(m.value=i[1]),r.$set(m);const g={};f&4&&(g.value=i[2]),a.$set(g);const T={};f&8&&(T.value=i[3]),s.$set(T)},i(i){c||(d(n.$$.fragment,i),d(r.$$.fragment,i),d(a.$$.fragment,i),d(s.$$.fragment,i),c=!0)},o(i){h(n.$$.fragment,i),h(r.$$.fragment,i),h(a.$$.fragment,i),h(s.$$.fragment,i),c=!1},d(i){i&&b(e),S(n),S(r),S(a),S(s)}}}function ze(l,e,n){let t="00:00",r="00:00",o="0/0",a="0/0";const u=I.subscribe(s=>{if(!s.length)return;const c=s.findIndex(p=>p.elapsed<p.duration);if(c===-1)return;const i=s.reduce((p,m)=>p+m.elapsed,0),f=s.reduce((p,m)=>p+m.duration,0);n(0,t=fe(i)),n(1,r=fe(f-i)),n(2,o=s[c].cycle+"/"+s[s.length-1].cycle),n(3,a=s[c].round+"/"+s[s.length-1].round)});return z(()=>u()),[t,r,o,a]}class Qe extends A{constructor(e){super();N(this,e,ze,Ye,U,{})}}function Xe(l){let e,n;const t=l[1].default,r=te(t,l,l[0],null);return{c(){e=B("div"),r&&r.c(),this.h()},l(o){e=O(o,"DIV",{class:!0});var a=C(e);r&&r.l(a),a.forEach(b),this.h()},h(){D(e,"class","svelte-1t55ahf")},m(o,a){v(o,e,a),r&&r.m(e,null),n=!0},p(o,[a]){r&&r.p&&(!n||a&1)&&ne(r,t,o,o[0],n?se(t,o[0],a,null):re(o[0]),null)},i(o){n||(d(r,o),n=!0)},o(o){h(r,o),n=!1},d(o){o&&b(e),r&&r.d(o)}}}function Je(l,e,n){let{$$slots:t={},$$scope:r}=e;return l.$$set=o=>{"$$scope"in o&&n(0,r=o.$$scope)},[r,t]}class Ze extends A{constructor(e){super();N(this,e,Je,Xe,U,{})}}function me(l,e,n){const t=l.slice();return t[6]=e[n],t}function _e(l,e,n){const t=l.slice();return t[9]=e[n],t}function Me(l){let e,n;return e=new Be({props:{name:l[9].display_name,completed:l[9].duration===l[9].elapsed,region:l[9].region,target:l[9].target,band_pos:l[9].band_pos,band_pos_text:l[9].band_pos_text}}),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,r){R(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.name=t[9].display_name),r&2&&(o.completed=t[9].duration===t[9].elapsed),r&2&&(o.region=t[9].region),r&2&&(o.target=t[9].target),r&2&&(o.band_pos=t[9].band_pos),r&2&&(o.band_pos_text=t[9].band_pos_text),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function xe(l){let e,n=l[9].display_name+"",t;return{c(){e=B("h2"),t=H(n),this.h()},l(r){e=O(r,"H2",{class:!0});var o=C(e);t=q(o,n),o.forEach(b),this.h()},h(){D(e,"class","rest-item svelte-1bof0sx")},m(r,o){v(r,e,o),P(e,t)},p(r,o){o&2&&n!==(n=r[9].display_name+"")&&Se(t,n)},i:F,o:F,d(r){r&&b(e)}}}function de(l){let e,n,t,r;const o=[xe,Me],a=[];function u(s,c){return s[9].type!==$.WORK?0:1}return e=u(l),n=a[e]=o[e](l),{c(){n.c(),t=L()},l(s){n.l(s),t=L()},m(s,c){a[e].m(s,c),v(s,t,c),r=!0},p(s,c){let i=e;e=u(s),e===i?a[e].p(s,c):(G(),h(a[i],1,1,()=>{a[i]=null}),Y(),n=a[e],n?n.p(s,c):(n=a[e]=o[e](s),n.c()),d(n,1),n.m(t.parentNode,t))},i(s){r||(d(n),r=!0)},o(s){h(n),r=!1},d(s){a[e].d(s),s&&b(t)}}}function he(l){let e,n,t,r=l[6],o=[];for(let u=0;u<r.length;u+=1)o[u]=de(_e(l,r,u));const a=u=>h(o[u],1,1,()=>{o[u]=null});return{c(){e=B("li");for(let u=0;u<o.length;u+=1)o[u].c();n=K(),this.h()},l(u){e=O(u,"LI",{class:!0});var s=C(e);for(let c=0;c<o.length;c+=1)o[c].l(s);n=W(s),s.forEach(b),this.h()},h(){D(e,"class","svelte-1bof0sx")},m(u,s){v(u,e,s);for(let c=0;c<o.length;c+=1)o[c].m(e,null);P(e,n),t=!0},p(u,s){if(s&6){r=u[6];let c;for(c=0;c<r.length;c+=1){const i=_e(u,r,c);o[c]?(o[c].p(i,s),d(o[c],1)):(o[c]=de(i),o[c].c(),d(o[c],1),o[c].m(e,n))}for(G(),c=r.length;c<o.length;c+=1)a(c);Y()}},i(u){if(!t){for(let s=0;s<r.length;s+=1)d(o[s]);t=!0}},o(u){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)h(o[s]);t=!1},d(u){u&&b(e),oe(o,u)}}}function et(l){let e,n,t=l[2](l[1]),r=[];for(let a=0;a<t.length;a+=1)r[a]=he(me(l,t,a));const o=a=>h(r[a],1,1,()=>{r[a]=null});return{c(){e=B("ol");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=O(a,"OL",{class:!0});var u=C(e);for(let s=0;s<r.length;s+=1)r[s].l(u);u.forEach(b),this.h()},h(){D(e,"class","svelte-1bof0sx")},m(a,u){v(a,e,u);for(let s=0;s<r.length;s+=1)r[s].m(e,null);l[4](e),n=!0},p(a,u){if(u&6){t=a[2](a[1]);let s;for(s=0;s<t.length;s+=1){const c=me(a,t,s);r[s]?(r[s].p(c,u),d(r[s],1)):(r[s]=he(c),r[s].c(),d(r[s],1),r[s].m(e,null))}for(G(),s=t.length;s<r.length;s+=1)o(s);Y()}},i(a){if(!n){for(let u=0;u<t.length;u+=1)d(r[u]);n=!0}},o(a){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)h(r[u]);n=!1},d(a){a&&b(e),oe(r,a),l[4](null)}}}function tt(l){let e,n;return e=new Ze({props:{$$slots:{default:[et]},$$scope:{ctx:l}}}),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,r){R(e,t,r),n=!0},p(t,[r]){const o={};r&4099&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function nt(l,e,n){let t;V(l,I,c=>n(1,t=c));const r=c=>{const i=[];return c.forEach((f,p)=>{p%2!=0&&i.push([c[p-1],f])}),i};let o,{active:a}=e;const u=I.subscribe(c=>{if(!c.length||!a)return;const i=c.findIndex(m=>m.elapsed<m.duration&&m.type===$.WORK);if(i===-1)return;const f=Math.ceil(i/2)-1,p=o.children[f];o.scrollTo({top:p.offsetHeight*f,behavior:"smooth"})});z(()=>u());function s(c){Z[c?"unshift":"push"](()=>{o=c,n(0,o)})}return l.$$set=c=>{"active"in c&&n(3,a=c.active)},[o,t,r,a,s]}class rt extends A{constructor(e){super();N(this,e,nt,tt,U,{active:3})}}function st(l){let e,n;return e=new Qe({}),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,r){R(e,t,r),n=!0},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function at(l){let e,n,t,r,o,a,u,s;function c(f){l[8](f)}let i={timeKeeper:l[3],value:l[1],$$slots:{default:[st]},$$scope:{ctx:l}};return l[0]!==void 0&&(i.active=l[0]),e=new Ve({props:i}),Z.push(()=>le(e,"active",c)),r=new Le({props:{buttons:l[6]()}}),r.$on("click",l[5]),u=new rt({props:{active:l[0]}}),{c(){w(e.$$.fragment),t=K(),o=B("div"),w(r.$$.fragment),a=K(),w(u.$$.fragment),this.h()},l(f){y(e.$$.fragment,f),t=W(f),o=O(f,"DIV",{style:!0});var p=C(o);y(r.$$.fragment,p),a=W(f),y(u.$$.fragment,f),this.h()},h(){ce(o,"display","contents"),ce(o,"--theme-icon-size","1.6rem")},m(f,p){R(e,f,p),v(f,t,p),v(f,o,p),R(r,o,null),v(f,a,p),R(u,f,p),s=!0},p(f,[p]){const m={};p&2&&(m.value=f[1]),p&1048576&&(m.$$scope={dirty:p,ctx:f}),!n&&p&1&&(n=!0,m.active=f[0],ie(()=>n=!1)),e.$set(m);const g={};p&1&&(g.active=f[0]),u.$set(g)},i(f){s||(d(e.$$.fragment,f),d(r.$$.fragment,f),d(u.$$.fragment,f),s=!0)},o(f){h(e.$$.fragment,f),h(r.$$.fragment,f),h(u.$$.fragment,f),s=!1},d(f){S(e,f),f&&b(t),f&&b(o),S(r,f),f&&b(a),S(u,f)}}}function ot(l,e,n){let t,r,o,a;V(l,I,_=>n(9,t=_));let{settingsOpen:u=!1}=e,s;const c=M.userSettings;V(l,c,_=>n(11,o=_));const i=M.docBodyBgColor,f=Ne();V(l,f,_=>n(10,r=_));const p=_=>Object.entries($).reduce((E,k)=>k[1]===t[_].type?k[0]:E,null),m=()=>t.findIndex(_=>_.elapsed<_.duration),g=()=>{const _=t.findIndex(j=>j.type===$.WORK&&j.elapsed===0);if(_===-1)return"";const E=t[_];let k=`Next Exercise is ${E.display_name}
`;return E.band_pos>0&&(k+=`Band's Position: ${E.band_pos_text}`),k},T=Te(I,_=>{if(!_.length||!I.hasStarted())return 0;const E=m();if(E===-1)return 0;const k=_[E];return k.duration-k.elapsed});V(l,T,_=>n(1,a=_));const be=_=>{if(!o.use_voice||!f.isTicking())return;const E=m();if(E===-1)return;let k="";const j=t[E];switch(j.elapsed){case 0:switch(j.type){case $.WORK:k+=`Go
`;break;case $.REST:case $.BREAK:k+=`Stop
`;break}break;case 1:switch(j.type){case $.REST:k+=`Rest
`;break;case $.BREAK:k+=`Break
`;break;case $.PREP:k+=`Prep
`;break}break;case 2:switch(j.type){case $.REST:case $.PREP:k+=g();break}break}if(_<4)k+=`${_}
`;else if(j.type===$.BREAK)switch(_){case 14:k+=g();break;case 15:k+=`Get Ready
`;break}else I.isComplete()&&(k+=`Well done
`);k.length&&ee.speak(k)},ge=_=>{const E=m();E==-1||r===0?i.set(null):(f.isTicking()&&!document.body.classList.length||_===t[E].duration)&&i.set(p(E))},$e=_=>{switch(f.isTicking()&&f.stop(),_.currentTarget.dataset.action){case"reset":n(0,s=!1),f.reset(),I.reset();break;case"settings_open":n(7,u=!0);break}},ke=()=>[{icon:"bi bi-bootstrap-reboot",title:"Reset",data:{"data-action":"reset"}},{component:Ae,props:{}},{component:Oe,props:{}},{icon:"bi bi-gear-wide-connected",title:"Timer Settings",data:{"data-action":"settings_open"}}],ve=f.subscribe(()=>{const _=m();_!==-1&&f.isTicking()&&J(I,t[_].elapsed+=1,t)}),we=T.subscribe(_=>{be(_),ge(_)});z(()=>{ve(),we(),i.set(null)});function ye(_){s=_,n(0,s)}return l.$$set=_=>{"settingsOpen"in _&&n(7,u=_.settingsOpen)},[s,a,c,f,T,$e,ke,u,ye]}class lt extends A{constructor(e){super();N(this,e,ot,at,U,{settingsOpen:7})}}function ct(l){let e,n;return e=new pe({props:{$$slots:{default:[it]},$$scope:{ctx:l}}}),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,r){R(e,t,r),n=!0},p(t,r){const o={};r&128&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function it(l){let e,n,t,r,o,a,u;return{c(){e=B("h2"),n=H("Workout not found!"),t=K(),r=B("p"),o=H("The workout you are looking for was not found."),a=B("br"),u=H("Perhaps it has expired. Please create a new workout"),this.h()},l(s){e=O(s,"H2",{class:!0});var c=C(e);n=q(c,"Workout not found!"),c.forEach(b),t=W(s),r=O(s,"P",{});var i=C(r);o=q(i,"The workout you are looking for was not found."),a=O(i,"BR",{}),u=q(i,"Perhaps it has expired. Please create a new workout"),i.forEach(b),this.h()},h(){D(e,"class","center error")},m(s,c){v(s,e,c),P(e,n),v(s,t,c),v(s,r,c),P(r,o),P(r,a),P(r,u)},d(s){s&&b(e),s&&b(t),s&&b(r)}}}function ut(l){let e,n,t,r;const o=[pt,ft],a=[];function u(s,c){return s[1].length?0:1}return e=u(l),n=a[e]=o[e](l),{c(){n.c(),t=L()},l(s){n.l(s),t=L()},m(s,c){a[e].m(s,c),v(s,t,c),r=!0},p(s,c){let i=e;e=u(s),e===i?a[e].p(s,c):(G(),h(a[i],1,1,()=>{a[i]=null}),Y(),n=a[e],n?n.p(s,c):(n=a[e]=o[e](s),n.c()),d(n,1),n.m(t.parentNode,t))},i(s){r||(d(n),r=!0)},o(s){h(n),r=!1},d(s){a[e].d(s),s&&b(t)}}}function ft(l){let e,n;return e=new pe({props:{$$slots:{default:[mt]},$$scope:{ctx:l}}}),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,r){R(e,t,r),n=!0},p(t,r){const o={};r&128&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function pt(l){let e,n,t,r;const o=[dt,_t],a=[];function u(s,c){return s[0]?0:1}return e=u(l),n=a[e]=o[e](l),{c(){n.c(),t=L()},l(s){n.l(s),t=L()},m(s,c){a[e].m(s,c),v(s,t,c),r=!0},p(s,c){let i=e;e=u(s),e===i?a[e].p(s,c):(G(),h(a[i],1,1,()=>{a[i]=null}),Y(),n=a[e],n?n.p(s,c):(n=a[e]=o[e](s),n.c()),d(n,1),n.m(t.parentNode,t))},i(s){r||(d(n),r=!0)},o(s){h(n),r=!1},d(s){a[e].d(s),s&&b(t)}}}function mt(l){let e,n,t,r,o,a,u;return{c(){e=B("h2"),n=H("No Workout!"),t=K(),r=B("p"),o=H("You are in need of a workout."),a=B("br"),u=H("Please create one."),this.h()},l(s){e=O(s,"H2",{class:!0});var c=C(e);n=q(c,"No Workout!"),c.forEach(b),t=W(s),r=O(s,"P",{});var i=C(r);o=q(i,"You are in need of a workout."),a=O(i,"BR",{}),u=q(i,"Please create one."),i.forEach(b),this.h()},h(){D(e,"class","center")},m(s,c){v(s,e,c),P(e,n),v(s,t,c),v(s,r,c),P(r,o),P(r,a),P(r,u)},d(s){s&&b(e),s&&b(t),s&&b(r)}}}function _t(l){let e,n,t;function r(a){l[5](a)}let o={};return l[0]!==void 0&&(o.settingsOpen=l[0]),e=new lt({props:o}),Z.push(()=>le(e,"settingsOpen",r)),{c(){w(e.$$.fragment)},l(a){y(e.$$.fragment,a)},m(a,u){R(e,a,u),t=!0},p(a,u){const s={};!n&&u&1&&(n=!0,s.settingsOpen=a[0],ie(()=>n=!1)),e.$set(s)},i(a){t||(d(e.$$.fragment,a),t=!0)},o(a){h(e.$$.fragment,a),t=!1},d(a){S(e,a)}}}function dt(l){let e,n;return e=new Ge({}),e.$on("click",l[3]),e.$on("submit",l[4]),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,r){R(e,t,r),n=!0},p:F,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function ht(l){let e,n;return e=new Ke({}),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,r){R(e,t,r),n=!0},p:F,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){S(e,t)}}}function bt(l){let e,n,t,r={ctx:l,current:null,token:null,hasCatch:!0,pending:ht,then:ut,catch:ct,blocks:[,,,]};return Ee(l[2](),r),{c(){e=K(),n=L(),r.block.c(),this.h()},l(o){Ie('[data-svelte="svelte-1jsep15"]',document.head).forEach(b),e=W(o),n=L(),r.block.l(o),this.h()},h(){document.title="SWEAT Tabata"},m(o,a){v(o,e,a),v(o,n,a),r.block.m(o,r.anchor=a),r.mount=()=>n.parentNode,r.anchor=n,t=!0},p(o,[a]){l=o,Pe(r,l,a)},i(o){t||(d(r.block),t=!0)},o(o){for(let a=0;a<3;a+=1){const u=r.blocks[a];h(u)}t=!1},d(o){o&&b(e),o&&b(n),r.block.d(o),r.token=null,r=null}}}function gt(l,e,n){let t;V(l,I,i=>n(1,t=i));const r=()=>new Promise(async i=>{const f=new URL(window.location.href);let p="https://kalabaaz.pythonanywhere.com";p+=`/api/tabata/${f.searchParams.get("w")}.json`;try{const m=await fetch(p,{credentials:"include"});if(m.ok){const g=await m.json();i(g)}}catch(m){console.error(m),i(null)}}),o=()=>new Promise(async(i,f)=>{if(new URL(window.location.href).searchParams.has("w")){const g=await r();if(g)ue.setItem("workout",g),x.setItem("routine",[]);else{f();return}}const m=x.getItem("routine");if(m.length)I.set(m);else{const g=ue.getItem("workout");g&&I.setWorkout(g)}i()});z(()=>x.setItem("routine",t));let a;const u=()=>n(0,a=!a),s=()=>n(0,a=!a);function c(i){a=i,n(0,a)}return[a,t,o,u,s,c]}class It extends A{constructor(e){super();N(this,e,gt,bt,U,{})}}export{It as default};
