import{D as Re,S as U,i as H,s as q,T as se,k as j,w,m as V,x as y,g as v,y as R,V as ae,W as oe,X as le,q as d,o as g,d as h,B as I,H as Y,M as A,O as x,Y as ce,e as B,c as K,a as C,b as L,G as O,K as X,l as D,n as z,p as Q,I as ie,Q as ee,t as F,h as G,j as Ie,R as ue,f as fe,U as pe,a3 as Se,a4 as Ee,a2 as Te,a5 as Pe}from"../../chunks/vendor-e13e40a5.js";import{A as te,L as me,S as ne}from"../../chunks/appStore-343e38e2.js";import{r as $,R as J,a as Be,E as Ke,S as Oe}from"../../chunks/exerciseCard-044c032f.js";import{V as re,s as _e,P as We}from"../../chunks/helpers-7746061f.js";import{g as Ce}from"../../chunks/navigation-bd39ff07.js";import{L as je,F as Ve,a as M,M as Ne,I as Ae,P as Le}from"../../chunks/playPauseToggleIcon-daa24825.js";import{T as De}from"../../chunks/TimeKeeper-59cb4b66.js";import"../../chunks/stores-e2f0a4ed.js";import"../../chunks/singletons-a6a7384f.js";const Ue=()=>{const{subscribe:l,set:e,update:r}=Re([]),t=s=>{e(n(s.meta,s.exercises))},n=(s,c)=>{let f=[];for(let i=0;i<s.tabatas;i++)if(c.forEach((p,m)=>{const b=Object.assign({cycle:m+1,round:i+1,elapsed:0,duration:s.time_on},p);if(b.type=$.WORK,f.push(J(b)),m<c.length-1){const P={name:"Rest",display_name:"Rest",type:$.REST,cycle:m+1,round:i+1,elapsed:0,duration:s.time_off};f.push(J(P))}}),i<s.tabatas-1){const p={name:"Break",display_name:"Break",type:$.BREAK,cycle:0,round:i+2,elapsed:0,duration:s.rest_time};f.push(J(p))}return f.unshift(J({name:"Prepare",display_name:"Prep",type:$.PREP,cycle:0,round:0,elapsed:0,duration:s.prep_time})),f};return{subscribe:l,set:e,update:r,setWorkout:t,reset:()=>{r(s=>s.map(c=>(c.elapsed=0,c)))},isComplete:()=>{let s=!1;return r(c=>(s=Boolean(c.length)&&c.every(f=>f.elapsed===f.duration),c)),s},hasStarted:()=>{let s=!1;return l(f=>{f.length&&(s=f[0].elapsed>0)})(),s}}};var T=Ue();function He(l){let e,r,t;const n=l[1].default,a=se(n,l,l[0],null);return r=new je({props:{label:"Create New Workout",type:"button",name:"create",id:"create"}}),r.$on("click",l[2]),{c(){a&&a.c(),e=j(),w(r.$$.fragment)},l(o){a&&a.l(o),e=V(o),y(r.$$.fragment,o)},m(o,u){a&&a.m(o,u),v(o,e,u),R(r,o,u),t=!0},p(o,[u]){a&&a.p&&(!t||u&1)&&ae(a,n,o,o[0],t?le(n,o[0],u,null):oe(o[0]),null)},i(o){t||(d(a,o),d(r.$$.fragment,o),t=!0)},o(o){g(a,o),g(r.$$.fragment,o),t=!1},d(o){a&&a.d(o),o&&h(e),I(r,o)}}}function qe(l,e,r){let{$$slots:t={},$$scope:n}=e;const a=()=>Ce("/workout",{replaceState:!0});return l.$$set=o=>{"$$scope"in o&&r(0,n=o.$$scope)},[n,t,a]}class de extends U{constructor(e){super();H(this,e,qe,He,q,{})}}function Fe(l){let e,r;return e=new Ve({props:{id:"tabataSettingsForm",title:"Tabata Settings",fieldsets:l[1]()}}),e.$on("change",l[2]),e.$on("submit",l[3]),e.$on("click",l[4]),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){R(e,t,n),r=!0},p:Y,i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){I(e,t)}}}function Ge(l,e,r){let t,n;A(l,T,i=>r(6,t=i));const a=te.userSettings;A(l,a,i=>r(7,n=i));const o=()=>{const i=t.find(S=>S.type===$.PREP),p=t.find(S=>S.type===$.WORK),m=t.find(S=>S.type===$.REST),b=t.find(S=>S.type===$.BREAK);return[{legend:"Runtime",inputs:[{id:"prep_time",name:"PREP",value:i?i.duration:0,label:"Prep Time (seconds)",type:"number"},{id:"time_on",name:"WORK",value:p?p.duration:0,label:"Exercise Time (seconds)",type:"number"},{id:"time_off",name:"REST",value:m?m.duration:0,label:"Rest Time (seconds)",type:"number"},{id:"rest_time",name:"BREAK",value:b?b.duration:0,label:"Break Time (seconds)",type:"number"},{id:"round",name:"round",value:t.length?t[t.length-1].round:0,label:"Rounds",type:"number"},{id:"use_voice",name:"use_voice",checked:n.use_voice,label:"Use Voice?",type:"slider"},{id:"preferred_voice",name:"preferred_voice",value:n.preferred_voice,label:"Preferred Voice",type:"select",placeholder:"Available Voices",options:re.getVoices(null,!0)}]}]},u=i=>{switch(i.currentTarget.name){case"PREP":case"WORK":case"REST":case"BREAK":const p=parseInt(i.currentTarget.value);isNaN(p)||T.update(b=>(b.forEach((P,S)=>{P.type===$[i.currentTarget.name]&&b[S].elapsed!==b[S].duration&&(b[S].duration=p)}),b));break;case"round":const m=parseInt(i.currentTarget.value);!isNaN(m)&&m>0&&s(m);break;case"use_voice":x(a,n.use_voice=i.currentTarget.checked,n);break;case"preferred_voice":x(a,n.preferred_voice=i.currentTarget.value,n),re.defaultVoice=n.preferred_voice;break}},s=i=>{const p=t.filter(W=>W.round===1&&W.type===$.WORK),m=p.map(W=>Be(W)),b=t.find(W=>W.type===$.PREP),P=t.find(W=>W.type===$.REST),S=t.find(W=>W.type===$.BREAK),Z={tabatas:i,prep_time:b?b.duration:0,time_on:p.length?p[0].duration:0,time_off:P?P.duration:0,rest_time:S?S.duration:0};T.setWorkout({meta:Z,exercises:m})};function c(i){ce.call(this,l,i)}function f(i){ce.call(this,l,i)}return[a,o,u,c,f]}class Ye extends U{constructor(e){super();H(this,e,Ge,Fe,q,{})}}function ze(l){let e,r,t,n,a,o,u,s,c;return r=new M({props:{label:"Elapsed",value:l[0]}}),n=new M({props:{label:"Remaining",value:l[1]}}),o=new M({props:{label:"Cycles",value:l[2]}}),s=new M({props:{label:"Tabatas",value:l[3]}}),{c(){e=B("div"),w(r.$$.fragment),t=j(),w(n.$$.fragment),a=j(),w(o.$$.fragment),u=j(),w(s.$$.fragment),this.h()},l(f){e=K(f,"DIV",{class:!0});var i=C(e);y(r.$$.fragment,i),t=V(i),y(n.$$.fragment,i),a=V(i),y(o.$$.fragment,i),u=V(i),y(s.$$.fragment,i),i.forEach(h),this.h()},h(){L(e,"class","svelte-1ujgwto")},m(f,i){v(f,e,i),R(r,e,null),O(e,t),R(n,e,null),O(e,a),R(o,e,null),O(e,u),R(s,e,null),c=!0},p(f,[i]){const p={};i&1&&(p.value=f[0]),r.$set(p);const m={};i&2&&(m.value=f[1]),n.$set(m);const b={};i&4&&(b.value=f[2]),o.$set(b);const P={};i&8&&(P.value=f[3]),s.$set(P)},i(f){c||(d(r.$$.fragment,f),d(n.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),c=!0)},o(f){g(r.$$.fragment,f),g(n.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),c=!1},d(f){f&&h(e),I(r),I(n),I(o),I(s)}}}function Qe(l,e,r){let t="00:00",n="00:00",a="0/0",o="0/0";const u=T.subscribe(s=>{if(!s.length)return;const c=s.findIndex(p=>p.elapsed<p.duration);if(c===-1)return;const f=s.reduce((p,m)=>p+m.elapsed,0),i=s.reduce((p,m)=>p+m.duration,0);r(0,t=_e(f)),r(1,n=_e(i-f)),r(2,a=s[c].cycle+"/"+s[s.length-1].cycle),r(3,o=s[c].round+"/"+s[s.length-1].round)});return X(()=>u()),[t,n,a,o]}class Xe extends U{constructor(e){super();H(this,e,Qe,ze,q,{})}}function Je(l){let e,r;const t=l[1].default,n=se(t,l,l[0],null);return{c(){e=B("div"),n&&n.c(),this.h()},l(a){e=K(a,"DIV",{class:!0});var o=C(e);n&&n.l(o),o.forEach(h),this.h()},h(){L(e,"class","svelte-1t55ahf")},m(a,o){v(a,e,o),n&&n.m(e,null),r=!0},p(a,[o]){n&&n.p&&(!r||o&1)&&ae(n,t,a,a[0],r?le(t,a[0],o,null):oe(a[0]),null)},i(a){r||(d(n,a),r=!0)},o(a){g(n,a),r=!1},d(a){a&&h(e),n&&n.d(a)}}}function Me(l,e,r){let{$$slots:t={},$$scope:n}=e;return l.$$set=a=>{"$$scope"in a&&r(0,n=a.$$scope)},[n,t]}class Ze extends U{constructor(e){super();H(this,e,Me,Je,q,{})}}function he(l,e,r){const t=l.slice();return t[6]=e[r],t}function be(l,e,r){const t=l.slice();return t[9]=e[r],t}function xe(l){let e,r;return e=new Ke({props:{name:l[9].display_name,completed:l[9].duration===l[9].elapsed,region:l[9].region,target:l[9].target,band_pos:l[9].band_pos,band_pos_text:l[9].band_pos_text}}),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){R(e,t,n),r=!0},p(t,n){const a={};n&2&&(a.name=t[9].display_name),n&2&&(a.completed=t[9].duration===t[9].elapsed),n&2&&(a.region=t[9].region),n&2&&(a.target=t[9].target),n&2&&(a.band_pos=t[9].band_pos),n&2&&(a.band_pos_text=t[9].band_pos_text),e.$set(a)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){I(e,t)}}}function et(l){let e,r=l[9].display_name+"",t;return{c(){e=B("h2"),t=F(r),this.h()},l(n){e=K(n,"H2",{class:!0});var a=C(e);t=G(a,r),a.forEach(h),this.h()},h(){L(e,"class","rest-item svelte-1bof0sx")},m(n,a){v(n,e,a),O(e,t)},p(n,a){a&2&&r!==(r=n[9].display_name+"")&&Ie(t,r)},i:Y,o:Y,d(n){n&&h(e)}}}function ge(l){let e,r,t,n;const a=[et,xe],o=[];function u(s,c){return s[9].type!==$.WORK?0:1}return e=u(l),r=o[e]=a[e](l),{c(){r.c(),t=D()},l(s){r.l(s),t=D()},m(s,c){o[e].m(s,c),v(s,t,c),n=!0},p(s,c){let f=e;e=u(s),e===f?o[e].p(s,c):(z(),g(o[f],1,1,()=>{o[f]=null}),Q(),r=o[e],r?r.p(s,c):(r=o[e]=a[e](s),r.c()),d(r,1),r.m(t.parentNode,t))},i(s){n||(d(r),n=!0)},o(s){g(r),n=!1},d(s){o[e].d(s),s&&h(t)}}}function $e(l){let e,r,t,n=l[6],a=[];for(let u=0;u<n.length;u+=1)a[u]=ge(be(l,n,u));const o=u=>g(a[u],1,1,()=>{a[u]=null});return{c(){e=B("li");for(let u=0;u<a.length;u+=1)a[u].c();r=j(),this.h()},l(u){e=K(u,"LI",{class:!0});var s=C(e);for(let c=0;c<a.length;c+=1)a[c].l(s);r=V(s),s.forEach(h),this.h()},h(){L(e,"class","svelte-1bof0sx")},m(u,s){v(u,e,s);for(let c=0;c<a.length;c+=1)a[c].m(e,null);O(e,r),t=!0},p(u,s){if(s&6){n=u[6];let c;for(c=0;c<n.length;c+=1){const f=be(u,n,c);a[c]?(a[c].p(f,s),d(a[c],1)):(a[c]=ge(f),a[c].c(),d(a[c],1),a[c].m(e,r))}for(z(),c=n.length;c<a.length;c+=1)o(c);Q()}},i(u){if(!t){for(let s=0;s<n.length;s+=1)d(a[s]);t=!0}},o(u){a=a.filter(Boolean);for(let s=0;s<a.length;s+=1)g(a[s]);t=!1},d(u){u&&h(e),ie(a,u)}}}function tt(l){let e,r,t=l[2](l[1]),n=[];for(let o=0;o<t.length;o+=1)n[o]=$e(he(l,t,o));const a=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){e=B("ol");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=K(o,"OL",{class:!0});var u=C(e);for(let s=0;s<n.length;s+=1)n[s].l(u);u.forEach(h),this.h()},h(){L(e,"class","svelte-1bof0sx")},m(o,u){v(o,e,u);for(let s=0;s<n.length;s+=1)n[s].m(e,null);l[4](e),r=!0},p(o,u){if(u&6){t=o[2](o[1]);let s;for(s=0;s<t.length;s+=1){const c=he(o,t,s);n[s]?(n[s].p(c,u),d(n[s],1)):(n[s]=$e(c),n[s].c(),d(n[s],1),n[s].m(e,null))}for(z(),s=t.length;s<n.length;s+=1)a(s);Q()}},i(o){if(!r){for(let u=0;u<t.length;u+=1)d(n[u]);r=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)g(n[u]);r=!1},d(o){o&&h(e),ie(n,o),l[4](null)}}}function nt(l){let e,r;return e=new Ze({props:{$$slots:{default:[tt]},$$scope:{ctx:l}}}),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){R(e,t,n),r=!0},p(t,[n]){const a={};n&4099&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){I(e,t)}}}function rt(l,e,r){let t;A(l,T,c=>r(1,t=c));const n=c=>{const f=[];return c.forEach((i,p)=>{p%2!=0&&f.push([c[p-1],i])}),f};let a,{active:o}=e;const u=T.subscribe(c=>{if(!c.length||!o)return;const f=c.findIndex(m=>m.elapsed<m.duration&&m.type===$.WORK);if(f===-1)return;const i=Math.ceil(f/2)-1,p=a.children[i];a.scrollTo({top:p.offsetHeight*i,behavior:"smooth"})});X(()=>u());function s(c){ee[c?"unshift":"push"](()=>{a=c,r(0,a)})}return l.$$set=c=>{"active"in c&&r(3,o=c.active)},[a,t,n,o,s]}class st extends U{constructor(e){super();H(this,e,rt,nt,q,{active:3})}}function at(l){let e,r;return e=new Xe({}),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){R(e,t,n),r=!0},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){I(e,t)}}}function ot(l){let e,r,t,n,a,o,u,s;function c(i){l[8](i)}let f={timeKeeper:l[3],value:l[1],$$slots:{default:[at]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.active=l[0]),e=new Ne({props:f}),ee.push(()=>ue(e,"active",c)),n=new Ae({props:{buttons:l[6]()}}),n.$on("click",l[5]),u=new st({props:{active:l[0]}}),{c(){w(e.$$.fragment),t=j(),a=B("div"),w(n.$$.fragment),o=j(),w(u.$$.fragment),this.h()},l(i){y(e.$$.fragment,i),t=V(i),a=K(i,"DIV",{style:!0});var p=C(a);y(n.$$.fragment,p),o=V(i),y(u.$$.fragment,i),this.h()},h(){fe(a,"display","contents"),fe(a,"--theme-icon-size","1.6rem")},m(i,p){R(e,i,p),v(i,t,p),v(i,a,p),R(n,a,null),v(i,o,p),R(u,i,p),s=!0},p(i,[p]){const m={};p&2&&(m.value=i[1]),p&1048576&&(m.$$scope={dirty:p,ctx:i}),!r&&p&1&&(r=!0,m.active=i[0],pe(()=>r=!1)),e.$set(m);const b={};p&1&&(b.active=i[0]),u.$set(b)},i(i){s||(d(e.$$.fragment,i),d(n.$$.fragment,i),d(u.$$.fragment,i),s=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),g(u.$$.fragment,i),s=!1},d(i){I(e,i),i&&h(t),i&&h(a),I(n,i),i&&h(o),I(u,i)}}}function lt(l,e,r){let t,n,a,o;A(l,T,_=>r(9,t=_));let{settingsOpen:u=!1}=e,s;const c=te.userSettings;A(l,c,_=>r(11,a=_));const f=te.docBodyBgColor,i=De();A(l,i,_=>r(10,n=_));const p=_=>Object.entries($).reduce((E,k)=>k[1]===t[_].type?k[0]:E,null),m=()=>t.findIndex(_=>_.elapsed<_.duration),b=()=>{const _=t.findIndex(N=>N.type===$.WORK&&N.elapsed===0);if(_===-1)return"";const E=t[_];let k=`Next Exercise is ${E.display_name}
`;return E.band_pos>0&&(k+=`Band's Position: ${E.band_pos_text}`),k},P=Se(T,_=>{if(!_.length||!T.hasStarted())return 0;const E=m();if(E===-1)return 0;const k=_[E];return k.duration-k.elapsed});A(l,P,_=>r(1,o=_));const S=_=>{if(!a.use_voice||!i.isTicking())return;const E=m();if(E===-1)return;let k="";const N=t[E];switch(N.elapsed){case 0:switch(N.type){case $.WORK:k+=`Go
`;break;case $.REST:case $.BREAK:k+=`Stop
`;break}break;case 1:switch(N.type){case $.REST:k+=`Rest
`;break;case $.BREAK:k+=`Break
`;break;case $.PREP:k+=`Prep
`;break}break;case 2:switch(N.type){case $.REST:case $.PREP:k+=b();break}break}if(_<4)k+=`${_}
`;else if(N.type===$.BREAK)switch(_){case 14:k+=b();break;case 15:k+=`Get Ready
`;break}else T.isComplete()&&(k+=`Well done
`);k.length&&re.speak(k)},Z=_=>{const E=m();E==-1||n===0?f.set(null):(i.isTicking()&&!document.body.classList.length||_===t[E].duration)&&f.set(p(E))},W=_=>{switch(i.isTicking()&&i.stop(),_.currentTarget.dataset.action){case"reset":r(0,s=!1),i.reset(),T.reset();break;case"settings_open":r(7,u=!0);break}},ke=()=>[{icon:"bi bi-bootstrap-reboot",title:"Reset",data:{"data-action":"reset"}},{component:Le,props:{}},{component:Oe,props:{}},{icon:"bi bi-gear-wide-connected",title:"Timer Settings",data:{"data-action":"settings_open"}}],ve=i.subscribe(()=>{const _=m();_!==-1&&i.isTicking()&&x(T,t[_].elapsed+=1,t)}),we=P.subscribe(_=>{S(_),Z(_)});X(()=>{ve(),we(),f.set(null)});function ye(_){s=_,r(0,s)}return l.$$set=_=>{"settingsOpen"in _&&r(7,u=_.settingsOpen)},[s,o,c,i,P,W,ke,u,ye]}class ct extends U{constructor(e){super();H(this,e,lt,ot,q,{settingsOpen:7})}}function it(l){let e,r;return e=new de({props:{$$slots:{default:[ut]},$$scope:{ctx:l}}}),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){R(e,t,n),r=!0},p(t,n){const a={};n&128&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){I(e,t)}}}function ut(l){let e,r,t,n,a,o,u;return{c(){e=B("h2"),r=F("Workout not found!"),t=j(),n=B("p"),a=F("The workout you are looking for was not found."),o=B("br"),u=F("Perhaps it has expired. Please create a new workout"),this.h()},l(s){e=K(s,"H2",{class:!0});var c=C(e);r=G(c,"Workout not found!"),c.forEach(h),t=V(s),n=K(s,"P",{});var f=C(n);a=G(f,"The workout you are looking for was not found."),o=K(f,"BR",{}),u=G(f,"Perhaps it has expired. Please create a new workout"),f.forEach(h),this.h()},h(){L(e,"class","center error")},m(s,c){v(s,e,c),O(e,r),v(s,t,c),v(s,n,c),O(n,a),O(n,o),O(n,u)},d(s){s&&h(e),s&&h(t),s&&h(n)}}}function ft(l){let e,r,t,n;const a=[mt,pt],o=[];function u(s,c){return s[1].length?0:1}return e=u(l),r=o[e]=a[e](l),{c(){r.c(),t=D()},l(s){r.l(s),t=D()},m(s,c){o[e].m(s,c),v(s,t,c),n=!0},p(s,c){let f=e;e=u(s),e===f?o[e].p(s,c):(z(),g(o[f],1,1,()=>{o[f]=null}),Q(),r=o[e],r?r.p(s,c):(r=o[e]=a[e](s),r.c()),d(r,1),r.m(t.parentNode,t))},i(s){n||(d(r),n=!0)},o(s){g(r),n=!1},d(s){o[e].d(s),s&&h(t)}}}function pt(l){let e,r;return e=new de({props:{$$slots:{default:[_t]},$$scope:{ctx:l}}}),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){R(e,t,n),r=!0},p(t,n){const a={};n&128&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){I(e,t)}}}function mt(l){let e,r,t,n;const a=[ht,dt],o=[];function u(s,c){return s[0]?0:1}return e=u(l),r=o[e]=a[e](l),{c(){r.c(),t=D()},l(s){r.l(s),t=D()},m(s,c){o[e].m(s,c),v(s,t,c),n=!0},p(s,c){let f=e;e=u(s),e===f?o[e].p(s,c):(z(),g(o[f],1,1,()=>{o[f]=null}),Q(),r=o[e],r?r.p(s,c):(r=o[e]=a[e](s),r.c()),d(r,1),r.m(t.parentNode,t))},i(s){n||(d(r),n=!0)},o(s){g(r),n=!1},d(s){o[e].d(s),s&&h(t)}}}function _t(l){let e,r,t,n,a,o,u;return{c(){e=B("h2"),r=F("No Workout!"),t=j(),n=B("p"),a=F("You are in need of a workout."),o=B("br"),u=F("Please create one."),this.h()},l(s){e=K(s,"H2",{class:!0});var c=C(e);r=G(c,"No Workout!"),c.forEach(h),t=V(s),n=K(s,"P",{});var f=C(n);a=G(f,"You are in need of a workout."),o=K(f,"BR",{}),u=G(f,"Please create one."),f.forEach(h),this.h()},h(){L(e,"class","center")},m(s,c){v(s,e,c),O(e,r),v(s,t,c),v(s,n,c),O(n,a),O(n,o),O(n,u)},d(s){s&&h(e),s&&h(t),s&&h(n)}}}function dt(l){let e,r,t;function n(o){l[5](o)}let a={};return l[0]!==void 0&&(a.settingsOpen=l[0]),e=new ct({props:a}),ee.push(()=>ue(e,"settingsOpen",n)),{c(){w(e.$$.fragment)},l(o){y(e.$$.fragment,o)},m(o,u){R(e,o,u),t=!0},p(o,u){const s={};!r&&u&1&&(r=!0,s.settingsOpen=o[0],pe(()=>r=!1)),e.$set(s)},i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){I(e,o)}}}function ht(l){let e,r;return e=new Ye({}),e.$on("click",l[3]),e.$on("submit",l[4]),{c(){w(e.$$.fragment)},l(t){y(e.$$.fragment,t)},m(t,n){R(e,t,n),r=!0},p:Y,i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){I(e,t)}}}function bt(l){let e,r,t;return r=new We({}),{c(){e=B("div"),w(r.$$.fragment),this.h()},l(n){e=K(n,"DIV",{class:!0});var a=C(e);y(r.$$.fragment,a),a.forEach(h),this.h()},h(){L(e,"class","center")},m(n,a){v(n,e,a),R(r,e,null),t=!0},p:Y,i(n){t||(d(r.$$.fragment,n),t=!0)},o(n){g(r.$$.fragment,n),t=!1},d(n){n&&h(e),I(r)}}}function gt(l){let e,r,t,n={ctx:l,current:null,token:null,hasCatch:!0,pending:bt,then:ft,catch:it,blocks:[,,,]};return Ee(l[2](),n),{c(){e=j(),r=D(),n.block.c(),this.h()},l(a){Te('[data-svelte="svelte-1jsep15"]',document.head).forEach(h),e=V(a),r=D(),n.block.l(a),this.h()},h(){document.title="SWEAT Tabata"},m(a,o){v(a,e,o),v(a,r,o),n.block.m(a,n.anchor=o),n.mount=()=>r.parentNode,n.anchor=r,t=!0},p(a,[o]){l=a,Pe(n,l,o)},i(a){t||(d(n.block),t=!0)},o(a){for(let o=0;o<3;o+=1){const u=n.blocks[o];g(u)}t=!1},d(a){a&&h(e),a&&h(r),n.block.d(a),n.token=null,n=null}}}function $t(l,e,r){let t;A(l,T,f=>r(1,t=f));const n=()=>new Promise(async f=>{const i=new URL(window.location.href);let p="https://kalabaaz.pythonanywhere.com";p+=`/api/tabata/${i.searchParams.get("w")}.json`;try{const m=await fetch(p,{credentials:"include"});if(m.ok){const b=await m.json();f(b)}}catch(m){console.error(m),f(null)}}),a=()=>new Promise(async(f,i)=>{if(new URL(window.location.href).searchParams.has("w")){const b=await n();if(b)me.setItem("workout",b),ne.setItem("routine",[]);else{i();return}}const m=ne.getItem("routine");if(m.length)T.set(m);else{const b=me.getItem("workout");b&&T.setWorkout(b)}f()});X(()=>ne.setItem("routine",t));let o;const u=()=>r(0,o=!o),s=()=>r(0,o=!o);function c(f){o=f,r(0,o)}return[o,t,a,u,s,c]}class Pt extends U{constructor(e){super();H(this,e,$t,gt,q,{})}}export{Pt as default};
