import{D as Re,S as N,i as L,s as D,T as te,k as K,w,m as W,x as R,g as y,y as S,V as ne,W as re,X as se,q as d,o as h,d as b,B as T,H as G,M as j,O as J,Y as ae,e as B,c as O,a as C,b as H,G as P,K as Q,l as A,n as Y,p as z,I as le,Q as Z,t as q,h as F,j as Se,R as oe,f as ce,U as ie,a3 as Te,a4 as Ee,a2 as Ie,a5 as Pe}from"../../chunks/vendor-e13e40a5.js";import{p as Be}from"../../chunks/stores-e2f0a4ed.js";import{A as M,L as ue,S as x}from"../../chunks/appStore-343e38e2.js";import{r as k,R as U,E as Oe,S as Ke}from"../../chunks/exerciseCard-9f40ced8.js";import{V as ee,s as fe,P as We}from"../../chunks/helpers-7746061f.js";import{g as Ce}from"../../chunks/navigation-bd39ff07.js";import{L as je,F as Ve,a as X,M as Ae,I as Ne,P as Le}from"../../chunks/playPauseToggleIcon-daa24825.js";import{T as De}from"../../chunks/TimeKeeper-59cb4b66.js";import"../../chunks/singletons-a6a7384f.js";const He=()=>{const{subscribe:o,set:e,update:r}=Re([]),t=s=>{e(n(s.meta,s.exercises))},n=(s,c)=>{let u=[];for(let f=0;f<s.tabatas;f++)if(c.forEach((p,_)=>{const g=Object.assign({cycle:_+1,round:f+1,elapsed:0,duration:s.time_on},p);if(g.type=k.WORK,u.push(U(g)),_<c.length-1){const $={name:"Rest",display_name:"Rest",type:k.REST,cycle:_+1,round:f+1,elapsed:0,duration:s.time_off};u.push(U($))}}),f<s.tabatas-1){const p={name:"Break",display_name:"Break",type:k.BREAK,cycle:0,round:f+2,elapsed:0,duration:s.rest_time};u.push(U(p))}return u.unshift(U({name:"Prepare",display_name:"Prep",type:k.PREP,cycle:0,round:0,elapsed:0,duration:s.prep_time})),u};return{subscribe:o,set:e,update:r,setWorkout:t,reset:()=>{r(s=>s.map(c=>(c.elapsed=0,c)))},isComplete:()=>{let s=!1;return r(c=>(s=Boolean(c.length)&&c.every(u=>u.elapsed===u.duration),c)),s},hasStarted:()=>{let s=!1;return o(u=>{u.length&&(s=u[0].elapsed>0)})(),s}}};var I=He();function qe(o){let e,r,t;const n=o[1].default,a=te(n,o,o[0],null);return r=new je({props:{label:"Create New Workout",type:"button",name:"create",id:"create"}}),r.$on("click",o[2]),{c(){a&&a.c(),e=K(),w(r.$$.fragment)},l(l){a&&a.l(l),e=W(l),R(r.$$.fragment,l)},m(l,i){a&&a.m(l,i),y(l,e,i),S(r,l,i),t=!0},p(l,[i]){a&&a.p&&(!t||i&1)&&ne(a,n,l,l[0],t?se(n,l[0],i,null):re(l[0]),null)},i(l){t||(d(a,l),d(r.$$.fragment,l),t=!0)},o(l){h(a,l),h(r.$$.fragment,l),t=!1},d(l){a&&a.d(l),l&&b(e),T(r,l)}}}function Fe(o,e,r){let{$$slots:t={},$$scope:n}=e;const a=()=>Ce("/workout",{replaceState:!0});return o.$$set=l=>{"$$scope"in l&&r(0,n=l.$$scope)},[n,t,a]}class pe extends N{constructor(e){super();L(this,e,Fe,qe,D,{})}}function Ge(o){let e,r;return e=new Ve({props:{id:"tabataSettingsForm",title:"Tabata Settings",fieldsets:o[1]()}}),e.$on("change",o[2]),e.$on("submit",o[3]),e.$on("click",o[4]),{c(){w(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){S(e,t,n),r=!0},p:G,i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){T(e,t)}}}function Ye(o,e,r){let t,n;j(o,I,u=>r(7,n=u));const a=M.userSettings;j(o,a,u=>r(6,t=u));const l=()=>{const u=n.find($=>$.type===k.PREP),f=n.find($=>$.type===k.WORK),p=n.find($=>$.type===k.REST),_=n.find($=>$.type===k.BREAK);return[{legend:"Runtime",inputs:[{id:"prep_time",name:"PREP",value:u?u.duration:0,label:"Prep Time (seconds)",type:"number"},{id:"time_on",name:"WORK",value:f?f.duration:0,label:"Exercise Time (seconds)",type:"number"},{id:"time_off",name:"REST",value:p?p.duration:0,label:"Rest Time (seconds)",type:"number"},{id:"rest_time",name:"BREAK",value:_?_.duration:0,label:"Break Time (seconds)",type:"number"},{id:"use_voice",name:"use_voice",checked:t.use_voice,label:"Use Voice?",type:"slider"},{id:"preferred_voice",name:"preferred_voice",value:t.preferred_voice,label:"Preferred Voice",type:"select",placeholder:"Available Voices",options:ee.getVoices(null,!0)}]}]},i=u=>{switch(u.currentTarget.name){case"PREP":case"WORK":case"REST":case"BREAK":const f=parseInt(u.currentTarget.value);isNaN(f)||I.update(p=>(p.forEach((_,g)=>{_.type===k[u.currentTarget.name]&&p[g].elapsed!==p[g].duration&&(p[g].duration=f)}),p));break;case"use_voice":J(a,t.use_voice=u.currentTarget.checked,t);break;case"preferred_voice":J(a,t.preferred_voice=u.currentTarget.value,t),ee.defaultVoice=t.preferred_voice;break}};function s(u){ae.call(this,o,u)}function c(u){ae.call(this,o,u)}return[a,l,i,s,c]}class ze extends N{constructor(e){super();L(this,e,Ye,Ge,D,{})}}function Qe(o){let e,r,t,n,a,l,i,s,c;return r=new X({props:{label:"Elapsed",value:o[0]}}),n=new X({props:{label:"Remaining",value:o[1]}}),l=new X({props:{label:"Cycles",value:o[2]}}),s=new X({props:{label:"Tabatas",value:o[3]}}),{c(){e=B("div"),w(r.$$.fragment),t=K(),w(n.$$.fragment),a=K(),w(l.$$.fragment),i=K(),w(s.$$.fragment),this.h()},l(u){e=O(u,"DIV",{class:!0});var f=C(e);R(r.$$.fragment,f),t=W(f),R(n.$$.fragment,f),a=W(f),R(l.$$.fragment,f),i=W(f),R(s.$$.fragment,f),f.forEach(b),this.h()},h(){H(e,"class","svelte-1ujgwto")},m(u,f){y(u,e,f),S(r,e,null),P(e,t),S(n,e,null),P(e,a),S(l,e,null),P(e,i),S(s,e,null),c=!0},p(u,[f]){const p={};f&1&&(p.value=u[0]),r.$set(p);const _={};f&2&&(_.value=u[1]),n.$set(_);const g={};f&4&&(g.value=u[2]),l.$set(g);const $={};f&8&&($.value=u[3]),s.$set($)},i(u){c||(d(r.$$.fragment,u),d(n.$$.fragment,u),d(l.$$.fragment,u),d(s.$$.fragment,u),c=!0)},o(u){h(r.$$.fragment,u),h(n.$$.fragment,u),h(l.$$.fragment,u),h(s.$$.fragment,u),c=!1},d(u){u&&b(e),T(r),T(n),T(l),T(s)}}}function Ue(o,e,r){let t="00:00",n="00:00",a="0/0",l="0/0";const i=I.subscribe(s=>{if(!s.length)return;const c=s.findIndex(p=>p.elapsed<p.duration);if(c===-1)return;const u=s.reduce((p,_)=>p+_.elapsed,0),f=s.reduce((p,_)=>p+_.duration,0);r(0,t=fe(u)),r(1,n=fe(f-u)),r(2,a=s[c].cycle+"/"+s[s.length-1].cycle),r(3,l=s[c].round+"/"+s[s.length-1].round)});return Q(()=>i()),[t,n,a,l]}class Xe extends N{constructor(e){super();L(this,e,Ue,Qe,D,{})}}function Je(o){let e,r;const t=o[1].default,n=te(t,o,o[0],null);return{c(){e=B("div"),n&&n.c(),this.h()},l(a){e=O(a,"DIV",{class:!0});var l=C(e);n&&n.l(l),l.forEach(b),this.h()},h(){H(e,"class","svelte-1t55ahf")},m(a,l){y(a,e,l),n&&n.m(e,null),r=!0},p(a,[l]){n&&n.p&&(!r||l&1)&&ne(n,t,a,a[0],r?se(t,a[0],l,null):re(a[0]),null)},i(a){r||(d(n,a),r=!0)},o(a){h(n,a),r=!1},d(a){a&&b(e),n&&n.d(a)}}}function Ze(o,e,r){let{$$slots:t={},$$scope:n}=e;return o.$$set=a=>{"$$scope"in a&&r(0,n=a.$$scope)},[n,t]}class Me extends N{constructor(e){super();L(this,e,Ze,Je,D,{})}}function me(o,e,r){const t=o.slice();return t[6]=e[r],t}function _e(o,e,r){const t=o.slice();return t[9]=e[r],t}function xe(o){let e,r;return e=new Oe({props:{name:o[9].display_name,completed:o[9].duration===o[9].elapsed,region:o[9].region,target:o[9].target,band_pos:o[9].band_pos,band_pos_text:o[9].band_pos_text}}),{c(){w(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){S(e,t,n),r=!0},p(t,n){const a={};n&2&&(a.name=t[9].display_name),n&2&&(a.completed=t[9].duration===t[9].elapsed),n&2&&(a.region=t[9].region),n&2&&(a.target=t[9].target),n&2&&(a.band_pos=t[9].band_pos),n&2&&(a.band_pos_text=t[9].band_pos_text),e.$set(a)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){T(e,t)}}}function et(o){let e,r=o[9].display_name+"",t;return{c(){e=B("h2"),t=q(r),this.h()},l(n){e=O(n,"H2",{class:!0});var a=C(e);t=F(a,r),a.forEach(b),this.h()},h(){H(e,"class","rest-item svelte-n7t0x8")},m(n,a){y(n,e,a),P(e,t)},p(n,a){a&2&&r!==(r=n[9].display_name+"")&&Se(t,r)},i:G,o:G,d(n){n&&b(e)}}}function de(o){let e,r,t,n;const a=[et,xe],l=[];function i(s,c){return s[9].type!==k.WORK?0:1}return e=i(o),r=l[e]=a[e](o),{c(){r.c(),t=A()},l(s){r.l(s),t=A()},m(s,c){l[e].m(s,c),y(s,t,c),n=!0},p(s,c){let u=e;e=i(s),e===u?l[e].p(s,c):(Y(),h(l[u],1,1,()=>{l[u]=null}),z(),r=l[e],r?r.p(s,c):(r=l[e]=a[e](s),r.c()),d(r,1),r.m(t.parentNode,t))},i(s){n||(d(r),n=!0)},o(s){h(r),n=!1},d(s){l[e].d(s),s&&b(t)}}}function he(o){let e,r,t,n=o[6],a=[];for(let i=0;i<n.length;i+=1)a[i]=de(_e(o,n,i));const l=i=>h(a[i],1,1,()=>{a[i]=null});return{c(){e=B("li");for(let i=0;i<a.length;i+=1)a[i].c();r=K(),this.h()},l(i){e=O(i,"LI",{class:!0});var s=C(e);for(let c=0;c<a.length;c+=1)a[c].l(s);r=W(s),s.forEach(b),this.h()},h(){H(e,"class","svelte-n7t0x8")},m(i,s){y(i,e,s);for(let c=0;c<a.length;c+=1)a[c].m(e,null);P(e,r),t=!0},p(i,s){if(s&6){n=i[6];let c;for(c=0;c<n.length;c+=1){const u=_e(i,n,c);a[c]?(a[c].p(u,s),d(a[c],1)):(a[c]=de(u),a[c].c(),d(a[c],1),a[c].m(e,r))}for(Y(),c=n.length;c<a.length;c+=1)l(c);z()}},i(i){if(!t){for(let s=0;s<n.length;s+=1)d(a[s]);t=!0}},o(i){a=a.filter(Boolean);for(let s=0;s<a.length;s+=1)h(a[s]);t=!1},d(i){i&&b(e),le(a,i)}}}function tt(o){let e,r,t=o[2](o[1]),n=[];for(let l=0;l<t.length;l+=1)n[l]=he(me(o,t,l));const a=l=>h(n[l],1,1,()=>{n[l]=null});return{c(){e=B("ol");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=O(l,"OL",{class:!0});var i=C(e);for(let s=0;s<n.length;s+=1)n[s].l(i);i.forEach(b),this.h()},h(){H(e,"class","svelte-n7t0x8")},m(l,i){y(l,e,i);for(let s=0;s<n.length;s+=1)n[s].m(e,null);o[4](e),r=!0},p(l,i){if(i&6){t=l[2](l[1]);let s;for(s=0;s<t.length;s+=1){const c=me(l,t,s);n[s]?(n[s].p(c,i),d(n[s],1)):(n[s]=he(c),n[s].c(),d(n[s],1),n[s].m(e,null))}for(Y(),s=t.length;s<n.length;s+=1)a(s);z()}},i(l){if(!r){for(let i=0;i<t.length;i+=1)d(n[i]);r=!0}},o(l){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)h(n[i]);r=!1},d(l){l&&b(e),le(n,l),o[4](null)}}}function nt(o){let e,r;return e=new Me({props:{$$slots:{default:[tt]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){S(e,t,n),r=!0},p(t,[n]){const a={};n&4099&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){T(e,t)}}}function rt(o,e,r){let t;j(o,I,c=>r(1,t=c));const n=c=>{const u=[];return c.forEach((f,p)=>{p%2!=0&&u.push([c[p-1],f])}),u};let a,{active:l}=e;const i=I.subscribe(c=>{if(!c.length||!l)return;const u=c.findIndex(_=>_.elapsed<_.duration&&_.type===k.WORK);if(u===-1)return;const f=Math.ceil(u/2)-1,p=a.children[f];a.scrollTo({top:p.offsetHeight*f,behavior:"smooth"})});Q(()=>i());function s(c){Z[c?"unshift":"push"](()=>{a=c,r(0,a)})}return o.$$set=c=>{"active"in c&&r(3,l=c.active)},[a,t,n,l,s]}class st extends N{constructor(e){super();L(this,e,rt,nt,D,{active:3})}}function at(o){let e,r;return e=new Xe({}),{c(){w(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){S(e,t,n),r=!0},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){T(e,t)}}}function lt(o){let e,r,t,n,a,l,i,s;function c(f){o[8](f)}let u={timeKeeper:o[3],value:o[1],$$slots:{default:[at]},$$scope:{ctx:o}};return o[0]!==void 0&&(u.active=o[0]),e=new Ae({props:u}),Z.push(()=>oe(e,"active",c)),n=new Ne({props:{buttons:o[6]()}}),n.$on("click",o[5]),i=new st({props:{active:o[0]}}),{c(){w(e.$$.fragment),t=K(),a=B("div"),w(n.$$.fragment),l=K(),w(i.$$.fragment),this.h()},l(f){R(e.$$.fragment,f),t=W(f),a=O(f,"DIV",{style:!0});var p=C(a);R(n.$$.fragment,p),l=W(f),R(i.$$.fragment,f),this.h()},h(){ce(a,"display","contents"),ce(a,"--theme-icon-size","1.6rem")},m(f,p){S(e,f,p),y(f,t,p),y(f,a,p),S(n,a,null),y(f,l,p),S(i,f,p),s=!0},p(f,[p]){const _={};p&2&&(_.value=f[1]),p&1048576&&(_.$$scope={dirty:p,ctx:f}),!r&&p&1&&(r=!0,_.active=f[0],ie(()=>r=!1)),e.$set(_);const g={};p&1&&(g.active=f[0]),i.$set(g)},i(f){s||(d(e.$$.fragment,f),d(n.$$.fragment,f),d(i.$$.fragment,f),s=!0)},o(f){h(e.$$.fragment,f),h(n.$$.fragment,f),h(i.$$.fragment,f),s=!1},d(f){T(e,f),f&&b(t),f&&b(a),T(n,f),f&&b(l),T(i,f)}}}function ot(o,e,r){let t,n,a,l;j(o,I,m=>r(9,t=m));let{settingsOpen:i=!1}=e,s;const c=M.userSettings;j(o,c,m=>r(11,a=m));const u=M.docBodyBgColor,f=De();j(o,f,m=>r(10,n=m));const p=m=>Object.entries(k).reduce((E,v)=>v[1]===t[m].type?v[0]:E,null),_=()=>t.findIndex(m=>m.elapsed<m.duration),g=()=>{const m=t.findIndex(V=>V.type===k.WORK&&V.elapsed===0);if(m===-1)return"";const E=t[m];let v=`Next Exercise is ${E.display_name}
`;return E.band_pos>0&&(v+=`Band's Position: ${E.band_pos_text}`),v},$=Te(I,m=>{if(!m.length||!I.hasStarted())return 0;const E=_();if(E===-1)return 0;const v=m[E];return v.duration-v.elapsed});j(o,$,m=>r(1,l=m));const be=m=>{if(!a.use_voice||!f.isTicking())return;const E=_();if(E===-1)return;let v="";const V=t[E];switch(V.elapsed){case 0:switch(V.type){case k.WORK:v+=`Go
`;break;case k.REST:case k.BREAK:v+=`Stop
`;break}break;case 1:switch(V.type){case k.REST:v+=`Rest
`;break;case k.BREAK:v+=`Break
`;break;case k.PREP:v+=`Prep
`;break}break;case 2:switch(V.type){case k.REST:case k.PREP:v+=g();break}break}if(m<4)v+=`${m}
`;else if(V.type===k.BREAK)switch(m){case 14:v+=g();break;case 15:v+=`Get Ready
`;break}else I.isComplete()&&(v+=`Well done
`);v.length&&ee.speak(v)},ge=m=>{const E=_();E==-1||n===0?u.set(null):(f.isTicking()&&!document.body.classList.length||m===t[E].duration)&&u.set(p(E))},$e=m=>{switch(f.isTicking()&&f.stop(),m.currentTarget.dataset.action){case"reset":r(0,s=!1),f.reset(),I.reset();break;case"settings_open":r(7,i=!0);break}},ke=()=>[{icon:"bi bi-bootstrap-reboot",title:"Reset",data:{"data-action":"reset"}},{component:Le,props:{}},{component:Ke,props:{}},{icon:"bi bi-gear-wide-connected",title:"Timer Settings",data:{"data-action":"settings_open"}}],ve=f.subscribe(()=>{const m=_();m!==-1&&f.isTicking()&&J(I,t[m].elapsed+=1,t)}),ye=$.subscribe(m=>{be(m),ge(m)});Q(()=>{ve(),ye(),u.set(null)});function we(m){s=m,r(0,s)}return o.$$set=m=>{"settingsOpen"in m&&r(7,i=m.settingsOpen)},[s,l,c,f,$,$e,ke,i,we]}class ct extends N{constructor(e){super();L(this,e,ot,lt,D,{settingsOpen:7})}}function it(o){let e,r;return e=new pe({props:{$$slots:{default:[ut]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){S(e,t,n),r=!0},p(t,n){const a={};n&512&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){T(e,t)}}}function ut(o){let e,r,t,n,a,l,i;return{c(){e=B("h2"),r=q("Workout not found!"),t=K(),n=B("p"),a=q("The workout you are looking for was not found."),l=B("br"),i=q("Perhaps it has expired. Please create a new workout"),this.h()},l(s){e=O(s,"H2",{class:!0});var c=C(e);r=F(c,"Workout not found!"),c.forEach(b),t=W(s),n=O(s,"P",{});var u=C(n);a=F(u,"The workout you are looking for was not found."),l=O(u,"BR",{}),i=F(u,"Perhaps it has expired. Please create a new workout"),u.forEach(b),this.h()},h(){H(e,"class","center error")},m(s,c){y(s,e,c),P(e,r),y(s,t,c),y(s,n,c),P(n,a),P(n,l),P(n,i)},d(s){s&&b(e),s&&b(t),s&&b(n)}}}function ft(o){let e,r,t,n;const a=[mt,pt],l=[];function i(s,c){return s[1].length?0:1}return e=i(o),r=l[e]=a[e](o),{c(){r.c(),t=A()},l(s){r.l(s),t=A()},m(s,c){l[e].m(s,c),y(s,t,c),n=!0},p(s,c){let u=e;e=i(s),e===u?l[e].p(s,c):(Y(),h(l[u],1,1,()=>{l[u]=null}),z(),r=l[e],r?r.p(s,c):(r=l[e]=a[e](s),r.c()),d(r,1),r.m(t.parentNode,t))},i(s){n||(d(r),n=!0)},o(s){h(r),n=!1},d(s){l[e].d(s),s&&b(t)}}}function pt(o){let e,r;return e=new pe({props:{$$slots:{default:[_t]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){S(e,t,n),r=!0},p(t,n){const a={};n&512&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){T(e,t)}}}function mt(o){let e,r,t,n;const a=[ht,dt],l=[];function i(s,c){return s[0]?0:1}return e=i(o),r=l[e]=a[e](o),{c(){r.c(),t=A()},l(s){r.l(s),t=A()},m(s,c){l[e].m(s,c),y(s,t,c),n=!0},p(s,c){let u=e;e=i(s),e===u?l[e].p(s,c):(Y(),h(l[u],1,1,()=>{l[u]=null}),z(),r=l[e],r?r.p(s,c):(r=l[e]=a[e](s),r.c()),d(r,1),r.m(t.parentNode,t))},i(s){n||(d(r),n=!0)},o(s){h(r),n=!1},d(s){l[e].d(s),s&&b(t)}}}function _t(o){let e,r,t,n,a,l,i;return{c(){e=B("h2"),r=q("No Workout!"),t=K(),n=B("p"),a=q("You are in need of a workout."),l=B("br"),i=q("Please create one."),this.h()},l(s){e=O(s,"H2",{class:!0});var c=C(e);r=F(c,"No Workout!"),c.forEach(b),t=W(s),n=O(s,"P",{});var u=C(n);a=F(u,"You are in need of a workout."),l=O(u,"BR",{}),i=F(u,"Please create one."),u.forEach(b),this.h()},h(){H(e,"class","center")},m(s,c){y(s,e,c),P(e,r),y(s,t,c),y(s,n,c),P(n,a),P(n,l),P(n,i)},d(s){s&&b(e),s&&b(t),s&&b(n)}}}function dt(o){let e,r,t;function n(l){o[5](l)}let a={};return o[0]!==void 0&&(a.settingsOpen=o[0]),e=new ct({props:a}),Z.push(()=>oe(e,"settingsOpen",n)),{c(){w(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,i){S(e,l,i),t=!0},p(l,i){const s={};!r&&i&1&&(r=!0,s.settingsOpen=l[0],ie(()=>r=!1)),e.$set(s)},i(l){t||(d(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){T(e,l)}}}function ht(o){let e,r;return e=new ze({}),e.$on("click",o[3]),e.$on("submit",o[4]),{c(){w(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){S(e,t,n),r=!0},p:G,i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){T(e,t)}}}function bt(o){let e,r;return e=new We({}),{c(){w(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,n){S(e,t,n),r=!0},p:G,i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){T(e,t)}}}function gt(o){let e,r,t,n={ctx:o,current:null,token:null,hasCatch:!0,pending:bt,then:ft,catch:it,blocks:[,,,]};return Ee(o[2](),n),{c(){e=K(),r=A(),n.block.c(),this.h()},l(a){Ie('[data-svelte="svelte-1jsep15"]',document.head).forEach(b),e=W(a),r=A(),n.block.l(a),this.h()},h(){document.title="SWEAT Tabata"},m(a,l){y(a,e,l),y(a,r,l),n.block.m(a,n.anchor=l),n.mount=()=>r.parentNode,n.anchor=r,t=!0},p(a,[l]){o=a,Pe(n,o,l)},i(a){t||(d(n.block),t=!0)},o(a){for(let l=0;l<3;l+=1){const i=n.blocks[l];h(i)}t=!1},d(a){a&&b(e),a&&b(r),n.block.d(a),n.token=null,n=null}}}function $t(o,e,r){let t,n;j(o,I,p=>r(1,t=p)),j(o,Be,p=>r(7,n=p));const a=()=>new Promise(async p=>{let _="https://kalabaaz.pythonanywhere.com";_+=`/api/tabata/${n.url.searchParams.get("w")}.json`;try{const g=await fetch(_,{credentials:"include"});if(g.ok){const $=await g.json();p($)}}catch(g){console.error(g),p(null)}}),l=()=>new Promise(async(p,_)=>{if(n.url.searchParams.has("w")&&!s){const $=await a();if(s=!0,$)ue.setItem("workout",$),x.setItem("routine",[]);else{_();return}}const g=x.getItem("routine");if(g.length)I.set(g);else{const $=ue.getItem("workout");$&&I.setWorkout($)}p()});Q(()=>x.setItem("routine",t));let i,s;const c=()=>r(0,i=!i),u=()=>r(0,i=!i);function f(p){i=p,r(0,i)}return[i,t,l,c,u,f]}class Pt extends N{constructor(e){super();L(this,e,$t,gt,D,{})}}export{Pt as default};
