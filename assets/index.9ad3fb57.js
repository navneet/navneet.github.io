import{w as oe,r as xt,d as ge,g as ve,S as U,i as H,s as z,e as h,t as V,a as T,b as g,c as v,f as b,h as X,n as O,j as k,k as Ie,l as x,m as K,u as Ce,o as Le,p as Ne,q as w,v as E,x as Ae,y as Oe,z as ke,A as Pe,B as $e,C as Ve,D as Ee,E as we,F as I,G as C,H as L,I as Re,J as te,K as ne,L as le,M,N as me,O as en,P as it,Q as ze,R as pe,T as ot,U as at,V as Xe,W as tn,X as Me,Y as ae,Z as Be,_ as Ge,$ as ct,a0 as je,a1 as nn,a2 as ln}from"./vendor.cf980154.js";const sn=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};sn();const ut=(l={},e=window.sessionStorage)=>{const{subscribe:n,set:t,update:s}=oe(""),r=()=>l,i=_=>{l=_},c=()=>e,a=_=>{if(![window.sessionStorage,window.localStorage].includes(_))throw new Error("Illegal Engine "+_);e=_},o=(_,d)=>{m(_),d=JSON.stringify(d),e.setItem(_,d),t(_)},u=_=>{m(_);const d=e.getItem(_);return d!==null&&t(_),JSON.parse(d)},f=_=>{m(_),e.removeItem(_),s(d=>(_==d&&(d=""),d))},p=()=>{e.clear(),t("")},m=_=>{if(!Object.keys(l).includes(_))throw new Error("Illegal Key: "+_);return!0};return{subscribe:n,getEngine:c,setEngine:a,setItem:o,getItem:u,removeItem:f,clear:p,getAllowed:r,setAllowed:i,length:{get length(){return e.length}}}},Se=ut();Se.setAllowed({tabata_time:0,timer_time:0});Se.setEngine(window.sessionStorage);const se=ut();se.setAllowed({timer_settings:{prep_time:5,announce_every:30,use_voice:!0,show_plank:!0,preferred_voice:null},workout:{meta:{},exercises:[],planks:[]},prev_workouts:[{}]});se.setEngine(window.localStorage);se.isStemWorkout=l=>{if(!l)return!1;const e=se.getItem("workout");return!e||!e.meta?!1:e.meta.path_stem===l};se.getBackupStem=l=>{const e=se.getItem("prev_workouts");return!e||!e.length?null:e.reduce((n,t)=>t.meta.path_stem===l?t:n,null)};const _e=oe(!1),Qe=oe(!1),Je={BASE_URL:window.location.origin,NAVBAR_IMG_BASE_URL:"/css/navbar",STEM_BASE_URL:"/tmp/workouts",TMP_DIR:"/tmp",DB_FILE:"/data/workout_list.xml"},rn=()=>({saveWorkout:async n=>new Promise(()=>{let t=se.getItem("prev_workouts");(!t||t.length===0)&&(t=[]),t.unshift(n),t.length>3&&t.pop(),se.setItem("prev_workouts",t),Promise.resolve(!0)}),getWorkout:async n=>{let t=Je.STEM_BASE_URL+"/"+n+".json";return fetch(new Request(t)).then(async s=>{if(s.ok){const r=await s.json();r?Promise.resolve(r):Promise.reject(r)}else Promise.reject(s)})}}),ft=rn(),on=(l,e)=>new Promise(async(n,t)=>{e||(e={});const s=document.createElement("script");s.onload=i=>n(i),s.onerror=i=>t(i);for(let i in e)s.setAttribute(i,e);s.src=l;const r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(s,r)}),an=l=>{const e=new URLSearchParams;if(l&&l.lastIndexOf("?")!==-1){let n=l.split("?");n.length>1&&(n=n[1],n.split("&").forEach(s=>{const r=s.split("=");r.length==2&&e.append(r[0],r[1])}))}return e},mt=l=>{l=Math.abs(l);const e=Math.floor(l/60),n=l%60;return{m:e,s:n}},De=l=>{let{m:e,s:n}=mt(l);return e.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")},pt=l=>l.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()),cn=()=>(navigator.language||navigator.userLanguage).split("-")[0],un=(l=[],e=1)=>{if(l.length<e)return l;const n=[];for(let t=0;t<e;){const s=Math.floor(Math.random()*l.length);n.indexOf(l[s])===-1&&(n.push(l[s]),t++)}return n},fn=(l=6)=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let t=0;t<l;t++)n+=e.charAt(Math.floor(Math.random()*e.length));return n},Te={EXERCISE:1,PLANK:2},Ze=(l=null)=>{const e=Object.preventExtensions({name:"",display_name:"",type:1,region:"",target:"",has_lr:!1,band_pos:0,band_pos_text:""});return l?Object.assign(e,l):e},xe=l=>{let e=null;switch(l){case Te.PLANK:e="planks";break;case Te.EXERCISE:e="exercises";break}return e},Ke=xt(new Document,l=>{fetch(new Request(Je.DB_FILE)).then(async e=>{if(e.ok){const n=await e.text();if(n){const s=new DOMParser().parseFromString(n,"text/xml"),r=s.querySelector("parsererror");return r?Promise.reject(r):Promise.resolve(l(s))}else return Promise.reject(n)}else return Promise.reject(e)}).catch(e=>{console.error(e)})}),_t=ge(Ke,l=>{const e=[],n=l.querySelector("exercises");return n&&Array.from(n.children).forEach(t=>{e.push(Object.seal({id:t.tagName,title:pt(t.tagName.replace("_"," "))}))}),e},[]),mn=ge(Ke,l=>{const e=[],n=l.querySelector("selection_rules");return n&&Array.from(n.children).forEach(t=>{const s=Array.from(t.children).map(i=>[i.tagName,parseInt(i.getAttribute("select"))]),r={id:t.tagName,title:pt(t.tagName.replace("_"," ")),tabatas:parseInt(t.getAttribute("tabatas")),rest_time:parseInt(t.getAttribute("rest_time")),time_on:parseInt(t.getAttribute("time_on")),time_off:parseInt(t.getAttribute("time_off")),prep_time:parseInt(t.getAttribute("prep_time"))||10,with_equipment:null,has_plank:!0,path_stem:fn(),rules:Object.fromEntries(s)};e.push(Object.seal(r))}),e},[]),pn=ge(Ke,l=>{const e={},n=l.querySelector("band_legends");return n&&Array.from(n.children).forEach(t=>{e[t.getAttribute("id")]=t.getAttribute("title")}),e},{}),dt=()=>{const{subscribe:l,set:e,update:n}=oe({id:null,title:null,tabatas:3,prep_time:10,time_on:40,time_off:15,rest_time:60,with_equipment:!0,has_plank:!0,path_stem:null,rules:{}});return{subscribe:l,set:c=>("rules"in c&&_t.subscribe(o=>{if(o.length){const u=Object.fromEntries(o.map(f=>[f.id,0]));c.rules=Object.assign(u,c.rules)}})(),e(c)),update:n,updateRule:(c,a)=>{let o=!1;return n(u=>(a&&!isNaN(a)&&(u.rules[c]=a),o=!0,u)),o},clone:()=>{let c=null;n(o=>(c=Object.fromEntries(Object.entries(o)),c.rules=Object.fromEntries(Object.entries(o.rules)),o));const a=dt();return a.set(c),a},getTotalTime:(c=0)=>{let a=0;return n(o=>((!c||isNaN(c))&&(c=Object.entries(o.rules).reduce((u,f)=>u+(isNaN(f[1])?0:f[1]),0)),a+=o.prep_time,a+=o.time_on*c*o.tabatas,a+=o.time_off*(c-1)*o.tabatas,a+=o.rest_time*(o.tabatas-1),o)),isNaN(a)?0:a}}},_n=()=>{const{subscribe:l,set:e,update:n}=oe({meta:null,exercises:[],planks:[]}),t=()=>{const u={},f=ve(be),p=ve(Ke),m=ve(Fe),_=ve(Ye);u.meta={tabatas:f.tabatas,prep_time:f.prep_time,time_on:f.time_on,time_off:f.time_off,rest_time:f.rest_time,with_equipment:_,has_plank:m,path_stem:f.path_stem,rules:f.rules},u.exercises=[];for(let d in f.rules){if(!parseInt(f.rules[d]))continue;const S=p.querySelector("exercises > "+d).children;u.exercises=u.exercises.concat(a(S,f.rules[d],!1))}if(_){const d=Math.random()>.5?1:-1;u.exercises=u.exercises.sort((S,A)=>(S.band_pos-A.band_pos)*d)}if(u.planks=[],m){const d=p.querySelector("planks");d&&(u.planks=a(d.children,parseInt(d.getAttribute("select")),!0))}n(()=>u)},s=()=>(n(u=>(ft.saveWorkout(u),se.setItem("workout",u),u)),!0),r=(u=-1,f=Te.EXERCISE,p="replace")=>{let m=!1;const _=ve(be);n(d=>{const S=xe(f),A=d[S][u];switch(p){case"delete":o(u,d[S]),d[S]=d[S],f!==Te.PLANK&&(_.rules[A.region]-=1,m=!0);break;case"replace":const $=c(u,d[S],f);$.length&&o(u,d[S],$);break}return d}),m&&be.set(_)},i=(u=-1,f=-1,p=Te.EXERCISE)=>{u<0||n(m=>{const _=xe(p),d=m[_].length;f==-1?f=d-1:f==d&&(f=0);const S=m[_].splice(f,1,m[_][u]);return m[_].splice(u,1,...S),m})},c=(u,f,p)=>{const m=f[u];if(!m)return[];const _=f.filter($=>$.region===m.region).map($=>$.name),d=ve(Ke);let S=xe(p);S=="exercises"&&(S+=" > "+m.region);let A=d.querySelector(S);if(A){const $=Array.from(A.children).filter(P=>!_.includes(P.getAttribute("name")));return a($,1,p==Te.PLANK)}return[]},a=(u,f,p)=>{const m=ve(pn),_=ve(Ye);let d=u instanceof Array?u:Array.from(u);_===!1&&(d=d.filter(A=>parseInt(A.getAttribute("band_pos"))==0)),d.length>f&&(d=un(d,f));let S=[];for(let A in d){const $=Boolean(parseInt(d[A].getAttribute("has_lr"))),P=d[A].getAttribute("name");let y=Ze();y.type=p?2:1,y.name=P,y.display_name=P+($?" (Left)":""),y.region=d[A].parentElement.tagName,y.target=d[A].getAttribute("target"),y.has_lr=$,y.band_pos=parseInt(d[A].getAttribute("band_pos")),y.band_pos_text=m[d[A].getAttribute("band_pos")],$&&(S.push(y),y=Object.assign(Ze(),y),y.display_name=P+" (Right)"),S.push(y)}return S},o=(u=-1,f=[],p=[])=>{const m=f[u],_=m.has_lr===!0?f.findIndex(d=>d.name==m.name&&d!==m):-1;_>-1&&(f.splice(_,1),u=f.indexOf(m)),p.length?f.splice(u,1,...p):f.splice(u,1)};return{subscribe:l,set:e,update:n,generate:t,alterExercise:r,swapExercise:i,save:s}},be=dt(),Ye=oe(!0),Fe=oe(!0),ce=_n(),gt=()=>{const{subscribe:l,set:e,update:n}=oe(0);let t=null;const s=()=>{o()||(t=setInterval(()=>{n(f=>f+1)},1e3))},r=()=>{o()&&(clearInterval(t),t=null)},i=()=>{n(f=>f*0)},c=f=>mt(f),a=f=>De(f),o=()=>t!==null;return{subscribe:l,start:s,stop:r,reset:i,set:(f=0)=>{e(isNaN(f)?0:f)},minSecs:c,asClock:a,isTicking:o}},dn=()=>{let l={},e=null;const n=Object.preventExtensions({autoplay:0,cc_lang_pref:cn(),cc_load_policy:0,color:"red",controls:1,disablekb:0,enablejsapi:1,fs:1,hl:navigator.language||navigator.userLanguage,iv_load_policy:3,loop:0,modestbranding:1,origin:window.location.origin,widget_referrer:window.location.href,playsinline:!0}),t=Object.preventExtensions({READY:"onReady",STATE_CHANGE:"onStateChange",PLAYBACK_QUALITY_CHANGE:"onPlaybackQualityChange",PLAYBACK_RATE_CHANGE:"onPlaybackRateChange",APICHANGE:"onApiChange",ERROR:"onError"}),s=new Promise(async u=>{typeof l.addEventListener=="function"?u(l):(window.onYouTubeIframeAPIReady=()=>{l=new window.YT.Player(document.createElement("div"),{playerVars:n}),u(l)},on("https://www.youtube.com/iframe_api"))});return{loader:s,mount:u=>{s.then(f=>{typeof u=="string"&&(u=document.getElementById(u.toString())),u.parentElement.replaceChild(f.getIframe(),u)})},destroy:()=>{typeof l.addEventListener=="function"&&(l.destroy(),l={})},addEventListener:(u,f)=>{if(!Object.values(t).includes(u))throw new TypeError(u+" is not a valid player event");s.then(p=>{p.addEventListener(u,f)})},removeEventListener:(u,f)=>{if(typeof l.removeEventListener=="function"){if(!Object.values(t).includes(u))throw new TypeError(u+" is not a valid player event");l.removeEventListener(u,f)}},fadeVolumeTo:async(u=0)=>new Promise(f=>{if(typeof l.addEventListener=="function")if(isNaN(u)&&(u=0),l.getPlayerState()==window.YT.PlayerState.PLAYING){let p=5;const m=l.getVolume();m==u&&f(m),u<m&&(p*=-1),isNaN(e)||clearInterval(e),e=setInterval(()=>{const _=l.getVolume();p>0&&_>=u||p<0&&_<=u?(clearInterval(e),e=null,l.setVolume(u),f(_)):l.setVolume(_+p)},60)}else l.setVolume(u),f(u);else f(0)}),setSize:(u="100%",f="100%")=>l.setSize(u,f),playVideo:()=>l.playVideo(),pauseVideo:()=>l.pauseVideo(),stopVideo:()=>l.stopVideo(),seekTo:(u=0,f=!0)=>l.seekTo(u,f),getPlayerState:()=>l.getPlayerState(),getDuration:()=>l.getDuration(),getVideoUrl:()=>l.getVideoUrl(),getPlaylist:()=>l.getPlaylist(),getPlaylistIndex:()=>l.getPlaylistIndex(),getCurrentTime:()=>l.getCurrentTime(),getVideoStartBytes:()=>l.getVideoStartBytes(),getVideoBytesLoaded:()=>l.getVideoBytesLoaded(),getVideoBytesTotal:()=>l.getVideoBytesTotal(),nextVideo:()=>l.nextVideo(),previousVideo:()=>l.previousVideo(),playVideoAt:u=>l.playVideoAt(u),mute:()=>l.mute(),unmute:()=>l.unmute(),isMuted:()=>l.isMuted(),getVolume:()=>l.getVolume(),setVolume:(u=100)=>l.setVolume(u),getSphericalProperties:()=>l.getSphericalProperties(),setSphericalProperties:u=>l.setSphericalProperties(u),getPlaybackRate:()=>l.getPlaybackRate(),setPlaybackRate:(u=1)=>l.setPlaybackRate(u),getAvailablePlaybackRates:()=>l.getAvailablePlaybackRates(),setLoop:(u=!1)=>l.setLoop(u),setShuffle:(u=!1)=>l.setShuffle(u),getVideoLoadedFraction:()=>l.getVideoLoadedFraction(),getIframe:()=>l.getIframe(),get playerVars(){return n},set playerVars(u){if(typeof l.addEventListener=="function")throw new Error("PlayerVars cannot be set after the player has loaded");Object.entries(u).forEach(([f,p])=>n[f]=p)},READY:t.READY,STATE_CHANGE:t.STATE_CHANGE,PLAYBACK_QUALITY_CHANGE:t.PLAYBACK_QUALITY_CHANGE,PLAYBACK_RATE_CHANGE:t.PLAYBACK_RATE_CHANGE,APICHANGE:t.APICHANGE,ERROR:t.ERROR}},he=dn(),gn=()=>{let l=null,e=!1,n=!1;const t=()=>"speechSynthesis"in window,s=(f=null)=>new Promise(async(p,m)=>{if(t()){const _=window.speechSynthesis,d=()=>{_.removeEventListener("voiceschanged",d),p(S(_.getVoices(),f))},S=($,P)=>P?$.filter(y=>y.lang.replace("_","-").substring(0,P.length)===P):$,A=_.getVoices();A.length?p(S(A,f)):_.addEventListener("voiceschanged",d)}else m(new Error("Speech not supported on this platform."))}),r=()=>{!n&&t()&&(i("ready"),n=!0)},i=f=>{const p=c(f);p&&window.speechSynthesis.speak(p)},c=f=>{if(t()){const p=new SpeechSynthesisUtterance;return p.text=f,p.volume=1,p.rate=1,p.pitch=1,l&&(p.voice=l,p.lang=l.lang),e&&(p.onstart=a,p.onresume=a,p.onend=o,p.onpause=o),p}},a=()=>{he.fadeVolumeTo(10)},o=()=>{he.fadeVolumeTo(100)},u=f=>{s().then(async p=>{f&&(l=p.reduce((m,_)=>"name"in _&&_.name===f?_:m,null))})};return{speak:i,getVoices:s,isSupported:t,activateOnClick:r,get defaultVoice(){return l},set defaultVoice(f){u(f)},get controlYTPlayer(){return e},set controlYTPlayer(f){e=f}}},ee=gn();function bn(l){let e,n,t,s,r,i;return{c(){e=h("div"),n=h("span"),t=V(l[0]),s=T(),r=h("span"),i=V(l[1]),g(n,"class","label"),g(r,"class","value"),g(e,"class","timer-counter")},m(c,a){v(c,e,a),b(e,n),b(n,t),b(e,s),b(e,r),b(r,i)},p(c,[a]){a&1&&X(t,c[0]),a&2&&X(i,c[1])},i:O,o:O,d(c){c&&k(e)}}}function hn(l,e,n){let{label:t=""}=e,{value:s=""}=e;return l.$$set=r=>{"label"in r&&n(0,t=r.label),"value"in r&&n(1,s=r.value)},[t,s]}class qe extends U{constructor(e){super();H(this,e,hn,bn,z,{label:0,value:1})}}function vn(l){let e,n,t,s;const r=l[3].default,i=Ie(r,l,l[2],null);return{c(){e=h("button"),i&&i.c(),g(e,"class","round-button svelte-1ylr70"),x(e,"active",l[0])},m(c,a){v(c,e,a),i&&i.m(e,null),n=!0,t||(s=K(e,"click",l[1]),t=!0)},p(c,[a]){i&&i.p&&(!n||a&4)&&Ce(i,r,c,c[2],n?Ne(r,c[2],a,null):Le(c[2]),null),a&1&&x(e,"active",c[0])},i(c){n||(w(i,c),n=!0)},o(c){E(i,c),n=!1},d(c){c&&k(e),i&&i.d(c),t=!1,s()}}}function kn(l,e,n){let{$$slots:t={},$$scope:s}=e;const r=Ae(),i=o=>{c(),r("click",{active:a,toggle:c,currentTarget:o.currentTarget})},c=()=>{n(0,a=!a)};let{active:a=!1}=e;return l.$$set=o=>{"active"in o&&n(0,a=o.active),"$$scope"in o&&n(2,s=o.$$scope)},[a,i,s,t]}class bt extends U{constructor(e){super();H(this,e,kn,vn,z,{active:0})}}function $n(l){let e,n,t,s,r,i=[{disabled:l[2]},{type:"button"},{class:"round-button icon-button"},l[4]],c={};for(let a=0;a<i.length;a+=1)c=Oe(c,i[a]);return{c(){e=h("button"),n=h("img"),ke(n.src,t=l[0])||g(n,"src",t),g(n,"alt",l[1]),Pe(n,"min-width",l[3]),Pe(n,"min-height",l[3]),$e(e,c)},m(a,o){v(a,e,o),b(e,n),e.autofocus&&e.focus(),s||(r=[K(e,"click",l[5]),K(e,"dblclick",l[6]),K(e,"mouseenter",l[7]),K(e,"mouseleave",l[8])],s=!0)},p(a,[o]){o&1&&!ke(n.src,t=a[0])&&g(n,"src",t),o&2&&g(n,"alt",a[1]),o&8&&Pe(n,"min-width",a[3]),o&8&&Pe(n,"min-height",a[3]),$e(e,c=Ve(i,[o&4&&{disabled:a[2]},{type:"button"},{class:"round-button icon-button"},o&16&&a[4]]))},i:O,o:O,d(a){a&&k(e),s=!1,Ee(r)}}}function wn(l,e,n){let{src:t}=e,{alt:s=""}=e,{disabled:r=!1}=e,{min_dim:i="24px"}=e,{data:c={}}=e;function a(p){we.call(this,l,p)}function o(p){we.call(this,l,p)}function u(p){we.call(this,l,p)}function f(p){we.call(this,l,p)}return l.$$set=p=>{"src"in p&&n(0,t=p.src),"alt"in p&&n(1,s=p.alt),"disabled"in p&&n(2,r=p.disabled),"min_dim"in p&&n(3,i=p.min_dim),"data"in p&&n(4,c=p.data)},[t,s,r,i,c,a,o,u,f]}class ue extends U{constructor(e){super();H(this,e,wn,$n,z,{src:0,alt:1,disabled:2,min_dim:3,data:4})}}function yn(l){let e,n,t,s,r;return n=new ue({props:{src:"/css/icons/reset.svg",alt:"Reset"}}),n.$on("click",l[2]),s=new ue({props:{src:"/css/icons/gear-fill.svg",alt:"Timer Settings"}}),s.$on("click",l[1]),{c(){e=h("div"),I(n.$$.fragment),t=T(),I(s.$$.fragment),g(e,"class","svelte-k909ad")},m(i,c){v(i,e,c),C(n,e,null),b(e,t),C(s,e,null),r=!0},p:O,i(i){r||(w(n.$$.fragment,i),w(s.$$.fragment,i),r=!0)},o(i){E(n.$$.fragment,i),E(s.$$.fragment,i),r=!1},d(i){i&&k(e),L(n),L(s)}}}function En(l){const e=Ae();return[e,()=>{_e.set(!0),e("open")},()=>e("reset")]}class et extends U{constructor(e){super();H(this,e,En,yn,z,{})}}const Sn=()=>{const{subscribe:l,set:e}=oe({}),n="timer_settings",t={prep_time:5,announce_every:30,use_voice:!0,show_plank:!0,preferred_voice:null},s=i=>{se.setItem(n,i),e(i)},r=se.getItem(n);return e(Object.preventExtensions(r||t)),{subscribe:l,set:s}};var fe=Sn();function Tn(l){let e,n,t,s,r,i;return{c(){e=h("div"),n=h("input"),t=T(),s=h("span"),g(n,"type","checkbox"),g(n,"name",l[1]),g(n,"id",l[1]),g(s,"class","slider round"),g(e,"class","switch")},m(c,a){v(c,e,a),b(e,n),n.checked=l[0],b(e,t),b(e,s),r||(i=[K(n,"change",l[3]),K(n,"change",l[2]),K(s,"click",l[4])],r=!0)},p(c,[a]){a&2&&g(n,"name",c[1]),a&2&&g(n,"id",c[1]),a&1&&(n.checked=c[0])},i:O,o:O,d(c){c&&k(e),r=!1,Ee(i)}}}function An(l,e,n){const t=Ae(),s=o=>{t("change",o.currentTarget.checked)};let{name:r=void 0}=e,{checked:i=!1}=e;function c(){i=this.checked,n(0,i)}const a=()=>{n(0,i=!i)};return l.$$set=o=>{"name"in o&&n(1,r=o.name),"checked"in o&&n(0,i=o.checked)},[i,r,s,c,a]}class ht extends U{constructor(e){super();H(this,e,An,Tn,z,{name:1,checked:0})}}function Pn(l){let e,n,t,s,r,i,c;t=new ue({props:{src:"/css/icons/cross.svg",alt:"Close Settings",min_dim:".9rem"}}),t.$on("click",l[4]);const a=l[2].default,o=Ie(a,l,l[1],null);return{c(){e=h("form"),n=h("div"),I(t.$$.fragment),s=T(),o&&o.c(),g(n,"class","close-button"),g(e,"class","settings-form")},m(u,f){v(u,e,f),b(e,n),C(t,n,null),b(e,s),o&&o.m(e,null),r=!0,i||(c=K(e,"submit",Re(l[3])),i=!0)},p(u,[f]){o&&o.p&&(!r||f&2)&&Ce(o,a,u,u[1],r?Ne(a,u[1],f,null):Le(u[1]),null)},i(u){r||(w(t.$$.fragment,u),w(o,u),r=!0)},o(u){E(t.$$.fragment,u),E(o,u),r=!1},d(u){u&&k(e),L(t),o&&o.d(u),i=!1,c()}}}function Rn(l,e,n){let{$$slots:t={},$$scope:s}=e;const r=Ae();function i(a){we.call(this,l,a)}const c=a=>r("close",a);return l.$$set=a=>{"$$scope"in a&&n(1,s=a.$$scope)},[r,s,t,i,c]}class tt extends U{constructor(e){super();H(this,e,Rn,Pn,z,{})}}function In(l){let e;return{c(){e=h("div"),e.innerHTML=`<div class="double-bounce1"></div> 
            <div class="double-bounce2"></div>`,g(e,"class","spinner")},m(n,t){v(n,e,t)},d(n){n&&k(e)}}}function Cn(l){let e,n,t,s,r;const i=l[2].default,c=Ie(i,l,l[1],null),a=c||In();return{c(){e=h("fieldset"),n=h("legend"),t=V(l[0]),s=T(),a&&a.c()},m(o,u){v(o,e,u),b(e,n),b(n,t),b(e,s),a&&a.m(e,null),r=!0},p(o,[u]){(!r||u&1)&&X(t,o[0]),c&&c.p&&(!r||u&2)&&Ce(c,i,o,o[1],r?Ne(i,o[1],u,null):Le(o[1]),null)},i(o){r||(w(a,o),r=!0)},o(o){E(a,o),r=!1},d(o){o&&k(e),a&&a.d(o)}}}function Ln(l,e,n){let{$$slots:t={},$$scope:s}=e,{title:r=null}=e;return l.$$set=i=>{"title"in i&&n(0,r=i.title),"$$scope"in i&&n(1,s=i.$$scope)},[r,s,t]}class Ue extends U{constructor(e){super();H(this,e,Ln,Cn,z,{title:0})}}function vt(l,e,n){const t=l.slice();return t[11]=e[n],t}function kt(l){let e,n;return e=new tt({props:{$$slots:{default:[Dn]},$$scope:{ctx:l}}}),e.$on("close",l[2]),{c(){I(e.$$.fragment)},m(t,s){C(e,t,s),n=!0},p(t,s){const r={};s&32771&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Nn(l){let e,n,t,s,r,i,c,a;function o(p){l[8](p)}let u={name:"use_voice"};l[1].use_voice!==void 0&&(u.checked=l[1].use_voice),s=new ht({props:u}),ot.push(()=>at(s,"checked",o));let f=l[1].use_voice&&$t(l);return{c(){e=h("li"),n=h("label"),n.textContent="Use Voice?",t=T(),I(s.$$.fragment),i=T(),f&&f.c(),c=te(),g(n,"for","use_voice")},m(p,m){v(p,e,m),b(e,n),b(e,t),C(s,e,null),v(p,i,m),f&&f.m(p,m),v(p,c,m),a=!0},p(p,m){const _={};!r&&m&2&&(r=!0,_.checked=p[1].use_voice,it(()=>r=!1)),s.$set(_),p[1].use_voice?f?f.p(p,m):(f=$t(p),f.c(),f.m(c.parentNode,c)):f&&(f.d(1),f=null)},i(p){a||(w(s.$$.fragment,p),a=!0)},o(p){E(s.$$.fragment,p),a=!1},d(p){p&&k(e),L(s),p&&k(i),f&&f.d(p),p&&k(c)}}}function $t(l){let e,n={ctx:l,current:null,token:null,hasCatch:!0,pending:Bn,then:Vn,catch:On,value:10,error:14};return Xe(ee.getVoices("en"),n),{c(){e=h("li"),n.block.c()},m(t,s){v(t,e,s),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(t,s){l=t,ze(n,l,s)},d(t){t&&k(e),n.block.d(),n.token=null,n=null}}}function On(l){let e,n=l[14]+"",t;return{c(){e=h("p"),t=V(n)},m(s,r){v(s,e,r),b(e,t)},p:O,d(s){s&&k(e)}}}function Vn(l){let e,n,t,s,r,i=l[10],c=[];for(let a=0;a<i.length;a+=1)c[a]=wt(vt(l,i,a));return{c(){e=h("label"),e.textContent="Preferred Voice",n=T(),t=h("select");for(let a=0;a<c.length;a+=1)c[a].c();g(e,"for","preferred_voice"),g(t,"name","preferred_voice"),g(t,"id","preferred_voice"),l[1].preferred_voice===void 0&&tn(()=>l[9].call(t))},m(a,o){v(a,e,o),v(a,n,o),v(a,t,o);for(let u=0;u<c.length;u+=1)c[u].m(t,null);Me(t,l[1].preferred_voice),s||(r=K(t,"change",l[9]),s=!0)},p(a,o){if(o&0){i=a[10];let u;for(u=0;u<i.length;u+=1){const f=vt(a,i,u);c[u]?c[u].p(f,o):(c[u]=wt(f),c[u].c(),c[u].m(t,null))}for(;u<c.length;u+=1)c[u].d(1);c.length=i.length}o&2&&Me(t,a[1].preferred_voice)},d(a){a&&k(e),a&&k(n),a&&k(t),ae(c,a),s=!1,r()}}}function wt(l){let e,n=l[11].name+"",t,s;return{c(){e=h("option"),t=V(n),e.__value=s=l[11].name,e.value=e.__value},m(r,i){v(r,e,i),b(e,t)},p:O,d(r){r&&k(e)}}}function Bn(l){let e;return{c(){e=h("p"),e.textContent="Loading"},m(n,t){v(n,e,t)},p:O,d(n){n&&k(e)}}}function jn(l){let e,n,t,s,r,i,c,a,o,u,f,p,m,_,d,S,A,$,P,y,N,B,Z,F,q,re,j=ee.isSupported(),Q,R,Y,W=j&&Nn(l);return{c(){e=h("ul"),n=h("li"),t=h("label"),t.textContent="Rounds",s=T(),r=h("input"),i=T(),c=h("li"),a=h("label"),a.textContent="Prep Time (seconds)",o=T(),u=h("input"),f=T(),p=h("li"),m=h("label"),m.textContent="Per Exercise (seconds)",_=T(),d=h("input"),S=T(),A=h("li"),$=h("label"),$.textContent="Rest Time (seconds)",P=T(),y=h("input"),N=T(),B=h("li"),Z=h("label"),Z.textContent="Break Time (seconds)",F=T(),q=h("input"),re=T(),W&&W.c(),g(t,"for","tabatas"),g(r,"type","number"),g(r,"name","tabatas"),g(r,"id","tabatas"),g(r,"min","1"),g(r,"max","5"),g(a,"for","prep_time"),g(u,"type","number"),g(u,"name","prep_time"),g(u,"id","prep_time"),g(u,"min","0"),g(u,"max","240"),g(m,"for","time_on"),g(d,"type","number"),g(d,"name","time_on"),g(d,"id","time_on"),g(d,"min","10"),g(d,"max","120"),g($,"for","time_off"),g(y,"type","number"),g(y,"name","time_off"),g(y,"id","time_off"),g(y,"min","0"),g(y,"max","120"),g(Z,"for","rest_time"),g(q,"type","number"),g(q,"name","rest_time"),g(q,"id","rest_time"),g(q,"min","0"),g(q,"max","240")},m(D,ie){v(D,e,ie),b(e,n),b(n,t),b(n,s),b(n,r),pe(r,l[0].meta.tabatas),b(e,i),b(e,c),b(c,a),b(c,o),b(c,u),pe(u,l[0].meta.prep_time),b(e,f),b(e,p),b(p,m),b(p,_),b(p,d),pe(d,l[0].meta.time_on),b(e,S),b(e,A),b(A,$),b(A,P),b(A,y),pe(y,l[0].meta.time_off),b(e,N),b(e,B),b(B,Z),b(B,F),b(B,q),pe(q,l[0].meta.rest_time),b(e,re),W&&W.m(e,null),Q=!0,R||(Y=[K(r,"input",l[3]),K(u,"input",l[4]),K(d,"input",l[5]),K(y,"input",l[6]),K(q,"input",l[7])],R=!0)},p(D,ie){ie&1&&me(r.value)!==D[0].meta.tabatas&&pe(r,D[0].meta.tabatas),ie&1&&me(u.value)!==D[0].meta.prep_time&&pe(u,D[0].meta.prep_time),ie&1&&me(d.value)!==D[0].meta.time_on&&pe(d,D[0].meta.time_on),ie&1&&me(y.value)!==D[0].meta.time_off&&pe(y,D[0].meta.time_off),ie&1&&me(q.value)!==D[0].meta.rest_time&&pe(q,D[0].meta.rest_time),j&&W.p(D,ie)},i(D){Q||(w(W),Q=!0)},o(D){E(W),Q=!1},d(D){D&&k(e),W&&W.d(),R=!1,Ee(Y)}}}function Dn(l){let e,n;return e=new Ue({props:{title:"Tabata Settings",$$slots:{default:[jn]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment)},m(t,s){C(e,t,s),n=!0},p(t,s){const r={};s&32771&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Kn(l){let e,n,t="meta"in l[0]&&kt(l);return{c(){t&&t.c(),e=te()},m(s,r){t&&t.m(s,r),v(s,e,r),n=!0},p(s,[r]){"meta"in s[0]?t?(t.p(s,r),r&1&&w(t,1)):(t=kt(s),t.c(),w(t,1),t.m(e.parentNode,e)):t&&(ne(),E(t,1,1,()=>{t=null}),le())},i(s){n||(w(t),n=!0)},o(s){E(t),n=!1},d(s){t&&t.d(s),s&&k(e)}}}function qn(l,e,n){let t,s;M(l,de,m=>n(0,t=m)),M(l,fe,m=>n(1,s=m));const r=()=>{_e.set(!1)};function i(){t.meta.tabatas=me(this.value),de.set(t)}function c(){t.meta.prep_time=me(this.value),de.set(t)}function a(){t.meta.time_on=me(this.value),de.set(t)}function o(){t.meta.time_off=me(this.value),de.set(t)}function u(){t.meta.rest_time=me(this.value),de.set(t)}function f(m){l.$$.not_equal(s.use_voice,m)&&(s.use_voice=m,fe.set(s))}function p(){s.preferred_voice=en(this),fe.set(s)}return[t,s,r,i,c,a,o,u,f,p]}class Wn extends U{constructor(e){super();H(this,e,qn,Kn,z,{})}}function yt(l,e,n){const t=l.slice();return t[28]=e[n],t}function Mn(l){let e,n;return{c(){e=h("img"),ke(e.src,n="/css/icons/power-outline.svg")||g(e,"src",n),g(e,"alt","Start!"),g(e,"class","loading svelte-1bidnc5")},m(t,s){v(t,e,s)},p:O,d(t){t&&k(e)}}}function Gn(l){let e;return{c(){e=V(l[9])},m(n,t){v(n,e,t)},p(n,t){t[0]&512&&X(e,n[9])},d(n){n&&k(e)}}}function Yn(l){let e,n;return{c(){e=h("img"),ke(e.src,n="/css/icons/check-circle.svg")||g(e,"src",n),g(e,"alt","Done!"),g(e,"class","loading svelte-1bidnc5")},m(t,s){v(t,e,s)},p:O,d(t){t&&k(e)}}}function Fn(l){let e,n;function t(i,c){return e==null&&(e=!!ye.isComplete()),e?Yn:i[5]>0?Gn:Mn}let s=t(l),r=s(l);return{c(){r.c(),n=te()},m(i,c){r.m(i,c),v(i,n,c)},p(i,c){s===(s=t(i))&&r?r.p(i,c):(r.d(1),r=s(i),r&&(r.c(),r.m(n.parentNode,n)))},d(i){r.d(i),i&&k(n)}}}function Un(l){let e,n,t,s;e=new et({}),e.$on("reset",l[12]),e.$on("open",l[11]);function r(a,o){return a[10]?Xn:zn}let i=r(l),c=i(l);return{c(){I(e.$$.fragment),n=T(),c.c(),t=te()},m(a,o){C(e,a,o),v(a,n,o),c.m(a,o),v(a,t,o),s=!0},p(a,o){i===(i=r(a))&&c?c.p(a,o):(c.d(1),c=i(a),c&&(c.c(),c.m(t.parentNode,t)))},i(a){s||(w(e.$$.fragment,a),s=!0)},o(a){E(e.$$.fragment,a),s=!1},d(a){L(e,a),a&&k(n),c.d(a),a&&k(t)}}}function Hn(l){let e,n;return e=new Wn({}),{c(){I(e.$$.fragment)},m(t,s){C(e,t,s),n=!0},p:O,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function zn(l){let e,n,t,s,r,i;return{c(){e=h("div"),n=h("button"),n.textContent="Create New()",t=T(),s=h("button"),s.textContent="Get Random()",g(n,"class","default-button"),g(s,"class","default-button"),g(e,"class","button-row svelte-1bidnc5")},m(c,a){v(c,e,a),b(e,n),b(e,t),b(e,s),r||(i=[K(n,"click",l[16]),K(s,"click",l[17])],r=!0)},p:O,d(c){c&&k(e),r=!1,Ee(i)}}}function Xn(l){let e;function n(r,i){return r[0].length?Jn:Qn}let t=n(l),s=t(l);return{c(){s.c(),e=te()},m(r,i){s.m(r,i),v(r,e,i)},p(r,i){t===(t=n(r))&&s?s.p(r,i):(s.d(1),s=t(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){s.d(r),r&&k(e)}}}function Qn(l){let e;return{c(){e=h("div"),e.innerHTML=`<div class="spinner"><div class="double-bounce1"></div> 
                <div class="double-bounce2"></div></div>`,g(e,"class","loading-container svelte-1bidnc5")},m(n,t){v(n,e,t)},p:O,d(n){n&&k(e)}}}function Jn(l){let e,n,t=l[0],s=[];for(let r=0;r<t.length;r+=1)s[r]=Et(yt(l,t,r));return{c(){e=h("div"),n=h("ol");for(let r=0;r<s.length;r+=1)s[r].c();g(n,"id","routine_scroll"),g(e,"class","scroll-row")},m(r,i){v(r,e,i),b(e,n);for(let c=0;c<s.length;c+=1)s[c].m(n,null)},p(r,i){if(i[0]&1){t=r[0];let c;for(c=0;c<t.length;c+=1){const a=yt(r,t,c);s[c]?s[c].p(a,i):(s[c]=Et(a),s[c].c(),s[c].m(n,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=t.length}},d(r){r&&k(e),ae(s,r)}}}function Zn(l){let e,n,t;return{c(){e=h("img"),ke(e.src,n="/css/icons/meditation.png")||g(e,"src",n),g(e,"alt",t=l[28].name)},m(s,r){v(s,e,r)},p(s,r){r[0]&1&&t!==(t=s[28].name)&&g(e,"alt",t)},d(s){s&&k(e)}}}function xn(l){let e,n,t;return{c(){e=h("img"),ke(e.src,n="/css/icons/panda.png")||g(e,"src",n),g(e,"alt",t=l[28].name)},m(s,r){v(s,e,r)},p(s,r){r[0]&1&&t!==(t=s[28].name)&&g(e,"alt",t)},d(s){s&&k(e)}}}function el(l){let e,n,t;return{c(){e=h("img"),ke(e.src,n="/css/icons/prepare.png")||g(e,"src",n),g(e,"alt",t=l[28].name)},m(s,r){v(s,e,r)},p(s,r){r[0]&1&&t!==(t=s[28].name)&&g(e,"alt",t)},d(s){s&&k(e)}}}function tl(l){let e,n=l[28].target+"",t,s,r,i,c=l[28].band_pos_text+"",a;return{c(){e=h("span"),t=V(n),s=T(),r=h("span"),i=V("Band: "),a=V(c)},m(o,u){v(o,e,u),b(e,t),v(o,s,u),v(o,r,u),b(r,i),b(r,a)},p(o,u){u[0]&1&&n!==(n=o[28].target+"")&&X(t,n),u[0]&1&&c!==(c=o[28].band_pos_text+"")&&X(a,c)},d(o){o&&k(e),o&&k(s),o&&k(r)}}}function Et(l){let e,n,t,s=(l[28].display_name||l[28].name)+"",r,i,c;function a(f,p){if(f[28].type===J.WORK)return tl;if(f[28].type===J.PREPARE)return el;if(f[28].type===J.REST)return xn;if(f[28].type===J.BREAK)return Zn}let o=a(l),u=o&&o(l);return{c(){e=h("li"),n=h("div"),t=h("h6"),r=V(s),i=T(),u&&u.c(),c=T(),g(n,"class","exercise-info"),x(n,"completed",l[28].completed)},m(f,p){v(f,e,p),b(e,n),b(n,t),b(t,r),b(n,i),u&&u.m(n,null),b(e,c)},p(f,p){p[0]&1&&s!==(s=(f[28].display_name||f[28].name)+"")&&X(r,s),o===(o=a(f))&&u?u.p(f,p):(u&&u.d(1),u=o&&o(f),u&&(u.c(),u.m(n,null))),p[0]&1&&x(n,"completed",f[28].completed)},d(f){f&&k(e),u&&u.d()}}}function nl(l){let e,n,t,s,r,i,c,a,o,u,f,p,m,_,d,S;t=new qe({props:{label:"Elapsed",value:l[14].asClock(l[5])}}),r=new qe({props:{label:"Remaining",value:l[14].asClock(l[4]-l[5])}}),c=new qe({props:{label:"Cycles",value:l[2].toString()+"/"+l[7].length.toString()}}),o=new qe({props:{label:"Tabatas",value:l[3].toString()+"/"+l[8].tabatas}}),f=new bt({props:{$$slots:{default:[Fn]},$$scope:{ctx:l}}}),f.$on("click",l[13]);const A=[Hn,Un],$=[];function P(y,N){return y[6]?0:1}return m=P(l),_=$[m]=A[m](l),{c(){e=h("div"),n=h("div"),I(t.$$.fragment),s=T(),I(r.$$.fragment),i=T(),I(c.$$.fragment),a=T(),I(o.$$.fragment),u=T(),I(f.$$.fragment),p=T(),_.c(),d=te(),g(n,"class","counters svelte-1bidnc5"),g(e,"class","clock-container svelte-1bidnc5")},m(y,N){v(y,e,N),b(e,n),C(t,n,null),b(n,s),C(r,n,null),b(n,i),C(c,n,null),b(n,a),C(o,n,null),b(e,u),C(f,e,null),v(y,p,N),$[m].m(y,N),v(y,d,N),S=!0},p(y,N){const B={};N[0]&32&&(B.value=y[14].asClock(y[5])),t.$set(B);const Z={};N[0]&48&&(Z.value=y[14].asClock(y[4]-y[5])),r.$set(Z);const F={};N[0]&132&&(F.value=y[2].toString()+"/"+y[7].length.toString()),c.$set(F);const q={};N[0]&264&&(q.value=y[3].toString()+"/"+y[8].tabatas),o.$set(q);const re={};N[0]&544|N[1]&1&&(re.$$scope={dirty:N,ctx:y}),f.$set(re);let j=m;m=P(y),m===j?$[m].p(y,N):(ne(),E($[j],1,1,()=>{$[j]=null}),le(),_=$[m],_?_.p(y,N):(_=$[m]=A[m](y),_.c()),w(_,1),_.m(d.parentNode,d))},i(y){S||(w(t.$$.fragment,y),w(r.$$.fragment,y),w(c.$$.fragment,y),w(o.$$.fragment,y),w(f.$$.fragment,y),w(_),S=!0)},o(y){E(t.$$.fragment,y),E(r.$$.fragment,y),E(c.$$.fragment,y),E(o.$$.fragment,y),E(f.$$.fragment,y),E(_),S=!1},d(y){y&&k(e),L(t),L(r),L(c),L(o),L(f),y&&k(p),$[m].d(y),y&&k(d)}}}function ll(l,e,n){let t,s,r,i,c,a,o,u,f;M(l,ye,R=>n(0,s=R)),M(l,fe,R=>n(21,i=R)),M(l,_e,R=>n(6,c=R)),M(l,ss,R=>n(7,a=R)),M(l,ls,R=>n(8,o=R)),M(l,st,R=>n(10,f=R)),_e.set(!1);const p=()=>{c||P(B)},m=()=>{n(1,G.background=null,G),window.speechSynthesis.pending&&window.speechSynthesis.cancel()},_=()=>{m(),ye.reset(),q.set(0)},d=R=>{ee.activateOnClick(),s.length&&!ye.isComplete()&&(isNaN(B)||B<0?R.detail.active&&R.detail.toggle():R.detail.active?q.start():q.stop())},S=(R,Y,W)=>{if(!i.use_voice||!ee.isSupported())return;!ee.defaultVoice&&i.preferred_voice&&(ee.defaultVoice=i.preferred_voice),ee.controlYTPlayer||(ee.controlYTPlayer=!0);let D="";if(W==0&&ye.isComplete())D+="Well Done. ";else if(Y==1)switch(R.type){case J.WORK:D+="Go. ";break;case J.REST:case J.BREAK:D+="Stop. ";break}else W<3?D+=(W+1).toString():Y==2&&[J.PREPARE,J.REST].includes(R.type)?(D+=R.type==J.PREPARE?"Prep, ":"Rest, ",D+=A(B+1)):W==15&&R.type==J.BREAK&&(D+="Get Ready, ",D+=A(B+1));D.length&&ee.speak(D)},A=R=>{let Y="";if(s.length&&s[R]){const W=s[R];W.type==J.WORK&&(Y+="Next Exercise, "+(W.display_name||W.name)+" ",W.band_pos>0&&(Y+="Band's Position, "+W.band_pos_text+":"))}return Y},$=R=>{const{node:Y,child:W}=y(R);Y&&Array.from(Y.children).forEach(D=>{D.classList.remove("highlight")}),!!W&&W.classList.add("highlight")},P=R=>{const{node:Y,child:W}=y(R);!W||Y.scroll({left:W.offsetWidth*R,behavior:"smooth"})},y=R=>{if(R<0)return{node:null,child:null};const Y=document.getElementById("routine_scroll");if(!Y)return{node:null,child:null};const W=Y.children[R];return W?{node:Y,child:W}:{node:Y,child:null}};Be(()=>{r>0&&s.length&&(B=s.findIndex(R=>R.completed===!1),P(B))}),Ge(()=>{m(),q.stop(),Se.setItem("tabata_time",r)});let N=0,B=-1,Z=0,F=0;const q=gt();M(l,q,R=>n(5,r=R)),q.set(parseInt(Se.getItem("tabata_time")));const re=ge(q,R=>{if(!s.length)return 0;if(B=s.findIndex(ie=>ie.completed===!1),N=s.reduce((ie,rt)=>ie+(rt.completed===!0?rt.duration:0),0),B<0){if(ye.isComplete()){const ie=s[s.length-1];S(ie,R-N,0),q.stop()}return 0}const Y=R-N,W=s[B],D=W.duration-Y;return q.isTicking()&&(n(2,Z=B>-1?s[B].cycle:0),n(3,F=B>-1?s[B].round:0),S(W,Y,D),n(1,G.background=es[W.type],G),D==0&&(P(B+1),$(B+1),ye.markItemComplete(B))),D+1},0);M(l,re,R=>n(9,u=R));const j=()=>G.goto("href","create"),Q=()=>G.goto("href","random");return l.$$.update=()=>{l.$$.dirty[0]&1&&n(4,t=s.reduce((R,Y)=>R+("duration"in Y?Y.duration:0),0))},[s,G,Z,F,t,r,c,a,o,u,f,p,_,d,q,re,j,Q]}class St extends U{constructor(e){super();H(this,e,ll,nl,z,{},null,[-1,-1])}}function sl(l){let e,n,t=[{id:n=l[0].name},l[0]],s={};for(let r=0;r<t.length;r+=1)s=Oe(s,t[r]);return{c(){e=h("input"),$e(e,s)},m(r,i){v(r,e,i),e.autofocus&&e.focus()},p(r,i){$e(e,s=Ve(t,[i&1&&n!==(n=r[0].name)&&{id:n},i&1&&r[0]]))},i:O,o:O,d(r){r&&k(e)}}}function rl(l){let e,n;return e=new ht({props:{checked:l[0].value,name:l[0].name}}),{c(){I(e.$$.fragment)},m(t,s){C(e,t,s),n=!0},p(t,s){const r={};s&1&&(r.checked=t[0].value),s&1&&(r.name=t[0].name),e.$set(r)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function il(l){let e,n,t;const s=l[2].default,r=Ie(s,l,l[1],null);let i=[{id:n=l[0].name},l[0]],c={};for(let a=0;a<i.length;a+=1)c=Oe(c,i[a]);return{c(){e=h("select"),r&&r.c(),$e(e,c)},m(a,o){v(a,e,o),r&&r.m(e,null),(c.multiple?ct:Me)(e,c.value),e.autofocus&&e.focus(),t=!0},p(a,o){r&&r.p&&(!t||o&2)&&Ce(r,s,a,a[1],t?Ne(s,a[1],o,null):Le(a[1]),null),$e(e,c=Ve(i,[(!t||o&1&&n!==(n=a[0].name))&&{id:n},o&1&&a[0]])),o&1&&"value"in c&&(c.multiple?ct:Me)(e,c.value)},i(a){t||(w(r,a),t=!0)},o(a){E(r,a),t=!1},d(a){a&&k(e),r&&r.d(a)}}}function ol(l){let e,n=l[0].title+"",t,s,r,i,c,a,o;const u=[il,rl,sl],f=[];function p(m,_){return m[0].type==="select"?0:m[0].type==="slider"?1:2}return i=p(l),c=f[i]=u[i](l),{c(){e=h("label"),t=V(n),r=T(),c.c(),a=te(),g(e,"for",s=l[0].name)},m(m,_){v(m,e,_),b(e,t),v(m,r,_),f[i].m(m,_),v(m,a,_),o=!0},p(m,[_]){(!o||_&1)&&n!==(n=m[0].title+"")&&X(t,n),(!o||_&1&&s!==(s=m[0].name))&&g(e,"for",s);let d=i;i=p(m),i===d?f[i].p(m,_):(ne(),E(f[d],1,1,()=>{f[d]=null}),le(),c=f[i],c?c.p(m,_):(c=f[i]=u[i](m),c.c()),w(c,1),c.m(a.parentNode,a))},i(m){o||(w(c),o=!0)},o(m){E(c),o=!1},d(m){m&&k(e),m&&k(r),f[i].d(m),m&&k(a)}}}function al(l,e,n){let{$$slots:t={},$$scope:s}=e,{props:r={}}=e;return l.$$set=i=>{"props"in i&&n(0,r=i.props),"$$scope"in i&&n(1,s=i.$$scope)},[r,s,t]}class We extends U{constructor(e){super();H(this,e,al,ol,z,{props:0})}}function Tt(l,e,n){const t=l.slice();return t[5]=e[n],t}function At(l){let e,n,t;return n=new We({props:{props:{name:"announce_every",title:"Announce Every (seconds)",value:l[0].announce_every,type:"number",min:0,max:3600}}}),{c(){e=h("li"),I(n.$$.fragment)},m(s,r){v(s,e,r),C(n,e,null),t=!0},p(s,r){const i={};r&1&&(i.props={name:"announce_every",title:"Announce Every (seconds)",value:s[0].announce_every,type:"number",min:0,max:3600}),n.$set(i)},i(s){t||(w(n.$$.fragment,s),t=!0)},o(s){E(n.$$.fragment,s),t=!1},d(s){s&&k(e),L(n)}}}function Pt(l){let e,n,t={ctx:l,current:null,token:null,hasCatch:!1,pending:pl,then:ul,catch:cl,value:4,blocks:[,,,]};return Xe(ee.getVoices(),t),{c(){e=h("li"),t.block.c()},m(s,r){v(s,e,r),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null,n=!0},p(s,r){l=s,ze(t,l,r)},i(s){n||(w(t.block),n=!0)},o(s){for(let r=0;r<3;r+=1){const i=t.blocks[r];E(i)}n=!1},d(s){s&&k(e),t.block.d(),t.token=null,t=null}}}function cl(l){return{c:O,m:O,p:O,i:O,o:O,d:O}}function ul(l){let e,n;return e=new We({props:{props:{name:"preferred_voice",title:"Preferred Voice",value:l[0].preferred_voice,type:"select"},$$slots:{default:[ml]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment)},m(t,s){C(e,t,s),n=!0},p(t,s){const r={};s&1&&(r.props={name:"preferred_voice",title:"Preferred Voice",value:t[0].preferred_voice,type:"select"}),s&8&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Rt(l){let e,n=l[5].name+"",t,s;return{c(){e=h("option"),t=V(n),e.__value=s=l[5].name,e.value=e.__value},m(r,i){v(r,e,i),b(e,t)},p:O,d(r){r&&k(e)}}}function fl(l){let e,n=l[4],t=[];for(let s=0;s<n.length;s+=1)t[s]=Rt(Tt(l,n,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=te()},m(s,r){for(let i=0;i<t.length;i+=1)t[i].m(s,r);v(s,e,r)},p(s,r){if(r&0){n=s[4];let i;for(i=0;i<n.length;i+=1){const c=Tt(s,n,i);t[i]?t[i].p(c,r):(t[i]=Rt(c),t[i].c(),t[i].m(e.parentNode,e))}for(;i<t.length;i+=1)t[i].d(1);t.length=n.length}},d(s){ae(t,s),s&&k(e)}}}function ml(l){let e;const n=l[2].default,t=Ie(n,l,l[3],null),s=t||fl(l);return{c(){s&&s.c()},m(r,i){s&&s.m(r,i),e=!0},p(r,i){t&&t.p&&(!e||i&8)&&Ce(t,n,r,r[3],e?Ne(n,r[3],i,null):Le(r[3]),null)},i(r){e||(w(s,r),e=!0)},o(r){E(s,r),e=!1},d(r){s&&s.d(r)}}}function pl(l){let e;return{c(){e=h("p"),e.textContent="Loading"},m(n,t){v(n,e,t)},p:O,i:O,o:O,d(n){n&&k(e)}}}function _l(l){let e,n,t,s,r,i,c,a,o,u,f,p;t=new We({props:{props:{name:"prep_time",title:"Prep Time (seconds)",value:l[0].prep_time,type:"number",min:0,max:3600}}});let m=l[0].use_voice&&At(l);c=new We({props:{props:{name:"show_plank",title:"Show Planks?",value:l[0].show_plank,type:"slider"}}}),u=new We({props:{props:{name:"use_voice",title:"Use Voice?",value:l[0].use_voice,type:"slider"}}});let _=l[0].use_voice&&Pt(l);return{c(){e=h("ul"),n=h("li"),I(t.$$.fragment),s=T(),m&&m.c(),r=T(),i=h("li"),I(c.$$.fragment),a=T(),o=h("li"),I(u.$$.fragment),f=T(),_&&_.c()},m(d,S){v(d,e,S),b(e,n),C(t,n,null),b(e,s),m&&m.m(e,null),b(e,r),b(e,i),C(c,i,null),b(e,a),b(e,o),C(u,o,null),b(e,f),_&&_.m(e,null),p=!0},p(d,S){const A={};S&1&&(A.props={name:"prep_time",title:"Prep Time (seconds)",value:d[0].prep_time,type:"number",min:0,max:3600}),t.$set(A),d[0].use_voice?m?(m.p(d,S),S&1&&w(m,1)):(m=At(d),m.c(),w(m,1),m.m(e,r)):m&&(ne(),E(m,1,1,()=>{m=null}),le());const $={};S&1&&($.props={name:"show_plank",title:"Show Planks?",value:d[0].show_plank,type:"slider"}),c.$set($);const P={};S&1&&(P.props={name:"use_voice",title:"Use Voice?",value:d[0].use_voice,type:"slider"}),u.$set(P),d[0].use_voice?_?(_.p(d,S),S&1&&w(_,1)):(_=Pt(d),_.c(),w(_,1),_.m(e,null)):_&&(ne(),E(_,1,1,()=>{_=null}),le())},i(d){p||(w(t.$$.fragment,d),w(m),w(c.$$.fragment,d),w(u.$$.fragment,d),w(_),p=!0)},o(d){E(t.$$.fragment,d),E(m),E(c.$$.fragment,d),E(u.$$.fragment,d),E(_),p=!1},d(d){d&&k(e),L(t),m&&m.d(),L(c),L(u),_&&_.d()}}}function dl(l){let e,n;return e=new Ue({props:{title:"Timer Settings",$$slots:{default:[_l]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment)},m(t,s){C(e,t,s),n=!0},p(t,s){const r={};s&9&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function gl(l){let e,n;return e=new tt({props:{$$slots:{default:[dl]},$$scope:{ctx:l}}}),e.$on("close",l[1]),{c(){I(e.$$.fragment)},m(t,s){C(e,t,s),n=!0},p(t,[s]){const r={};s&9&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function bl(l,e,n){let t;M(l,fe,c=>n(0,t=c));let{$$slots:s={},$$scope:r}=e;const i=c=>{const a=c.detail.currentTarget.parentNode.parentNode,o=new FormData(a);je(fe,t.show_plank=o.has("show_plank"),t),je(fe,t.use_voice=o.has("use_voice"),t),je(fe,t.prep_time=parseInt(o.get("prep_time").toString()),t),je(fe,t.announce_every=parseInt(o.get("announce_every").toString()),t),je(fe,t.preferred_voice=o.has("use_voice")?o.get("preferred_voice"):null,t),_e.set(!1)};return l.$$set=c=>{"$$scope"in c&&n(3,r=c.$$scope)},[t,i,s,r]}class hl extends U{constructor(e){super();H(this,e,bl,gl,z,{})}}function It(l,e,n){const t=l.slice();return t[11]=e[n],t}function vl(l){let e,n;return{c(){e=h("img"),ke(e.src,n="/css/icons/power-outline.svg")||g(e,"src",n),g(e,"alt","Start!"),g(e,"class","loading svelte-9by8qp")},m(t,s){v(t,e,s)},p:O,d(t){t&&k(e)}}}function kl(l){let e=l[5].asClock(l[1])+"",n;return{c(){n=V(e)},m(t,s){v(t,n,s)},p(t,s){s&2&&e!==(e=t[5].asClock(t[1])+"")&&X(n,e)},d(t){t&&k(n)}}}function $l(l){let e,n;function t(i,c){return(e==null||c&2)&&(e=!!(i[1]||i[5].isTicking())),e?kl:vl}let s=t(l,-1),r=s(l);return{c(){r.c(),n=te()},m(i,c){r.m(i,c),v(i,n,c)},p(i,c){s===(s=t(i,c))&&r?r.p(i,c):(r.d(1),r=s(i),r&&(r.c(),r.m(n.parentNode,n)))},d(i){r.d(i),i&&k(n)}}}function wl(l){let e,n,t,s;e=new et({}),e.$on("reset",l[5].reset);let r=l[0].show_plank&&l[3]&&Ct(l);return{c(){I(e.$$.fragment),n=T(),r&&r.c(),t=te()},m(i,c){C(e,i,c),v(i,n,c),r&&r.m(i,c),v(i,t,c),s=!0},p(i,c){i[0].show_plank&&i[3]?r?r.p(i,c):(r=Ct(i),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i(i){s||(w(e.$$.fragment,i),s=!0)},o(i){E(e.$$.fragment,i),s=!1},d(i){L(e,i),i&&k(n),r&&r.d(i),i&&k(t)}}}function yl(l){let e,n;return e=new hl({}),{c(){I(e.$$.fragment)},m(t,s){C(e,t,s),n=!0},p:O,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Ct(l){let e,n,t,s,r=l[3],i=[];for(let c=0;c<r.length;c+=1)i[c]=Lt(It(l,r,c));return{c(){e=h("div"),n=h("h3"),n.textContent="Plank:",t=T(),s=h("ol");for(let c=0;c<i.length;c+=1)i[c].c();g(n,"class","svelte-9by8qp"),g(e,"class","planks svelte-9by8qp")},m(c,a){v(c,e,a),b(e,n),b(e,t),b(e,s);for(let o=0;o<i.length;o+=1)i[o].m(s,null)},p(c,a){if(a&8){r=c[3];let o;for(o=0;o<r.length;o+=1){const u=It(c,r,o);i[o]?i[o].p(u,a):(i[o]=Lt(u),i[o].c(),i[o].m(s,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d(c){c&&k(e),ae(i,c)}}}function Lt(l){let e,n=l[11].name+"",t;return{c(){e=h("li"),t=V(n),g(e,"class","svelte-9by8qp")},m(s,r){v(s,e,r),b(e,t)},p(s,r){r&8&&n!==(n=s[11].name+"")&&X(t,n)},d(s){s&&k(e)}}}function El(l){let e,n,t,s,r,i,c;n=new bt({props:{$$slots:{default:[$l]},$$scope:{ctx:l}}}),n.$on("click",l[4]);const a=[yl,wl],o=[];function u(f,p){return f[2]?0:1}return s=u(l),r=o[s]=a[s](l),{c(){e=h("div"),I(n.$$.fragment),t=T(),r.c(),i=te(),g(e,"class","bttn-container svelte-9by8qp")},m(f,p){v(f,e,p),C(n,e,null),v(f,t,p),o[s].m(f,p),v(f,i,p),c=!0},p(f,[p]){const m={};p&16386&&(m.$$scope={dirty:p,ctx:f}),n.$set(m);let _=s;s=u(f),s===_?o[s].p(f,p):(ne(),E(o[_],1,1,()=>{o[_]=null}),le(),r=o[s],r?r.p(f,p):(r=o[s]=a[s](f),r.c()),w(r,1),r.m(i.parentNode,i))},i(f){c||(w(n.$$.fragment,f),w(r),c=!0)},o(f){E(n.$$.fragment,f),E(r),c=!1},d(f){f&&k(e),L(n),f&&k(t),o[s].d(f),f&&k(i)}}}function Sl(l,e,n){let t,s,r,i,c;M(l,fe,p=>n(0,t=p)),M(l,_e,p=>n(2,i=p)),M(l,rs,p=>n(3,c=p)),_e.set(!1);const a=()=>{G.background=null,window.speechSynthesis.pending&&window.speechSynthesis.cancel()},o=p=>{ee.activateOnClick(),p.detail.active?u.start():u.stop()};Be(()=>{if(s&&t.prep_time){const p=s-t.prep_time;G.background=p<0?G.backgrounds.PREPARE:G.backgrounds.WORK}}),Ge(()=>{a(),u.stop(),Se.setItem("timer_time",s)});const u=gt();M(l,u,p=>n(9,s=p)),u.set(parseInt(Se.getItem("timer_time")));const f=ge(u,(p,m)=>{const _=t.prep_time,d=t.use_voice,S=t.announce_every;let A=p-_,$=A<0?0:A;if(u.isTicking()){if(A<0?G.background=G.backgrounds.PREPARE:A>=0&&(G.background=G.backgrounds.WORK),$=A<0?_-(_+A):A,d){!ee.defaultVoice&&t.preferred_voice&&(ee.defaultVoice=t.preferred_voice),ee.controlYTPlayer||(ee.controlYTPlayer=!0);let P="";if(A<=0&&A>=-3)P+=$===0?"Go!":$.toString();else if(S>0&&$%S==0){let{m:y,s:N}=u.minSecs($);y!==0&&(P+=y+" minute"+(y==1?" ":"s ")),N!==0&&(P+=N+" second"+(N==1?"":"s"))}P.length&&ee.speak(P)}}else a();m($)},0);return M(l,f,p=>n(1,r=p)),[t,r,i,c,o,u,f]}class Tl extends U{constructor(e){super();H(this,e,Sl,El,z,{})}}function Al(l){let e,n,t,s,r,i,c,a,o;return{c(){e=h("div"),n=h("label"),t=V(l[2]),s=T(),r=h("input"),i=T(),c=h("label"),g(n,"class","bulb-label svelte-1flq487"),g(n,"for",l[1]),g(r,"type","checkbox"),g(r,"name",l[1]),g(r,"id",l[1]),g(r,"class","svelte-1flq487"),g(c,"class","bulb svelte-1flq487"),g(c,"for",l[1]),g(e,"class","svelte-1flq487")},m(u,f){v(u,e,f),b(e,n),b(n,t),b(e,s),b(e,r),r.checked=l[0],b(e,i),b(e,c),a||(o=[K(r,"change",l[4]),K(r,"change",l[3])],a=!0)},p(u,[f]){f&4&&X(t,u[2]),f&2&&g(n,"for",u[1]),f&2&&g(r,"name",u[1]),f&2&&g(r,"id",u[1]),f&1&&(r.checked=u[0]),f&2&&g(c,"for",u[1])},i:O,o:O,d(u){u&&k(e),a=!1,Ee(o)}}}function Pl(l,e,n){const t=Ae();let s=o=>{t("change",o.currentTarget.checked)},{name:r=void 0}=e,{checked:i=!1}=e,{label:c=void 0}=e;function a(){i=this.checked,n(0,i)}return l.$$set=o=>{"name"in o&&n(1,r=o.name),"checked"in o&&n(0,i=o.checked),"label"in o&&n(2,c=o.label)},[i,r,c,s,a]}class Nt extends U{constructor(e){super();H(this,e,Pl,Al,z,{name:1,checked:0,label:2})}}function Rl(l){let e,n,t,s,r,i,c=[l[4](l[1],l[2])],a={};for(let o=0;o<c.length;o+=1)a=Oe(a,c[o]);return{c(){e=h("label"),n=V(l[0]),t=T(),s=h("input"),g(e,"for",l[1]),$e(s,a),x(s,"bold",l[3])},m(o,u){v(o,e,u),b(e,n),v(o,t,u),v(o,s,u),s.autofocus&&s.focus(),r||(i=[K(s,"input",l[8]),K(s,"change",l[9]),K(s,"focus",l[5]),K(s,"blur",l[5])],r=!0)},p(o,[u]){u&1&&X(n,o[0]),u&2&&g(e,"for",o[1]),$e(s,a=Ve(c,[u&6&&o[4](o[1],o[2])])),x(s,"bold",o[3])},i:O,o:O,d(o){o&&k(e),o&&k(t),o&&k(s),r=!1,Ee(i)}}}function Il(l,e,n){const t=(m,_)=>({type:a,name:m,id:m,value:_,editable:!o}),s=m=>{const _=m.currentTarget;switch(m.type){case"focus":_.parentNode.classList.add("active"),_.classList.add("bold"),_.select();break;case"blur":_.parentNode.classList.add("inactive"),_.classList.remove("bold"),setTimeout(()=>{_.parentNode.classList.remove("active"),_.parentNode.classList.remove("inactive")},600);break}};let{label:r,name:i,value:c}=e,{type:a="number"}=e,{disabled:o=!1}=e,{bold:u=!1}=e;function f(m){we.call(this,l,m)}function p(m){we.call(this,l,m)}return l.$$set=m=>{"label"in m&&n(0,r=m.label),"name"in m&&n(1,i=m.name),"value"in m&&n(2,c=m.value),"type"in m&&n(6,a=m.type),"disabled"in m&&n(7,o=m.disabled),"bold"in m&&n(3,u=m.bold)},[r,i,c,u,t,s,a,o,f,p]}class nt extends U{constructor(e){super();H(this,e,Il,Rl,z,{label:0,name:1,value:2,type:6,disabled:7,bold:3})}}function Ot(l,e,n){const t=l.slice();return t[12]=e[n],t}function Vt(l,e,n){const t=l.slice();return t[15]=e[n],t}function Bt(l){let e,n,t,s;return n=new nt({props:{label:l[15].title,name:l[15].id,value:l[15].id in l[2].rules?l[2].rules[l[15].id]:0}}),n.$on("input",l[5]),{c(){e=h("li"),I(n.$$.fragment),t=T()},m(r,i){v(r,e,i),C(n,e,null),b(e,t),s=!0},p(r,i){const c={};i&8&&(c.label=r[15].title),i&8&&(c.name=r[15].id),i&12&&(c.value=r[15].id in r[2].rules?r[2].rules[r[15].id]:0),n.$set(c)},i(r){s||(w(n.$$.fragment,r),s=!0)},o(r){E(n.$$.fragment,r),s=!1},d(r){r&&k(e),L(n)}}}function Cl(l){let e,n,t=l[3],s=[];for(let i=0;i<t.length;i+=1)s[i]=Bt(Vt(l,t,i));const r=i=>E(s[i],1,1,()=>{s[i]=null});return{c(){e=h("ul");for(let i=0;i<s.length;i+=1)s[i].c()},m(i,c){v(i,e,c);for(let a=0;a<s.length;a+=1)s[a].m(e,null);n=!0},p(i,c){if(c&44){t=i[3];let a;for(a=0;a<t.length;a+=1){const o=Vt(i,t,a);s[a]?(s[a].p(o,c),w(s[a],1)):(s[a]=Bt(o),s[a].c(),w(s[a],1),s[a].m(e,null))}for(ne(),a=t.length;a<s.length;a+=1)r(a);le()}},i(i){if(!n){for(let c=0;c<t.length;c+=1)w(s[c]);n=!0}},o(i){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)E(s[c]);n=!1},d(i){i&&k(e),ae(s,i)}}}function jt(l){let e,n,t;const s=[{label:l[12].label},{name:l[12].name},{value:l[12].value},l[12]];let r={};for(let i=0;i<s.length;i+=1)r=Oe(r,s[i]);return n=new nt({props:r}),n.$on("input",l[6]),{c(){e=h("li"),I(n.$$.fragment)},m(i,c){v(i,e,c),C(n,e,null),t=!0},p(i,c){const a=c&512?Ve(s,[{label:i[12].label},{name:i[12].name},{value:i[12].value},nn(i[12])]):{};n.$set(a)},i(i){t||(w(n.$$.fragment,i),t=!0)},o(i){E(n.$$.fragment,i),t=!1},d(i){i&&k(e),L(n)}}}function Ll(l){let e,n,t,s,r,i=l[9](),c=[];for(let o=0;o<i.length;o+=1)c[o]=jt(Ot(l,i,o));const a=o=>E(c[o],1,1,()=>{c[o]=null});return s=new nt({props:{label:"Total Time",name:"totalWorkoutTime",value:De(l[1]),type:"text",disabled:!0,bold:!0}}),{c(){e=h("ul");for(let o=0;o<c.length;o+=1)c[o].c();n=T(),t=h("li"),I(s.$$.fragment)},m(o,u){v(o,e,u);for(let f=0;f<c.length;f+=1)c[f].m(e,null);b(e,n),b(e,t),C(s,t,null),r=!0},p(o,u){if(u&576){i=o[9]();let p;for(p=0;p<i.length;p+=1){const m=Ot(o,i,p);c[p]?(c[p].p(m,u),w(c[p],1)):(c[p]=jt(m),c[p].c(),w(c[p],1),c[p].m(e,n))}for(ne(),p=i.length;p<c.length;p+=1)a(p);le()}const f={};u&2&&(f.value=De(o[1])),s.$set(f)},i(o){if(!r){for(let u=0;u<i.length;u+=1)w(c[u]);w(s.$$.fragment,o),r=!0}},o(o){c=c.filter(Boolean);for(let u=0;u<c.length;u+=1)E(c[u]);E(s.$$.fragment,o),r=!1},d(o){o&&k(e),ae(c,o),L(s)}}}function Nl(l){let e,n,t,s,r,i,c,a,o;return e=new Ue({props:{title:"Exercises ("+l[0]+")",$$slots:{default:[Cl]},$$scope:{ctx:l}}}),t=new Ue({props:{title:"Tabata",$$slots:{default:[Ll]},$$scope:{ctx:l}}}),{c(){I(e.$$.fragment),n=T(),I(t.$$.fragment),s=T(),r=h("div"),i=h("button"),i.textContent="Create",g(i,"class","default-button"),g(i,"type","submit"),g(r,"class","submit svelte-53plpy")},m(u,f){C(e,u,f),v(u,n,f),C(t,u,f),v(u,s,f),v(u,r,f),b(r,i),c=!0,a||(o=K(i,"click",Re(l[8])),a=!0)},p(u,f){const p={};f&1&&(p.title="Exercises ("+u[0]+")"),f&262156&&(p.$$scope={dirty:f,ctx:u}),e.$set(p);const m={};f&262146&&(m.$$scope={dirty:f,ctx:u}),t.$set(m)},i(u){c||(w(e.$$.fragment,u),w(t.$$.fragment,u),c=!0)},o(u){E(e.$$.fragment,u),E(t.$$.fragment,u),c=!1},d(u){L(e,u),u&&k(n),L(t,u),u&&k(s),u&&k(r),a=!1,o()}}}function Ol(l){let e,n;return e=new tt({props:{$$slots:{default:[Nl]},$$scope:{ctx:l}}}),e.$on("close",l[7]),{c(){I(e.$$.fragment)},m(t,s){C(e,t,s),n=!0},p(t,[s]){const r={};s&262159&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Vl(l,e,n){let t,s,r,i;M(l,_t,d=>n(3,i=d));const c=be.clone();M(l,c,d=>n(2,r=d));const a=(d,S=!1)=>{const A=parseInt(d.currentTarget.value);isNaN(A)||(S?c.updateRule(d.currentTarget.id,A):c.update($=>(d.currentTarget.id in $&&($[d.currentTarget.id]=A),$)))},o=d=>{a(d,!0)},u=d=>{a(d,!1)},f=()=>{_e.set(!1)},p=()=>{be.set(r),ce.generate(),f()};function m(){const d=["label","name","value","type","disabled","bold"],S={prep_time:"Prep Time",time_on:"Active Time",time_off:"Rest Time",rest_time:"Break Time",tabatas:"Rounds"};return Object.entries(r).filter($=>$[0]in S).map(([$,P])=>{const y=[S[$],$,P,"number",!1,!1];return Object.fromEntries(d.map((B,Z)=>[B,y[Z]]))})}const _=ge(c,(d,S)=>{S(Object.entries(d.rules).reduce((A,$)=>A+(isNaN($[1])?0:$[1]),0))},0);return M(l,_,d=>n(0,s=d)),l.$$.update=()=>{l.$$.dirty&1&&n(1,t=c.getTotalTime(s))},[s,t,r,i,c,o,u,f,p,m,_]}class Bl extends U{constructor(e){super();H(this,e,Vl,Ol,z,{})}}function jl(l){let e,n,t,s,r,i,c,a;return e=new ue({props:{src:"/css/icons/redo-svgrepo-com.svg",alt:"Replace Exercise",min_dim:"1rem",data:{"data-id":l[1],"data-type":l[0].type,"data-action":"replace"}}}),e.$on("click",l[4]),t=new ue({props:{disabled:!l[2],src:"/css/icons/arrow-up-circle.svg",alt:"Move Up",min_dim:"1rem",data:{"data-id":l[1],"data-type":l[0].type,"data-action":"up"}}}),t.$on("click",l[4]),r=new ue({props:{disabled:!l[2],src:"/css/icons/arrow-down-circle.svg",alt:"Move Down",min_dim:"1rem",data:{"data-id":l[1],"data-type":l[0].type,"data-action":"down"}}}),r.$on("click",l[4]),c=new ue({props:{disabled:!l[3],src:"/css/icons/trash.svg",alt:"Delete Exercise",min_dim:"1rem",data:{"data-id":l[1],"data-type":l[0].type,"data-action":"delete"}}}),c.$on("click",l[4]),{c(){I(e.$$.fragment),n=T(),I(t.$$.fragment),s=T(),I(r.$$.fragment),i=T(),I(c.$$.fragment)},m(o,u){C(e,o,u),v(o,n,u),C(t,o,u),v(o,s,u),C(r,o,u),v(o,i,u),C(c,o,u),a=!0},p(o,[u]){const f={};u&3&&(f.data={"data-id":o[1],"data-type":o[0].type,"data-action":"replace"}),e.$set(f);const p={};u&4&&(p.disabled=!o[2]),u&3&&(p.data={"data-id":o[1],"data-type":o[0].type,"data-action":"up"}),t.$set(p);const m={};u&4&&(m.disabled=!o[2]),u&3&&(m.data={"data-id":o[1],"data-type":o[0].type,"data-action":"down"}),r.$set(m);const _={};u&8&&(_.disabled=!o[3]),u&3&&(_.data={"data-id":o[1],"data-type":o[0].type,"data-action":"delete"}),c.$set(_)},i(o){a||(w(e.$$.fragment,o),w(t.$$.fragment,o),w(r.$$.fragment,o),w(c.$$.fragment,o),a=!0)},o(o){E(e.$$.fragment,o),E(t.$$.fragment,o),E(r.$$.fragment,o),E(c.$$.fragment,o),a=!1},d(o){L(e,o),o&&k(n),L(t,o),o&&k(s),L(r,o),o&&k(i),L(c,o)}}}function Dl(l,e,n){const t=a=>{const o=a.currentTarget.dataset;let u=parseInt(o.id),f=parseInt(o.type);switch(o.action){case"up":case"down":ce.swapExercise(u,u+(o.action=="down"?1:-1),f);break;case"delete":case"replace":ce.alterExercise(u,f,o.action);break}};let{exercise:s=null}=e,{index:r=null}=e,{movementAllowed:i=!0}=e,{deleteAllowed:c=!0}=e;return l.$$set=a=>{"exercise"in a&&n(0,s=a.exercise),"index"in a&&n(1,r=a.index),"movementAllowed"in a&&n(2,i=a.movementAllowed),"deleteAllowed"in a&&n(3,c=a.deleteAllowed)},[s,r,i,c,t]}class Dt extends U{constructor(e){super();H(this,e,Dl,jl,z,{exercise:0,index:1,movementAllowed:2,deleteAllowed:3})}}function Kt(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function qt(l,e,n){const t=l.slice();return t[11]=e[n],t[10]=n,t}function Wt(l){let e,n,t,s=l[10]+1+"",r,i,c=l[11].display_name+"",a,o,u,f,p=l[11].target+"",m,_,d,S,A=l[11].band_pos_text+"",$,P,y,N,B,Z,F,q,re;return N=new Dt({props:{exercise:l[11],index:l[10],movementAllowed:l[4]>1,deleteAllowed:l[4]>1}}),{c(){e=h("li"),n=h("div"),t=h("h6"),r=V(s),i=V(". "),a=V(c),o=T(),u=h("span"),f=V("Target: "),m=V(p),_=T(),d=h("span"),S=V("Band: "),$=V(A),P=T(),y=h("div"),I(N.$$.fragment),B=T(),g(n,"class","exercise-info svelte-1606yd0"),g(y,"class","exercise-actions svelte-1606yd0"),g(e,"draggable",Z=l[4]>1),g(e,"class","svelte-1606yd0"),x(e,"grabbable",l[4]>1)},m(j,Q){v(j,e,Q),b(e,n),b(n,t),b(t,r),b(t,i),b(t,a),b(n,o),b(n,u),b(u,f),b(u,m),b(n,_),b(n,d),b(d,S),b(d,$),b(e,P),b(e,y),C(N,y,null),b(e,B),F=!0,q||(re=K(e,"dragstart",l[2]),q=!0)},p(j,Q){(!F||Q&1)&&c!==(c=j[11].display_name+"")&&X(a,c),(!F||Q&1)&&p!==(p=j[11].target+"")&&X(m,p),(!F||Q&1)&&A!==(A=j[11].band_pos_text+"")&&X($,A);const R={};Q&1&&(R.exercise=j[11]),N.$set(R)},i(j){F||(w(N.$$.fragment,j),F=!0)},o(j){E(N.$$.fragment,j),F=!1},d(j){j&&k(e),L(N),q=!1,re()}}}function Mt(l){let e,n,t,s,r=l[0].planks,i=[];for(let a=0;a<r.length;a+=1)i[a]=Gt(Kt(l,r,a));const c=a=>E(i[a],1,1,()=>{i[a]=null});return{c(){e=h("h5"),e.textContent="Planks",n=T(),t=h("ol");for(let a=0;a<i.length;a+=1)i[a].c();g(e,"class","svelte-1606yd0"),g(t,"class","row-cards")},m(a,o){v(a,e,o),v(a,n,o),v(a,t,o);for(let u=0;u<i.length;u+=1)i[u].m(t,null);s=!0},p(a,o){if(o&37){r=a[0].planks;let u;for(u=0;u<r.length;u+=1){const f=Kt(a,r,u);i[u]?(i[u].p(f,o),w(i[u],1)):(i[u]=Gt(f),i[u].c(),w(i[u],1),i[u].m(t,null))}for(ne(),u=r.length;u<i.length;u+=1)c(u);le()}},i(a){if(!s){for(let o=0;o<r.length;o+=1)w(i[o]);s=!0}},o(a){i=i.filter(Boolean);for(let o=0;o<i.length;o+=1)E(i[o]);s=!1},d(a){a&&k(e),a&&k(n),a&&k(t),ae(i,a)}}}function Gt(l){let e,n,t,s=l[10]+1+"",r,i,c=l[8].display_name+"",a,o,u,f,p=l[8].target+"",m,_,d,S,A=l[8].band_pos_text+"",$,P,y,N,B,Z,F,q,re;return N=new Dt({props:{exercise:l[8],index:l[10],movementAllowed:l[5]>1,deleteAllowed:!1}}),{c(){e=h("li"),n=h("div"),t=h("h6"),r=V(s),i=V(". "),a=V(c),o=T(),u=h("span"),f=V("Target: "),m=V(p),_=T(),d=h("span"),S=V("Band: "),$=V(A),P=T(),y=h("div"),I(N.$$.fragment),B=T(),g(n,"class","exercise-info svelte-1606yd0"),g(y,"class","exercise-actions svelte-1606yd0"),g(e,"draggable",Z=l[5]>1),g(e,"class","svelte-1606yd0"),x(e,"grabbable",l[5]>1)},m(j,Q){v(j,e,Q),b(e,n),b(n,t),b(t,r),b(t,i),b(t,a),b(n,o),b(n,u),b(u,f),b(u,m),b(n,_),b(n,d),b(d,S),b(d,$),b(e,P),b(e,y),C(N,y,null),b(e,B),F=!0,q||(re=K(e,"dragstart",l[2]),q=!0)},p(j,Q){(!F||Q&1)&&c!==(c=j[8].display_name+"")&&X(a,c),(!F||Q&1)&&p!==(p=j[8].target+"")&&X(m,p),(!F||Q&1)&&A!==(A=j[8].band_pos_text+"")&&X($,A);const R={};Q&1&&(R.exercise=j[8]),N.$set(R)},i(j){F||(w(N.$$.fragment,j),F=!0)},o(j){E(N.$$.fragment,j),F=!1},d(j){j&&k(e),L(N),q=!1,re()}}}function Kl(l){let e,n,t,s,r,i,c,a,o=l[0].exercises,u=[];for(let m=0;m<o.length;m+=1)u[m]=Wt(qt(l,o,m));const f=m=>E(u[m],1,1,()=>{u[m]=null});let p=l[0].planks.length>0&&l[1]===!0&&Mt(l);return{c(){e=h("h5"),e.textContent="Exercises",n=T(),t=h("ol");for(let m=0;m<u.length;m+=1)u[m].c();s=T(),p&&p.c(),r=te(),g(e,"class","svelte-1606yd0"),g(t,"class","row-cards")},m(m,_){v(m,e,_),v(m,n,_),v(m,t,_);for(let d=0;d<u.length;d+=1)u[d].m(t,null);v(m,s,_),p&&p.m(m,_),v(m,r,_),i=!0,c||(a=[K(t,"dragover",Re(l[6])),K(t,"drop",l[3])],c=!0)},p(m,[_]){if(_&21){o=m[0].exercises;let d;for(d=0;d<o.length;d+=1){const S=qt(m,o,d);u[d]?(u[d].p(S,_),w(u[d],1)):(u[d]=Wt(S),u[d].c(),w(u[d],1),u[d].m(t,null))}for(ne(),d=o.length;d<u.length;d+=1)f(d);le()}m[0].planks.length>0&&m[1]===!0?p?(p.p(m,_),_&3&&w(p,1)):(p=Mt(m),p.c(),w(p,1),p.m(r.parentNode,r)):p&&(ne(),E(p,1,1,()=>{p=null}),le())},i(m){if(!i){for(let _=0;_<o.length;_+=1)w(u[_]);w(p),i=!0}},o(m){u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)E(u[_]);E(p),i=!1},d(m){m&&k(e),m&&k(n),m&&k(t),ae(u,m),m&&k(s),p&&p.d(m),m&&k(r),c=!1,Ee(a)}}}function ql(l,e,n){let t,s;M(l,ce,f=>n(0,t=f)),M(l,Fe,f=>n(1,s=f));let r=null;const i=f=>{r=f.currentTarget,f.dataTransfer.effectAllowed="move"},c=f=>{f.preventDefault();const p=f.path.indexOf(r.parentNode);if(p<1)return;const m=f.path[p-1];if(r===m)return;const _=Array.from(r.parentNode.children);ce.swapExercise(_.indexOf(r),_.indexOf(m),Te.EXERCISE)};let a=t.exercises.length,o=t.planks.length;function u(f){we.call(this,l,f)}return[t,s,i,c,a,o,u]}class Wl extends U{constructor(e){super();H(this,e,ql,Kl,z,{})}}function Yt(l,e,n){const t=l.slice();return t[10]=e[n],t}function Ft(l){let e,n=l[10][1]+"",t,s,r,i,c,a;return{c(){e=h("span"),t=V(n),s=T(),g(e,"class","sel-box-option svelte-1jv4xur"),g(e,"data-value",r=l[10][0]),g(e,"data-text",i=l[10][1]),x(e,"selected",l[0]===l[10][0])},m(o,u){v(o,e,u),b(e,t),b(e,s),c||(a=K(e,"click",l[5]),c=!0)},p(o,u){u&4&&n!==(n=o[10][1]+"")&&X(t,n),u&4&&r!==(r=o[10][0])&&g(e,"data-value",r),u&4&&i!==(i=o[10][1])&&g(e,"data-text",i),u&5&&x(e,"selected",o[0]===o[10][0])},d(o){o&&k(e),c=!1,a()}}}function Ml(l){let e,n,t,s,r,i,c,a=l[2],o=[];for(let u=0;u<a.length;u+=1)o[u]=Ft(Yt(l,a,u));return{c(){e=h("div"),n=h("span"),t=V(l[3]),s=T(),r=h("div");for(let u=0;u<o.length;u+=1)o[u].c();g(n,"class","sel-placeholder svelte-1jv4xur"),g(n,"data-placeholder",l[3]),g(r,"class","sel-box svelte-1jv4xur"),g(e,"class","sel svelte-1jv4xur"),g(e,"id",l[1]),x(e,"active",l[4])},m(u,f){v(u,e,f),b(e,n),b(n,t),b(e,s),b(e,r);for(let p=0;p<o.length;p+=1)o[p].m(r,null);i||(c=K(e,"click",l[6]),i=!0)},p(u,[f]){if(f&8&&X(t,u[3]),f&8&&g(n,"data-placeholder",u[3]),f&37){a=u[2];let p;for(p=0;p<a.length;p+=1){const m=Yt(u,a,p);o[p]?o[p].p(m,f):(o[p]=Ft(m),o[p].c(),o[p].m(r,null))}for(;p<o.length;p+=1)o[p].d(1);o.length=a.length}f&2&&g(e,"id",u[1]),f&16&&x(e,"active",u[4])},i:O,o:O,d(u){u&&k(e),ae(o,u),i=!1,c()}}}function Gl(l,e,n){const t=Ae(),s=()=>{const m=document.getElementById(o);if(!m)return null;let _="";return m.querySelectorAll(".sel-box-option").forEach(d=>{d.dataset.value==f&&(_=d.dataset.text)}),_},r=m=>{const _=document.getElementById(o).querySelector(".sel-placeholder");_.textContent=m},i=m=>{m.currentTarget.dataset.value!=f&&(n(0,f=m.currentTarget.dataset.value),r(m.currentTarget.dataset.text),t("change",f))},c=()=>{n(4,a=!a),t("open",a)};Be(()=>{const m=s();m&&r(m)});let a=!1,{name:o,options:u,value:f,placeholder:p}=e;return l.$$set=m=>{"name"in m&&n(1,o=m.name),"options"in m&&n(2,u=m.options),"value"in m&&n(0,f=m.value),"placeholder"in m&&n(3,p=m.placeholder)},[f,o,u,p,a,i,c]}class Yl extends U{constructor(e){super();H(this,e,Gl,Ml,z,{name:1,options:2,value:0,placeholder:3})}}function Fl(l){let e,n,t,s,r,i,c,a,o,u;e=new Yl({props:{name:"workout_type",options:l[3].map(Ht),value:l[2].id,placeholder:"Presets"}}),e.$on("change",l[8]),e.$on("open",l[11]),s=new Nt({props:{checked:l[5],name:"with_equipment",label:"Bands?"}}),s.$on("change",l[9]);function f(_){l[14](_)}let p={name:"with_planks",label:"Planks?"};l[6]!==void 0&&(p.checked=l[6]),i=new Nt({props:p}),ot.push(()=>at(i,"checked",f));let m=!l[0]&&l[1].exercises.length&&Ut(l);return{c(){I(e.$$.fragment),n=T(),t=h("div"),I(s.$$.fragment),r=T(),I(i.$$.fragment),a=T(),m&&m.c(),o=te(),g(t,"class","glow-buttons svelte-4wdsfb")},m(_,d){C(e,_,d),v(_,n,d),v(_,t,d),C(s,t,null),b(t,r),C(i,t,null),v(_,a,d),m&&m.m(_,d),v(_,o,d),u=!0},p(_,d){const S={};d&8&&(S.options=_[3].map(Ht)),d&4&&(S.value=_[2].id),e.$set(S);const A={};d&32&&(A.checked=_[5]),s.$set(A);const $={};!c&&d&64&&(c=!0,$.checked=_[6],it(()=>c=!1)),i.$set($),!_[0]&&_[1].exercises.length?m?(m.p(_,d),d&3&&w(m,1)):(m=Ut(_),m.c(),w(m,1),m.m(o.parentNode,o)):m&&(ne(),E(m,1,1,()=>{m=null}),le())},i(_){u||(w(e.$$.fragment,_),w(s.$$.fragment,_),w(i.$$.fragment,_),w(m),u=!0)},o(_){E(e.$$.fragment,_),E(s.$$.fragment,_),E(i.$$.fragment,_),E(m),u=!1},d(_){L(e,_),_&&k(n),_&&k(t),L(s),L(i),_&&k(a),m&&m.d(_),_&&k(o)}}}function Ul(l){let e,n;return e=new Bl({}),{c(){I(e.$$.fragment)},m(t,s){C(e,t,s),n=!0},p:O,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Ut(l){let e,n,t,s,r,i,c,a,o,u,f,p,m,_,d,S,A;return n=new ue({props:{src:"/css/icons/power-outline.svg",alt:"Go!",min_dim:"1.9rem"}}),n.$on("click",l[13]),r=new qe({props:{label:"Total Time",value:De(be.getTotalTime(l[1].exercises.length))}}),c=new ue({props:{src:"/css/icons/"+l[7],alt:"Share",min_dim:"1.9rem"}}),c.$on("click",l[12]),o=new et({}),o.$on("reset",l[10]),f=new Wl({}),_=new ue({props:{src:"/css/icons/power-outline.svg",alt:"Go!",min_dim:"1.9rem"}}),_.$on("click",l[13]),S=new ue({props:{src:"/css/icons/"+l[7],alt:"Share",min_dim:"1.9rem"}}),S.$on("click",l[12]),{c(){e=h("div"),I(n.$$.fragment),t=T(),s=h("div"),I(r.$$.fragment),i=T(),I(c.$$.fragment),a=T(),I(o.$$.fragment),u=T(),I(f.$$.fragment),p=T(),m=h("div"),I(_.$$.fragment),d=T(),I(S.$$.fragment),g(s,"class","timer-counter svelte-4wdsfb"),g(e,"class","action-row svelte-4wdsfb"),g(m,"class","action-row svelte-4wdsfb")},m($,P){v($,e,P),C(n,e,null),b(e,t),b(e,s),C(r,s,null),b(e,i),C(c,e,null),v($,a,P),C(o,$,P),v($,u,P),C(f,$,P),v($,p,P),v($,m,P),C(_,m,null),b(m,d),C(S,m,null),A=!0},p($,P){const y={};P&2&&(y.value=De(be.getTotalTime($[1].exercises.length))),r.$set(y)},i($){A||(w(n.$$.fragment,$),w(r.$$.fragment,$),w(c.$$.fragment,$),w(o.$$.fragment,$),w(f.$$.fragment,$),w(_.$$.fragment,$),w(S.$$.fragment,$),A=!0)},o($){E(n.$$.fragment,$),E(r.$$.fragment,$),E(c.$$.fragment,$),E(o.$$.fragment,$),E(f.$$.fragment,$),E(_.$$.fragment,$),E(S.$$.fragment,$),A=!1},d($){$&&k(e),L(n),L(r),L(c),$&&k(a),L(o,$),$&&k(u),L(f,$),$&&k(p),$&&k(m),L(_),L(S)}}}function Hl(l){let e,n,t,s;const r=[Ul,Fl],i=[];function c(a,o){return a[4]?0:1}return e=c(l),n=i[e]=r[e](l),{c(){n.c(),t=te()},m(a,o){i[e].m(a,o),v(a,t,o),s=!0},p(a,[o]){let u=e;e=c(a),e===u?i[e].p(a,o):(ne(),E(i[u],1,1,()=>{i[u]=null}),le(),n=i[e],n?n.p(a,o):(n=i[e]=r[e](a),n.c()),w(n,1),n.m(t.parentNode,t))},i(a){s||(w(n),s=!0)},o(a){E(n),s=!1},d(a){i[e].d(a),a&&k(t)}}}const Ht=l=>[l.id,l.title];function zl(l,e,n){let t,s,r,i,c,a;M(l,ce,P=>n(1,t=P)),M(l,be,P=>n(2,s=P)),M(l,mn,P=>n(3,r=P)),M(l,_e,P=>n(4,i=P)),M(l,Ye,P=>n(5,c=P)),M(l,Fe,P=>n(6,a=P));let o=!1,u=navigator.share&&navigator.canShare(),f=u?"share.svg":"link.svg";const p=P=>{const y=r.find(N=>N.id==P.detail);y&&(be.set(y),ce.generate())},m=P=>{Ye.set(P.detail),ce.generate()},_=()=>{s.id&&ce.generate()},d=P=>{n(0,o=P.detail)},S=async()=>{ce.save();const P={title:"Share Test",text:"Kalabaaz Workout",url:"https://navneet.github.io"};u?window.navigator.share(P).catch(y=>{console.error(y)}):navigator.clipboard&&navigator.clipboard.writeText(P.url).then(y=>{console.log("Show copied notification here")}).catch(y=>{console.error(y)})},A=()=>{ce.save(),st.triggerNew(t,!0),G.goto("name","Tabata")};_e.set(!1);function $(P){a=P,Fe.set(a)}return[o,t,s,r,i,c,a,f,p,m,_,d,S,A,$]}class Xl extends U{constructor(e){super();H(this,e,zl,Hl,z,{})}}function Ql(l){return Be(()=>{Qe.set(!0)}),Ge(()=>{Qe.set(!1)}),[]}class Jl extends U{constructor(e){super();H(this,e,Ql,null,z,{})}}const Zl=()=>{const{subscribe:l,set:e}=oe(Object.preventExtensions({name:"",pageTitle:"",href:"",component:null,submenu:[]})),n=(a,o,u=t())=>{u.forEach(f=>{f.submenu.length?n(a,o,f.submenu):o==f[a]&&e(f)})},t=()=>{const a=new Array;return a.push({name:"Tabata",pageTitle:"Tabata Workout",href:"tabata",component:St,submenu:[]}),a.push({name:"Timer",pageTitle:"Timer",href:"timer",component:Tl,submenu:[]}),a.push({name:"Workout",pageTitle:void 0,href:"/",component:void 0,submenu:[{name:"Create New()",pageTitle:"Create New Workout",href:"create",component:Xl,submenu:[]},{name:"Get Random()",pageTitle:"Random Workout",href:"random",component:St,submenu:[]}]}),a.push({name:"Music",pageTitle:"Music",href:"music",component:Jl,submenu:[]}),a},s=()=>["img-1.jpg","img-2.jpg","img-3.jpg","img-4.jpg","img-5.jpg","img-6.jpg","img-7.png"].map(a=>Je.NAVBAR_IMG_BASE_URL+"/"+a),r=()=>Object.preventExtensions({PREPARE:"prep",WORK:"work",REST:"rest",BREAK:"break"}),i=(a=null)=>{if(a==c)return;const o=Object.values(r());document.body.classList.remove(...o),o.includes(a)&&document.body.classList.add(a),c=a};let c=null;return{subscribe:l,goto:n,get items(){return t()},get bgImages(){return s()},get backgrounds(){return r()},get background(){return c},set background(a){i(a)},set open(a){lt.set(Boolean(a))}}},G=Zl(),lt=oe(!1),J={PREPARE:-3,BREAK:-2,REST:-1,WORK:1},He=(l=null)=>{const e=Object.preventExtensions(Object.assign({completed:!1,cycle:0,round:0,duration:0},Ze()));return l?Object.assign(e,l):e},xl=()=>{const{subscribe:l,set:e,update:n}=oe([]),t=a=>{"meta"in a&&e(s(a.meta,a.exercises))},s=(a,o)=>{let u=[];for(let f=0;f<a.tabatas;f++)if(o.forEach((p,m)=>{const _=Object.assign({completed:!1,cycle:m+1,round:f+1,duration:a.time_on},p);if(u.push(He(_)),m<o.length-1){const d={name:"Rest",display_name:"Rest",type:J.REST,completed:!1,cycle:m+1,round:f+1,duration:a.time_off};u.push(He(d))}}),f<a.tabatas-1){const p={name:"Break",display_name:"Break",type:J.BREAK,completed:!1,cycle:0,round:f+2,duration:a.rest_time};u.push(He(p))}return a.prep_time&&u.unshift(He({name:"Prepare",display_name:"Prepare",type:J.PREPARE,completed:!1,cycle:0,round:0,duration:a.prep_time})),u};function r(a){a>=0&&n(o=>(o[a]&&(o[a].completed=!0),o))}return{subscribe:l,init:t,reset:()=>{n(a=>a.map(o=>(o.completed=!1,o)))},isComplete:()=>{let a=!1;return n(o=>(a=Boolean(o.length)&&o.every(u=>u.completed===!0),o)),a},markItemComplete:r}},es={[J.PREPARE]:G.backgrounds.PREPARE,[J.REST]:G.backgrounds.REST,[J.BREAK]:G.backgrounds.BREAK,[J.WORK]:G.backgrounds.WORK},ye=xl(),ts=()=>{const{subscribe:l,set:e,update:n}=oe(""),t=async()=>{const i=an(window.location.href);if(i.get("w")&&!se.isStemWorkout(i.get("w"))){s(i.get("w"));return}const c=se.getItem("workout");c&&r(c)},s=async i=>{ft.getWorkout(i).then(c=>{r(c)}).catch(c=>{console.error(c);const a=se.getBackupStem(i);a&&r(a)})},r=(i,c=!1)=>{const a=i.meta.path_stem;let o=c;c||n(u=>(o=a!==u,u)),o===!0&&(se.setItem("workout",i),Se.setItem("tabata_time",0),e(a),de.set(i))};return{subscribe:l,init:t,triggerNew:r,set:s}},ns=()=>{const{subscribe:l,set:e}=oe([]);return{subscribe:l,set:t=>{e(t),ye.init(t)}}},de=ns(),st=ts(),ls=ge(de,l=>"meta"in l?l.meta:{tabatas:0,prep_time:0,time_on:0,time_off:0,rest_time:0},{}),ss=ge(de,l=>"exercises"in l?l.exercises:[],[]),rs=ge(de,l=>"planks"in l?l.planks:[],[]);function zt(l,e,n){const t=l.slice();return t[5]=e[n],t}function Xt(l,e,n){const t=l.slice();return t[8]=e[n],t}function is(l){let e,n=l[5].name+"",t,s,r,i;return{c(){e=h("a"),t=V(n),g(e,"href",s=l[5].href),g(e,"class","text-item")},m(c,a){v(c,e,a),b(e,t),r||(i=K(e,"click",Re(l[2])),r=!0)},p(c,a){a&1&&n!==(n=c[5].name+"")&&X(t,n),a&1&&s!==(s=c[5].href)&&g(e,"href",s)},d(c){c&&k(e),r=!1,i()}}}function os(l){let e,n=l[5].name+"",t,s,r,i,c,a,o,u=l[5].submenu,f=[];for(let p=0;p<u.length;p+=1)f[p]=Qt(Xt(l,u,p));return{c(){e=h("a"),t=V(n),s=h("span"),i=T(),c=h("ul");for(let p=0;p<f.length;p+=1)f[p].c();g(s,"class","icon"),g(e,"href",r=l[5].href),g(e,"class","text-item"),g(c,"class","submenu")},m(p,m){v(p,e,m),b(e,t),b(e,s),v(p,i,m),v(p,c,m);for(let _=0;_<f.length;_+=1)f[_].m(c,null);a||(o=K(e,"click",Re(l[3])),a=!0)},p(p,m){if(m&1&&n!==(n=p[5].name+"")&&X(t,n),m&1&&r!==(r=p[5].href)&&g(e,"href",r),m&5){u=p[5].submenu;let _;for(_=0;_<u.length;_+=1){const d=Xt(p,u,_);f[_]?f[_].p(d,m):(f[_]=Qt(d),f[_].c(),f[_].m(c,null))}for(;_<f.length;_+=1)f[_].d(1);f.length=u.length}},d(p){p&&k(e),p&&k(i),p&&k(c),ae(f,p),a=!1,o()}}}function Qt(l){let e,n,t=l[8].name+"",s,r,i,c,a;return{c(){e=h("li"),n=h("a"),s=V(t),i=T(),g(n,"href",r=l[8].href),g(e,"class","sub-item")},m(o,u){v(o,e,u),b(e,n),b(n,s),b(e,i),c||(a=K(n,"click",Re(l[2])),c=!0)},p(o,u){u&1&&t!==(t=o[8].name+"")&&X(s,t),u&1&&r!==(r=o[8].href)&&g(n,"href",r)},d(o){o&&k(e),c=!1,a()}}}function Jt(l){let e,n;function t(i,c){return i[5].submenu.length?os:is}let s=t(l),r=s(l);return{c(){e=h("li"),r.c(),n=T(),Pe(e,"background-image","url("+l[1]+")"),g(e,"class","menu-link"),x(e,"sub",l[5].submenu.length)},m(i,c){v(i,e,c),r.m(e,null),b(e,n)},p(i,c){s===(s=t(i))&&r?r.p(i,c):(r.d(1),r=s(i),r&&(r.c(),r.m(e,n))),c&2&&Pe(e,"background-image","url("+i[1]+")"),c&1&&x(e,"sub",i[5].submenu.length)},d(i){i&&k(e),r.d()}}}function as(l){let e,n,t,s,r,i,c,a,o=l[0].items,u=[];for(let f=0;f<o.length;f+=1)u[f]=Jt(zt(l,o,f));return{c(){e=h("nav"),n=h("a"),n.textContent="Kalabaaz",t=T(),s=h("i"),s.innerHTML="<span></span>",r=T(),i=h("ul");for(let f=0;f<u.length;f+=1)u[f].c();g(n,"href","/"),g(n,"class","home"),g(s,"class","hamburger"),g(e,"class","menubar"),g(i,"class","menu")},m(f,p){v(f,e,p),b(e,n),b(e,t),b(e,s),v(f,r,p),v(f,i,p);for(let m=0;m<u.length;m+=1)u[m].m(i,null);c||(a=K(s,"click",l[2]),c=!0)},p(f,[p]){if(p&15){o=f[0].items;let m;for(m=0;m<o.length;m+=1){const _=zt(f,o,m);u[m]?u[m].p(_,p):(u[m]=Jt(_),u[m].c(),u[m].m(i,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=o.length}},i:O,o:O,d(f){f&&k(e),f&&k(r),f&&k(i),ae(u,f),c=!1,a()}}}function cs(l,e,n){let t;Be(()=>{n(1,t=i())});const s=c=>{const a=document.querySelector(".hamburger"),o=document.querySelector(".menu");o.classList.contains("open")?(G.goto("href",c.currentTarget.getAttribute("href")),o.classList.add("close"),a.classList.remove("icon-cross"),n(0,G.open=!1,G),setTimeout(()=>{o.classList.remove("open")},1300)):(n(1,t=i()),o.classList.remove("close"),o.classList.add("open"),a.classList.add("icon-cross"),n(0,G.open=!0,G))},r=c=>{c.currentTarget.parentNode.classList.toggle("active")},i=()=>G.bgImages[Math.floor(Math.random()*G.bgImages.length)];return[G,t,s,r]}class us extends U{constructor(e){super();H(this,e,cs,as,z,{})}}function fs(l){let e,n;return{c(){e=h("h2"),n=V(l[0]),g(e,"class","svelte-jm90z1")},m(t,s){v(t,e,s),b(e,n)},p(t,[s]){s&1&&X(n,t[0])},i:O,o:O,d(t){t&&k(e)}}}function ms(l,e,n){let{title:t=""}=e;return l.$$set=s=>{"title"in s&&n(0,t=s.title)},[t]}class ps extends U{constructor(e){super();H(this,e,ms,fs,z,{title:0})}}function _s(l){let e,n=l[4]+"",t;return{c(){e=h("p"),t=V(n)},m(s,r){v(s,e,r),b(e,t)},p:O,d(s){s&&k(e)}}}function ds(l){let e,n,t;return{c(){e=h("div")},m(s,r){v(s,e,r),n||(t=ln(l[2].call(null,e)),n=!0)},p:O,d(s){s&&k(e),n=!1,t()}}}function gs(l){let e;return{c(){e=h("p"),e.textContent="Loading"},m(n,t){v(n,e,t)},p:O,d(n){n&&k(e)}}}function bs(l){let e,n={ctx:l,current:null,token:null,hasCatch:!0,pending:gs,then:ds,catch:_s,error:4};return Xe(he.loader,n),{c(){e=h("div"),n.block.c(),g(e,"class","yt-iframe-container"),x(e,"hide",!l[0]||l[1])},m(t,s){v(t,e,s),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(t,[s]){l=t,ze(n,l,s),s&3&&x(e,"hide",!l[0]||l[1])},i:O,o:O,d(t){t&&k(e),n.block.d(),n.token=null,n=null}}}function hs(l,e,n){let t,s;M(l,Qe,c=>n(0,t=c)),M(l,lt,c=>n(1,s=c));const r=c=>{const a=c.target;a.setSize("100%","100%"),a.setVolume(100),a.cuePlaylist({list:"PLXbcR6eu19MIR6yMyfFnRWdiRptMO7Eai",listType:"playlist"})},i=c=>{he.addEventListener(he.READY,r),he.mount(c)};return Ge(()=>{he.removeEventListener(he.READY,r),he.destroy()}),[t,s,i]}class vs extends U{constructor(e){super();H(this,e,hs,bs,z,{})}}function Zt(l){let e,n,t,s,r;e=new ps({props:{title:l[1].pageTitle}});var i=l[1].component;function c(a){return{}}return i&&(t=new i(c())),{c(){I(e.$$.fragment),n=T(),t&&I(t.$$.fragment),s=te()},m(a,o){C(e,a,o),v(a,n,o),t&&C(t,a,o),v(a,s,o),r=!0},p(a,o){const u={};if(o&2&&(u.title=a[1].pageTitle),e.$set(u),i!==(i=a[1].component)){if(t){ne();const f=t;E(f.$$.fragment,1,0,()=>{L(f,1)}),le()}i?(t=new i(c()),I(t.$$.fragment),w(t.$$.fragment,1),C(t,s.parentNode,s)):t=null}},i(a){r||(w(e.$$.fragment,a),t&&w(t.$$.fragment,a),r=!0)},o(a){E(e.$$.fragment,a),t&&E(t.$$.fragment,a),r=!1},d(a){L(e,a),a&&k(n),a&&k(s),t&&L(t,a)}}}function ks(l){let e,n,t,s,r,i,c;n=new us({});let a=!l[0]&&Zt(l);return i=new vs({}),{c(){e=h("header"),I(n.$$.fragment),t=T(),s=h("main"),a&&a.c(),r=T(),I(i.$$.fragment)},m(o,u){v(o,e,u),C(n,e,null),v(o,t,u),v(o,s,u),a&&a.m(s,null),b(s,r),C(i,s,null),c=!0},p(o,[u]){o[0]?a&&(ne(),E(a,1,1,()=>{a=null}),le()):a?(a.p(o,u),u&1&&w(a,1)):(a=Zt(o),a.c(),w(a,1),a.m(s,r))},i(o){c||(w(n.$$.fragment,o),w(a),w(i.$$.fragment,o),c=!0)},o(o){E(n.$$.fragment,o),E(a),E(i.$$.fragment,o),c=!1},d(o){o&&k(e),L(n),o&&k(t),o&&k(s),a&&a.d(),L(i)}}}function $s(l,e,n){let t,s;return M(l,lt,r=>n(0,t=r)),M(l,G,r=>n(1,s=r)),st.init(),G.goto("href","tabata"),[t,s]}class ws extends U{constructor(e){super();H(this,e,$s,ks,z,{})}}new ws({target:document.getElementById("app_container")});
