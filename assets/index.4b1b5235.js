import{w as re,r as en,d as ge,g as ve,S as H,i as z,s as X,e as h,t as B,a as T,b as g,c as v,f as b,h as F,n as O,j as k,k as Ce,l as x,m as K,p as Ee,u as Le,o as Ne,q as Oe,v as w,x as E,y as Pe,z as Ve,A as ke,B as Re,C as $e,D as Be,E as Se,F as we,G as R,H as I,I as C,J as ee,K as te,L as ne,M,N as me,O as tn,P as ot,Q as Xe,R as pe,T as at,U as ct,V as Qe,W as nn,X as Ge,Y as ae,Z as je,_ as Ye,$ as ut,a0 as De,a1 as ln,a2 as sn}from"./vendor.e55c0f61.js";const rn=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function t(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};rn();const ft=(l={},e=window.sessionStorage)=>{const{subscribe:n,set:t,update:s}=re(""),r=()=>l,a=_=>{l=_},u=()=>e,o=_=>{if(![window.sessionStorage,window.localStorage].includes(_))throw new Error("Illegal Engine "+_);e=_},i=(_,d)=>{m(_),d=JSON.stringify(d),e.setItem(_,d),t(_)},c=_=>{m(_);const d=e.getItem(_);return d!==null&&t(_),JSON.parse(d)},f=_=>{m(_),e.removeItem(_),s(d=>(_==d&&(d=""),d))},p=()=>{e.clear(),t("")},m=_=>{if(!Object.keys(l).includes(_))throw new Error("Illegal Key: "+_);return!0};return{subscribe:n,getEngine:u,setEngine:o,setItem:i,getItem:c,removeItem:f,clear:p,getAllowed:r,setAllowed:a,length:{get length(){return e.length}}}},Te=ft();Te.setAllowed({tabata_time:0,timer_time:0});Te.setEngine(window.sessionStorage);const le=ft();le.setAllowed({timer_settings:{prep_time:5,announce_every:30,use_voice:!0,show_plank:!0,preferred_voice:null},workout:{meta:{},exercises:[],planks:[]},prev_workouts:[{}]});le.setEngine(window.localStorage);le.isStemWorkout=l=>{if(!l)return!1;const e=le.getItem("workout");return!e||!e.meta?!1:e.meta.path_stem===l};le.getBackupStem=l=>{const e=le.getItem("prev_workouts");return!e||!e.length?null:e.reduce((n,t)=>t.meta.path_stem===l?t:n,null)};const _e=re(!1),Je=re(!1),Ze={BASE_URL:window.location.origin,NAVBAR_IMG_BASE_URL:"/css/navbar",STEM_BASE_URL:"/tmp/workouts",TMP_DIR:"/tmp",DB_FILE:"/data/workout_list.xml"},on=()=>({saveWorkout:async n=>new Promise(()=>{let t=le.getItem("prev_workouts");(!t||t.length===0)&&(t=[]),t.unshift(n),t.length>3&&t.pop(),le.setItem("prev_workouts",t),Promise.resolve(!0)}),getWorkout:async n=>{let t=Ze.STEM_BASE_URL+"/"+n+".json";return fetch(new Request(t)).then(async s=>{if(s.ok){const r=await s.json();r?Promise.resolve(r):Promise.reject(r)}else Promise.reject(s)})}}),mt=on(),an=(l,e)=>new Promise(async(n,t)=>{e||(e={});const s=document.createElement("script");s.onload=a=>n(a),s.onerror=a=>t(a);for(let a in e)s.setAttribute(a,e);s.src=l;const r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(s,r)}),cn=l=>{const e=new URLSearchParams;if(l&&l.lastIndexOf("?")!==-1){let n=l.split("?");n.length>1&&(n=n[1],n.split("&").forEach(s=>{const r=s.split("=");r.length==2&&e.append(r[0],r[1])}))}return e},pt=l=>{l=Math.abs(l);const e=Math.floor(l/60),n=l%60;return{m:e,s:n}},Ke=l=>{let{m:e,s:n}=pt(l);return e.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")},_t=l=>l.replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()),un=()=>(navigator.language||navigator.userLanguage).split("-")[0],fn=(l=[],e=1)=>{if(l.length<e)return l;const n=[];for(let t=0;t<e;){const s=Math.floor(Math.random()*l.length);n.indexOf(l[s])===-1&&(n.push(l[s]),t++)}return n},mn=(l=6)=>{const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let n="";for(let t=0;t<l;t++)n+=e.charAt(Math.floor(Math.random()*e.length));return n},Ae={EXERCISE:1,PLANK:2},xe=(l=null)=>{const e=Object.preventExtensions({name:"",display_name:"",type:1,region:"",target:"",has_lr:!1,band_pos:0,band_pos_text:""});return l?Object.assign(e,l):e},et=l=>{let e=null;switch(l){case Ae.PLANK:e="planks";break;case Ae.EXERCISE:e="exercises";break}return e},qe=en(new Document,l=>{fetch(new Request(Ze.DB_FILE)).then(async e=>{if(e.ok){const n=await e.text();if(n){const s=new DOMParser().parseFromString(n,"text/xml"),r=s.querySelector("parsererror");return r?Promise.reject(r):Promise.resolve(l(s))}else return Promise.reject(n)}else return Promise.reject(e)}).catch(e=>{console.error(e)})}),dt=ge(qe,l=>{const e=[],n=l.querySelector("exercises");return n&&Array.from(n.children).forEach(t=>{e.push(Object.seal({id:t.tagName,title:_t(t.tagName.replace("_"," "))}))}),e},[]),pn=ge(qe,l=>{const e=[],n=l.querySelector("selection_rules");return n&&Array.from(n.children).forEach(t=>{const s=Array.from(t.children).map(a=>[a.tagName,parseInt(a.getAttribute("select"))]),r={id:t.tagName,title:_t(t.tagName.replace("_"," ")),tabatas:parseInt(t.getAttribute("tabatas")),rest_time:parseInt(t.getAttribute("rest_time")),time_on:parseInt(t.getAttribute("time_on")),time_off:parseInt(t.getAttribute("time_off")),prep_time:parseInt(t.getAttribute("prep_time"))||10,with_equipment:null,has_plank:!0,path_stem:mn(),rules:Object.fromEntries(s)};e.push(Object.seal(r))}),e},[]),_n=ge(qe,l=>{const e={},n=l.querySelector("band_legends");return n&&Array.from(n.children).forEach(t=>{e[t.getAttribute("id")]=t.getAttribute("title")}),e},{}),gt=()=>{const{subscribe:l,set:e,update:n}=re({id:null,title:null,tabatas:3,prep_time:10,time_on:40,time_off:15,rest_time:60,with_equipment:!0,has_plank:!0,path_stem:null,rules:{}});return{subscribe:l,set:u=>("rules"in u&&dt.subscribe(i=>{if(i.length){const c=Object.fromEntries(i.map(f=>[f.id,0]));u.rules=Object.assign(c,u.rules)}})(),e(u)),update:n,updateRule:(u,o)=>{let i=!1;return n(c=>(o&&!isNaN(o)&&(c.rules[u]=o),i=!0,c)),i},clone:()=>{let u=null;n(i=>(u=Object.fromEntries(Object.entries(i)),u.rules=Object.fromEntries(Object.entries(i.rules)),i));const o=gt();return o.set(u),o},getTotalTime:(u=0)=>{let o=0;return n(i=>((!u||isNaN(u))&&(u=Object.entries(i.rules).reduce((c,f)=>c+(isNaN(f[1])?0:f[1]),0)),o+=i.prep_time,o+=i.time_on*u*i.tabatas,o+=i.time_off*(u-1)*i.tabatas,o+=i.rest_time*(i.tabatas-1),i)),isNaN(o)?0:o}}},dn=()=>{const{subscribe:l,set:e,update:n}=re({meta:null,exercises:[],planks:[]}),t=()=>{const c={},f=ve(be),p=ve(qe),m=ve(Ue),_=ve(Fe);c.meta={tabatas:f.tabatas,prep_time:f.prep_time,time_on:f.time_on,time_off:f.time_off,rest_time:f.rest_time,with_equipment:_,has_plank:m,path_stem:f.path_stem,rules:f.rules},c.exercises=[];for(let d in f.rules){if(!parseInt(f.rules[d]))continue;const S=p.querySelector("exercises > "+d).children;c.exercises=c.exercises.concat(o(S,f.rules[d],!1))}if(_){const d=Math.random()>.5?1:-1;c.exercises=c.exercises.sort((S,A)=>(S.band_pos-A.band_pos)*d)}if(c.planks=[],m){const d=p.querySelector("planks");d&&(c.planks=o(d.children,parseInt(d.getAttribute("select")),!0))}n(()=>c)},s=()=>(n(c=>(mt.saveWorkout(c),le.setItem("workout",c),c)),!0),r=(c=-1,f=Ae.EXERCISE,p="replace")=>{let m=!1;const _=ve(be);n(d=>{const S=et(f),A=d[S][c];switch(p){case"delete":i(c,d[S]),d[S]=d[S],f!==Ae.PLANK&&(_.rules[A.region]-=1,m=!0);break;case"replace":const $=u(c,d[S],f);$.length&&i(c,d[S],$);break}return d}),m&&be.set(_)},a=(c=-1,f=-1,p=Ae.EXERCISE)=>{c<0||n(m=>{const _=et(p),d=m[_].length;f==-1?f=d-1:f==d&&(f=0);const S=m[_].splice(f,1,m[_][c]);return m[_].splice(c,1,...S),m})},u=(c,f,p)=>{const m=f[c];if(!m)return[];const _=f.filter($=>$.region===m.region).map($=>$.name),d=ve(qe);let S=et(p);S=="exercises"&&(S+=" > "+m.region);let A=d.querySelector(S);if(A){const $=Array.from(A.children).filter(P=>!_.includes(P.getAttribute("name")));return o($,1,p==Ae.PLANK)}return[]},o=(c,f,p)=>{const m=ve(_n),_=ve(Fe);let d=c instanceof Array?c:Array.from(c);_===!1&&(d=d.filter(A=>parseInt(A.getAttribute("band_pos"))==0)),d.length>f&&(d=fn(d,f));let S=[];for(let A in d){const $=Boolean(parseInt(d[A].getAttribute("has_lr"))),P=d[A].getAttribute("name");let y=xe();y.type=p?2:1,y.name=P,y.display_name=P+($?" (Left)":""),y.region=d[A].parentElement.tagName,y.target=d[A].getAttribute("target"),y.has_lr=$,y.band_pos=parseInt(d[A].getAttribute("band_pos")),y.band_pos_text=m[d[A].getAttribute("band_pos")],$&&(S.push(y),y=Object.assign(xe(),y),y.display_name=P+" (Right)"),S.push(y)}return S},i=(c=-1,f=[],p=[])=>{const m=f[c],_=m.has_lr===!0?f.findIndex(d=>d.name==m.name&&d!==m):-1;_>-1&&(f.splice(_,1),c=f.indexOf(m)),p.length?f.splice(c,1,...p):f.splice(c,1)};return{subscribe:l,set:e,update:n,generate:t,alterExercise:r,swapExercise:a,save:s}},be=gt(),Fe=re(!0),Ue=re(!0),ce=dn(),bt=()=>{const{subscribe:l,set:e,update:n}=re(0);let t=null;const s=()=>{i()||(t=setInterval(()=>{n(f=>f+1)},1e3))},r=()=>{i()&&(clearInterval(t),t=null)},a=()=>{n(f=>f*0)},u=f=>pt(f),o=f=>Ke(f),i=()=>t!==null;return{subscribe:l,start:s,stop:r,reset:a,set:(f=0)=>{e(isNaN(f)?0:f)},minSecs:u,asClock:o,isTicking:i}},gn=()=>{let l={},e=null;const n=Object.preventExtensions({autoplay:0,cc_lang_pref:un(),cc_load_policy:0,color:"red",controls:1,disablekb:0,enablejsapi:1,fs:1,hl:navigator.language||navigator.userLanguage,iv_load_policy:3,loop:0,modestbranding:1,origin:window.location.origin,widget_referrer:window.location.href,playsinline:!0}),t=Object.preventExtensions({READY:"onReady",STATE_CHANGE:"onStateChange",PLAYBACK_QUALITY_CHANGE:"onPlaybackQualityChange",PLAYBACK_RATE_CHANGE:"onPlaybackRateChange",APICHANGE:"onApiChange",ERROR:"onError"}),s=new Promise(async c=>{typeof l.addEventListener=="function"?c(l):(window.onYouTubeIframeAPIReady=()=>{l=new window.YT.Player(document.createElement("div"),{playerVars:n}),c(l)},an("https://www.youtube.com/iframe_api"))});return{loader:s,mount:c=>{s.then(f=>{typeof c=="string"&&(c=document.getElementById(c.toString())),c.parentElement.replaceChild(f.getIframe(),c)})},destroy:()=>{typeof l.addEventListener=="function"&&(l.destroy(),l={})},addEventListener:(c,f)=>{if(!Object.values(t).includes(c))throw new TypeError(c+" is not a valid player event");s.then(p=>{p.addEventListener(c,f)})},removeEventListener:(c,f)=>{if(typeof l.removeEventListener=="function"){if(!Object.values(t).includes(c))throw new TypeError(c+" is not a valid player event");l.removeEventListener(c,f)}},fadeVolumeTo:async(c=0)=>new Promise(f=>{if(typeof l.addEventListener=="function")if(isNaN(c)&&(c=0),l.getPlayerState()==window.YT.PlayerState.PLAYING){let p=5;const m=l.getVolume();m==c&&f(m),c<m&&(p*=-1),isNaN(e)||clearInterval(e),e=setInterval(()=>{const _=l.getVolume();p>0&&_>=c||p<0&&_<=c?(clearInterval(e),e=null,l.setVolume(c),f(_)):l.setVolume(_+p)},60)}else l.setVolume(c),f(c);else f(0)}),setSize:(c="100%",f="100%")=>l.setSize(c,f),playVideo:()=>l.playVideo(),pauseVideo:()=>l.pauseVideo(),stopVideo:()=>l.stopVideo(),seekTo:(c=0,f=!0)=>l.seekTo(c,f),getPlayerState:()=>l.getPlayerState(),getDuration:()=>l.getDuration(),getVideoUrl:()=>l.getVideoUrl(),getPlaylist:()=>l.getPlaylist(),getPlaylistIndex:()=>l.getPlaylistIndex(),getCurrentTime:()=>l.getCurrentTime(),getVideoStartBytes:()=>l.getVideoStartBytes(),getVideoBytesLoaded:()=>l.getVideoBytesLoaded(),getVideoBytesTotal:()=>l.getVideoBytesTotal(),nextVideo:()=>l.nextVideo(),previousVideo:()=>l.previousVideo(),playVideoAt:c=>l.playVideoAt(c),mute:()=>l.mute(),unmute:()=>l.unmute(),isMuted:()=>l.isMuted(),getVolume:()=>l.getVolume(),setVolume:(c=100)=>l.setVolume(c),getSphericalProperties:()=>l.getSphericalProperties(),setSphericalProperties:c=>l.setSphericalProperties(c),getPlaybackRate:()=>l.getPlaybackRate(),setPlaybackRate:(c=1)=>l.setPlaybackRate(c),getAvailablePlaybackRates:()=>l.getAvailablePlaybackRates(),setLoop:(c=!1)=>l.setLoop(c),setShuffle:(c=!1)=>l.setShuffle(c),getVideoLoadedFraction:()=>l.getVideoLoadedFraction(),getIframe:()=>l.getIframe(),get playerVars(){return n},set playerVars(c){if(typeof l.addEventListener=="function")throw new Error("PlayerVars cannot be set after the player has loaded");Object.entries(c).forEach(([f,p])=>n[f]=p)},READY:t.READY,STATE_CHANGE:t.STATE_CHANGE,PLAYBACK_QUALITY_CHANGE:t.PLAYBACK_QUALITY_CHANGE,PLAYBACK_RATE_CHANGE:t.PLAYBACK_RATE_CHANGE,APICHANGE:t.APICHANGE,ERROR:t.ERROR}},he=gn(),bn=()=>{let l=null,e=!1;const n=()=>"speechSynthesis"in window,t=(i=null)=>new Promise(async(c,f)=>{if(n()){const p=window.speechSynthesis,m=()=>{p.removeEventListener("voiceschanged",m),c(_(p.getVoices(),i))},_=(S,A)=>A?S.filter($=>$.lang.replace("_","-").substring(0,A.length)===A):S,d=p.getVoices();d.length?c(_(d,i)):p.addEventListener("voiceschanged",m)}else f(new Error("Speech not supported on this platform."))}),s=i=>{const c=r(i);c&&window.speechSynthesis.speak(c)},r=i=>{if(n()){const c=new SpeechSynthesisUtterance;return c.text=i,c.volume=1,c.rate=1,c.pitch=1,l&&(c.voice=l,c.lang=l.lang),e&&(c.onstart=a,c.onresume=a,c.onend=u,c.onpause=u),c}},a=()=>{he.fadeVolumeTo(10)},u=()=>{he.fadeVolumeTo(100)},o=i=>{t().then(async c=>{i&&(l=c.reduce((f,p)=>"name"in p&&p.name===i?p:f,null))})};return{speak:s,getVoices:t,isSupported:n,get defaultVoice(){return l},set defaultVoice(i){o(i)},get controlYTPlayer(){return e},set controlYTPlayer(i){e=i}}},ie=bn();function hn(l){let e,n,t,s,r,a;return{c(){e=h("div"),n=h("span"),t=B(l[0]),s=T(),r=h("span"),a=B(l[1]),g(n,"class","label"),g(r,"class","value"),g(e,"class","timer-counter")},m(u,o){v(u,e,o),b(e,n),b(n,t),b(e,s),b(e,r),b(r,a)},p(u,[o]){o&1&&F(t,u[0]),o&2&&F(a,u[1])},i:O,o:O,d(u){u&&k(e)}}}function vn(l,e,n){let{label:t=""}=e,{value:s=""}=e;return l.$$set=r=>{"label"in r&&n(0,t=r.label),"value"in r&&n(1,s=r.value)},[t,s]}class We extends H{constructor(e){super();z(this,e,vn,hn,X,{label:0,value:1})}}function kn(l){let e,n,t,s,r;const a=l[3].default,u=Ce(a,l,l[2],null);return{c(){e=h("form"),n=h("button"),u&&u.c(),g(n,"type","submit"),g(n,"class","round-button svelte-1ylr70"),x(n,"active",l[0])},m(o,i){v(o,e,i),b(e,n),u&&u.m(n,null),t=!0,s||(r=K(e,"submit",Ee(l[1])),s=!0)},p(o,[i]){u&&u.p&&(!t||i&4)&&Le(u,a,o,o[2],t?Oe(a,o[2],i,null):Ne(o[2]),null),i&1&&x(n,"active",o[0])},i(o){t||(w(u,o),t=!0)},o(o){E(u,o),t=!1},d(o){o&&k(e),u&&u.d(o),s=!1,r()}}}function $n(l,e,n){let{$$slots:t={},$$scope:s}=e;const r=Pe(),a=i=>{u(),r("click",{active:o,toggle:u,currentTarget:i.currentTarget})},u=()=>{n(0,o=!o)};let{active:o=!1}=e;return l.$$set=i=>{"active"in i&&n(0,o=i.active),"$$scope"in i&&n(2,s=i.$$scope)},[o,a,s,t]}class ht extends H{constructor(e){super();z(this,e,$n,kn,X,{active:0})}}function wn(l){let e,n,t,s,r,a=[{disabled:l[2]},{type:"button"},{class:"round-button icon-button"},l[4]],u={};for(let o=0;o<a.length;o+=1)u=Ve(u,a[o]);return{c(){e=h("button"),n=h("img"),ke(n.src,t=l[0])||g(n,"src",t),g(n,"alt",l[1]),Re(n,"min-width",l[3]),Re(n,"min-height",l[3]),$e(e,u)},m(o,i){v(o,e,i),b(e,n),e.autofocus&&e.focus(),s||(r=[K(e,"click",l[5]),K(e,"dblclick",l[6]),K(e,"mouseenter",l[7]),K(e,"mouseleave",l[8])],s=!0)},p(o,[i]){i&1&&!ke(n.src,t=o[0])&&g(n,"src",t),i&2&&g(n,"alt",o[1]),i&8&&Re(n,"min-width",o[3]),i&8&&Re(n,"min-height",o[3]),$e(e,u=Be(a,[i&4&&{disabled:o[2]},{type:"button"},{class:"round-button icon-button"},i&16&&o[4]]))},i:O,o:O,d(o){o&&k(e),s=!1,Se(r)}}}function yn(l,e,n){let{src:t}=e,{alt:s=""}=e,{disabled:r=!1}=e,{min_dim:a="24px"}=e,{data:u={}}=e;function o(p){we.call(this,l,p)}function i(p){we.call(this,l,p)}function c(p){we.call(this,l,p)}function f(p){we.call(this,l,p)}return l.$$set=p=>{"src"in p&&n(0,t=p.src),"alt"in p&&n(1,s=p.alt),"disabled"in p&&n(2,r=p.disabled),"min_dim"in p&&n(3,a=p.min_dim),"data"in p&&n(4,u=p.data)},[t,s,r,a,u,o,i,c,f]}class ue extends H{constructor(e){super();z(this,e,yn,wn,X,{src:0,alt:1,disabled:2,min_dim:3,data:4})}}function En(l){let e,n,t,s,r;return n=new ue({props:{src:"/css/icons/reset.svg",alt:"Reset"}}),n.$on("click",l[2]),s=new ue({props:{src:"/css/icons/gear-fill.svg",alt:"Timer Settings"}}),s.$on("click",l[1]),{c(){e=h("div"),R(n.$$.fragment),t=T(),R(s.$$.fragment),g(e,"class","svelte-k909ad")},m(a,u){v(a,e,u),I(n,e,null),b(e,t),I(s,e,null),r=!0},p:O,i(a){r||(w(n.$$.fragment,a),w(s.$$.fragment,a),r=!0)},o(a){E(n.$$.fragment,a),E(s.$$.fragment,a),r=!1},d(a){a&&k(e),C(n),C(s)}}}function Sn(l){const e=Pe();return[e,()=>{_e.set(!0),e("open")},()=>e("reset")]}class tt extends H{constructor(e){super();z(this,e,Sn,En,X,{})}}const Tn=()=>{const{subscribe:l,set:e}=re({}),n="timer_settings",t={prep_time:5,announce_every:30,use_voice:!0,show_plank:!0,preferred_voice:null},s=a=>{le.setItem(n,a),e(a)},r=le.getItem(n);return e(Object.preventExtensions(r||t)),{subscribe:l,set:s}};var fe=Tn();function An(l){let e,n,t,s,r,a;return{c(){e=h("div"),n=h("input"),t=T(),s=h("span"),g(n,"type","checkbox"),g(n,"name",l[1]),g(n,"id",l[1]),g(s,"class","slider round"),g(e,"class","switch")},m(u,o){v(u,e,o),b(e,n),n.checked=l[0],b(e,t),b(e,s),r||(a=[K(n,"change",l[3]),K(n,"change",l[2]),K(s,"click",l[4])],r=!0)},p(u,[o]){o&2&&g(n,"name",u[1]),o&2&&g(n,"id",u[1]),o&1&&(n.checked=u[0])},i:O,o:O,d(u){u&&k(e),r=!1,Se(a)}}}function Pn(l,e,n){const t=Pe(),s=i=>{t("change",i.currentTarget.checked)};let{name:r=void 0}=e,{checked:a=!1}=e;function u(){a=this.checked,n(0,a)}const o=()=>{n(0,a=!a)};return l.$$set=i=>{"name"in i&&n(1,r=i.name),"checked"in i&&n(0,a=i.checked)},[a,r,s,u,o]}class vt extends H{constructor(e){super();z(this,e,Pn,An,X,{name:1,checked:0})}}function Rn(l){let e,n,t,s,r,a,u;t=new ue({props:{src:"/css/icons/cross.svg",alt:"Close Settings",min_dim:".9rem"}}),t.$on("click",l[4]);const o=l[2].default,i=Ce(o,l,l[1],null);return{c(){e=h("form"),n=h("div"),R(t.$$.fragment),s=T(),i&&i.c(),g(n,"class","close-button"),g(e,"class","settings-form")},m(c,f){v(c,e,f),b(e,n),I(t,n,null),b(e,s),i&&i.m(e,null),r=!0,a||(u=K(e,"submit",Ee(l[3])),a=!0)},p(c,[f]){i&&i.p&&(!r||f&2)&&Le(i,o,c,c[1],r?Oe(o,c[1],f,null):Ne(c[1]),null)},i(c){r||(w(t.$$.fragment,c),w(i,c),r=!0)},o(c){E(t.$$.fragment,c),E(i,c),r=!1},d(c){c&&k(e),C(t),i&&i.d(c),a=!1,u()}}}function In(l,e,n){let{$$slots:t={},$$scope:s}=e;const r=Pe();function a(o){we.call(this,l,o)}const u=o=>r("close",o);return l.$$set=o=>{"$$scope"in o&&n(1,s=o.$$scope)},[r,s,t,a,u]}class nt extends H{constructor(e){super();z(this,e,In,Rn,X,{})}}function Cn(l){let e;return{c(){e=h("div"),e.innerHTML=`<div class="double-bounce1"></div> 
            <div class="double-bounce2"></div>`,g(e,"class","spinner")},m(n,t){v(n,e,t)},d(n){n&&k(e)}}}function Ln(l){let e,n,t,s,r;const a=l[2].default,u=Ce(a,l,l[1],null),o=u||Cn();return{c(){e=h("fieldset"),n=h("legend"),t=B(l[0]),s=T(),o&&o.c()},m(i,c){v(i,e,c),b(e,n),b(n,t),b(e,s),o&&o.m(e,null),r=!0},p(i,[c]){(!r||c&1)&&F(t,i[0]),u&&u.p&&(!r||c&2)&&Le(u,a,i,i[1],r?Oe(a,i[1],c,null):Ne(i[1]),null)},i(i){r||(w(o,i),r=!0)},o(i){E(o,i),r=!1},d(i){i&&k(e),o&&o.d(i)}}}function Nn(l,e,n){let{$$slots:t={},$$scope:s}=e,{title:r=null}=e;return l.$$set=a=>{"title"in a&&n(0,r=a.title),"$$scope"in a&&n(1,s=a.$$scope)},[r,s,t]}class He extends H{constructor(e){super();z(this,e,Nn,Ln,X,{title:0})}}function kt(l,e,n){const t=l.slice();return t[11]=e[n],t}function $t(l){let e,n;return e=new nt({props:{$$slots:{default:[Kn]},$$scope:{ctx:l}}}),e.$on("close",l[2]),{c(){R(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,s){const r={};s&32771&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function On(l){let e,n,t,s,r,a,u,o;function i(p){l[8](p)}let c={name:"use_voice"};l[1].use_voice!==void 0&&(c.checked=l[1].use_voice),s=new vt({props:c}),at.push(()=>ct(s,"checked",i));let f=l[1].use_voice&&wt(l);return{c(){e=h("li"),n=h("label"),n.textContent="Use Voice?",t=T(),R(s.$$.fragment),a=T(),f&&f.c(),u=ee(),g(n,"for","use_voice")},m(p,m){v(p,e,m),b(e,n),b(e,t),I(s,e,null),v(p,a,m),f&&f.m(p,m),v(p,u,m),o=!0},p(p,m){const _={};!r&&m&2&&(r=!0,_.checked=p[1].use_voice,ot(()=>r=!1)),s.$set(_),p[1].use_voice?f?f.p(p,m):(f=wt(p),f.c(),f.m(u.parentNode,u)):f&&(f.d(1),f=null)},i(p){o||(w(s.$$.fragment,p),o=!0)},o(p){E(s.$$.fragment,p),o=!1},d(p){p&&k(e),C(s),p&&k(a),f&&f.d(p),p&&k(u)}}}function wt(l){let e,n={ctx:l,current:null,token:null,hasCatch:!0,pending:jn,then:Bn,catch:Vn,value:10,error:14};return Qe(ie.getVoices("en"),n),{c(){e=h("li"),n.block.c()},m(t,s){v(t,e,s),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(t,s){l=t,Xe(n,l,s)},d(t){t&&k(e),n.block.d(),n.token=null,n=null}}}function Vn(l){let e,n=l[14]+"",t;return{c(){e=h("p"),t=B(n)},m(s,r){v(s,e,r),b(e,t)},p:O,d(s){s&&k(e)}}}function Bn(l){let e,n,t,s,r,a=l[10],u=[];for(let o=0;o<a.length;o+=1)u[o]=yt(kt(l,a,o));return{c(){e=h("label"),e.textContent="Preferred Voice",n=T(),t=h("select");for(let o=0;o<u.length;o+=1)u[o].c();g(e,"for","preferred_voice"),g(t,"name","preferred_voice"),g(t,"id","preferred_voice"),l[1].preferred_voice===void 0&&nn(()=>l[9].call(t))},m(o,i){v(o,e,i),v(o,n,i),v(o,t,i);for(let c=0;c<u.length;c+=1)u[c].m(t,null);Ge(t,l[1].preferred_voice),s||(r=K(t,"change",l[9]),s=!0)},p(o,i){if(i&0){a=o[10];let c;for(c=0;c<a.length;c+=1){const f=kt(o,a,c);u[c]?u[c].p(f,i):(u[c]=yt(f),u[c].c(),u[c].m(t,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=a.length}i&2&&Ge(t,o[1].preferred_voice)},d(o){o&&k(e),o&&k(n),o&&k(t),ae(u,o),s=!1,r()}}}function yt(l){let e,n=l[11].name+"",t,s;return{c(){e=h("option"),t=B(n),e.__value=s=l[11].name,e.value=e.__value},m(r,a){v(r,e,a),b(e,t)},p:O,d(r){r&&k(e)}}}function jn(l){let e;return{c(){e=h("p"),e.textContent="Loading"},m(n,t){v(n,e,t)},p:O,d(n){n&&k(e)}}}function Dn(l){let e,n,t,s,r,a,u,o,i,c,f,p,m,_,d,S,A,$,P,y,L,D,Z,U,q,se,j=ie.isSupported(),Q,oe,N,W=j&&On(l);return{c(){e=h("ul"),n=h("li"),t=h("label"),t.textContent="Rounds",s=T(),r=h("input"),a=T(),u=h("li"),o=h("label"),o.textContent="Prep Time (seconds)",i=T(),c=h("input"),f=T(),p=h("li"),m=h("label"),m.textContent="Per Exercise (seconds)",_=T(),d=h("input"),S=T(),A=h("li"),$=h("label"),$.textContent="Rest Time (seconds)",P=T(),y=h("input"),L=T(),D=h("li"),Z=h("label"),Z.textContent="Break Time (seconds)",U=T(),q=h("input"),se=T(),W&&W.c(),g(t,"for","tabatas"),g(r,"type","number"),g(r,"name","tabatas"),g(r,"id","tabatas"),g(r,"min","1"),g(r,"max","5"),g(o,"for","prep_time"),g(c,"type","number"),g(c,"name","prep_time"),g(c,"id","prep_time"),g(c,"min","0"),g(c,"max","240"),g(m,"for","time_on"),g(d,"type","number"),g(d,"name","time_on"),g(d,"id","time_on"),g(d,"min","10"),g(d,"max","120"),g($,"for","time_off"),g(y,"type","number"),g(y,"name","time_off"),g(y,"id","time_off"),g(y,"min","0"),g(y,"max","120"),g(Z,"for","rest_time"),g(q,"type","number"),g(q,"name","rest_time"),g(q,"id","rest_time"),g(q,"min","0"),g(q,"max","240")},m(V,Y){v(V,e,Y),b(e,n),b(n,t),b(n,s),b(n,r),pe(r,l[0].meta.tabatas),b(e,a),b(e,u),b(u,o),b(u,i),b(u,c),pe(c,l[0].meta.prep_time),b(e,f),b(e,p),b(p,m),b(p,_),b(p,d),pe(d,l[0].meta.time_on),b(e,S),b(e,A),b(A,$),b(A,P),b(A,y),pe(y,l[0].meta.time_off),b(e,L),b(e,D),b(D,Z),b(D,U),b(D,q),pe(q,l[0].meta.rest_time),b(e,se),W&&W.m(e,null),Q=!0,oe||(N=[K(r,"input",l[3]),K(c,"input",l[4]),K(d,"input",l[5]),K(y,"input",l[6]),K(q,"input",l[7])],oe=!0)},p(V,Y){Y&1&&me(r.value)!==V[0].meta.tabatas&&pe(r,V[0].meta.tabatas),Y&1&&me(c.value)!==V[0].meta.prep_time&&pe(c,V[0].meta.prep_time),Y&1&&me(d.value)!==V[0].meta.time_on&&pe(d,V[0].meta.time_on),Y&1&&me(y.value)!==V[0].meta.time_off&&pe(y,V[0].meta.time_off),Y&1&&me(q.value)!==V[0].meta.rest_time&&pe(q,V[0].meta.rest_time),j&&W.p(V,Y)},i(V){Q||(w(W),Q=!0)},o(V){E(W),Q=!1},d(V){V&&k(e),W&&W.d(),oe=!1,Se(N)}}}function Kn(l){let e,n;return e=new He({props:{title:"Tabata Settings",$$slots:{default:[Dn]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,s){const r={};s&32771&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function qn(l){let e,n,t="meta"in l[0]&&$t(l);return{c(){t&&t.c(),e=ee()},m(s,r){t&&t.m(s,r),v(s,e,r),n=!0},p(s,[r]){"meta"in s[0]?t?(t.p(s,r),r&1&&w(t,1)):(t=$t(s),t.c(),w(t,1),t.m(e.parentNode,e)):t&&(te(),E(t,1,1,()=>{t=null}),ne())},i(s){n||(w(t),n=!0)},o(s){E(t),n=!1},d(s){t&&t.d(s),s&&k(e)}}}function Wn(l,e,n){let t,s;M(l,de,m=>n(0,t=m)),M(l,fe,m=>n(1,s=m));const r=()=>{_e.set(!1)};function a(){t.meta.tabatas=me(this.value),de.set(t)}function u(){t.meta.prep_time=me(this.value),de.set(t)}function o(){t.meta.time_on=me(this.value),de.set(t)}function i(){t.meta.time_off=me(this.value),de.set(t)}function c(){t.meta.rest_time=me(this.value),de.set(t)}function f(m){l.$$.not_equal(s.use_voice,m)&&(s.use_voice=m,fe.set(s))}function p(){s.preferred_voice=tn(this),fe.set(s)}return[t,s,r,a,u,o,i,c,f,p]}class Mn extends H{constructor(e){super();z(this,e,Wn,qn,X,{})}}function Et(l,e,n){const t=l.slice();return t[29]=e[n],t}function Gn(l){let e,n;return{c(){e=h("img"),ke(e.src,n="/css/icons/power-outline.svg")||g(e,"src",n),g(e,"alt","Start!"),g(e,"class","loading svelte-1bidnc5")},m(t,s){v(t,e,s)},p:O,d(t){t&&k(e)}}}function Yn(l){let e;return{c(){e=B(l[10])},m(n,t){v(n,e,t)},p(n,t){t[0]&1024&&F(e,n[10])},d(n){n&&k(e)}}}function Fn(l){let e,n;return{c(){e=h("img"),ke(e.src,n="/css/icons/check-circle.svg")||g(e,"src",n),g(e,"alt","Done!"),g(e,"class","loading svelte-1bidnc5")},m(t,s){v(t,e,s)},p:O,d(t){t&&k(e)}}}function Un(l){let e,n;function t(a,u){return e==null&&(e=!!ye.isComplete()),e?Fn:a[6]>0?Yn:Gn}let s=t(l),r=s(l);return{c(){r.c(),n=ee()},m(a,u){r.m(a,u),v(a,n,u)},p(a,u){s===(s=t(a))&&r?r.p(a,u):(r.d(1),r=s(a),r&&(r.c(),r.m(n.parentNode,n)))},d(a){r.d(a),a&&k(n)}}}function Hn(l){let e,n,t,s;e=new tt({}),e.$on("reset",l[13]),e.$on("open",l[12]);function r(o,i){return o[11]?Qn:Xn}let a=r(l),u=a(l);return{c(){R(e.$$.fragment),n=T(),u.c(),t=ee()},m(o,i){I(e,o,i),v(o,n,i),u.m(o,i),v(o,t,i),s=!0},p(o,i){a===(a=r(o))&&u?u.p(o,i):(u.d(1),u=a(o),u&&(u.c(),u.m(t.parentNode,t)))},i(o){s||(w(e.$$.fragment,o),s=!0)},o(o){E(e.$$.fragment,o),s=!1},d(o){C(e,o),o&&k(n),u.d(o),o&&k(t)}}}function zn(l){let e,n;return e=new Mn({}),{c(){R(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p:O,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function Xn(l){let e,n,t,s,r,a;return{c(){e=h("div"),n=h("button"),n.textContent="Create New()",t=T(),s=h("button"),s.textContent="Get Random()",g(n,"class","default-button"),g(s,"class","default-button"),g(e,"class","button-row svelte-1bidnc5")},m(u,o){v(u,e,o),b(e,n),b(e,t),b(e,s),r||(a=[K(n,"click",l[17]),K(s,"click",l[18])],r=!0)},p:O,d(u){u&&k(e),r=!1,Se(a)}}}function Qn(l){let e;function n(r,a){return r[0].length?Zn:Jn}let t=n(l),s=t(l);return{c(){s.c(),e=ee()},m(r,a){s.m(r,a),v(r,e,a)},p(r,a){t===(t=n(r))&&s?s.p(r,a):(s.d(1),s=t(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){s.d(r),r&&k(e)}}}function Jn(l){let e;return{c(){e=h("div"),e.innerHTML=`<div class="spinner"><div class="double-bounce1"></div> 
                <div class="double-bounce2"></div></div>`,g(e,"class","loading-container svelte-1bidnc5")},m(n,t){v(n,e,t)},p:O,d(n){n&&k(e)}}}function Zn(l){let e,n,t,s,r,a=l[0],u=[];for(let o=0;o<a.length;o+=1)u[o]=St(Et(l,a,o));return{c(){e=h("div"),n=h("ol");for(let o=0;o<u.length;o+=1)u[o].c();t=T(),s=h("div"),r=B(l[4]),g(n,"id","routine_scroll"),g(e,"class","scroll-row")},m(o,i){v(o,e,i),b(e,n);for(let c=0;c<u.length;c+=1)u[c].m(n,null);v(o,t,i),v(o,s,i),b(s,r)},p(o,i){if(i[0]&1){a=o[0];let c;for(c=0;c<a.length;c+=1){const f=Et(o,a,c);u[c]?u[c].p(f,i):(u[c]=St(f),u[c].c(),u[c].m(n,null))}for(;c<u.length;c+=1)u[c].d(1);u.length=a.length}i[0]&16&&F(r,o[4])},d(o){o&&k(e),ae(u,o),o&&k(t),o&&k(s)}}}function xn(l){let e,n,t;return{c(){e=h("img"),ke(e.src,n="/css/icons/meditation.png")||g(e,"src",n),g(e,"alt",t=l[29].name)},m(s,r){v(s,e,r)},p(s,r){r[0]&1&&t!==(t=s[29].name)&&g(e,"alt",t)},d(s){s&&k(e)}}}function el(l){let e,n,t;return{c(){e=h("img"),ke(e.src,n="/css/icons/panda.png")||g(e,"src",n),g(e,"alt",t=l[29].name)},m(s,r){v(s,e,r)},p(s,r){r[0]&1&&t!==(t=s[29].name)&&g(e,"alt",t)},d(s){s&&k(e)}}}function tl(l){let e,n,t;return{c(){e=h("img"),ke(e.src,n="/css/icons/prepare.png")||g(e,"src",n),g(e,"alt",t=l[29].name)},m(s,r){v(s,e,r)},p(s,r){r[0]&1&&t!==(t=s[29].name)&&g(e,"alt",t)},d(s){s&&k(e)}}}function nl(l){let e,n=l[29].target+"",t,s,r,a,u=l[29].band_pos_text+"",o;return{c(){e=h("span"),t=B(n),s=T(),r=h("span"),a=B("Band: "),o=B(u)},m(i,c){v(i,e,c),b(e,t),v(i,s,c),v(i,r,c),b(r,a),b(r,o)},p(i,c){c[0]&1&&n!==(n=i[29].target+"")&&F(t,n),c[0]&1&&u!==(u=i[29].band_pos_text+"")&&F(o,u)},d(i){i&&k(e),i&&k(s),i&&k(r)}}}function St(l){let e,n,t,s=(l[29].display_name||l[29].name)+"",r,a,u;function o(f,p){if(f[29].type===J.WORK)return nl;if(f[29].type===J.PREPARE)return tl;if(f[29].type===J.REST)return el;if(f[29].type===J.BREAK)return xn}let i=o(l),c=i&&i(l);return{c(){e=h("li"),n=h("div"),t=h("h6"),r=B(s),a=T(),c&&c.c(),u=T(),g(n,"class","exercise-info"),x(n,"completed",l[29].completed)},m(f,p){v(f,e,p),b(e,n),b(n,t),b(t,r),b(n,a),c&&c.m(n,null),b(e,u)},p(f,p){p[0]&1&&s!==(s=(f[29].display_name||f[29].name)+"")&&F(r,s),i===(i=o(f))&&c?c.p(f,p):(c&&c.d(1),c=i&&i(f),c&&(c.c(),c.m(n,null))),p[0]&1&&x(n,"completed",f[29].completed)},d(f){f&&k(e),c&&c.d()}}}function ll(l){let e,n,t,s,r,a,u,o,i,c,f,p,m,_,d,S;t=new We({props:{label:"Elapsed",value:l[15].asClock(l[6])}}),r=new We({props:{label:"Remaining",value:l[15].asClock(l[5]-l[6])}}),u=new We({props:{label:"Cycles",value:l[2].toString()+"/"+l[8].length.toString()}}),i=new We({props:{label:"Tabatas",value:l[3].toString()+"/"+l[9].tabatas}}),f=new ht({props:{$$slots:{default:[Un]},$$scope:{ctx:l}}}),f.$on("click",l[14]);const A=[zn,Hn],$=[];function P(y,L){return y[7]?0:1}return m=P(l),_=$[m]=A[m](l),{c(){e=h("div"),n=h("div"),R(t.$$.fragment),s=T(),R(r.$$.fragment),a=T(),R(u.$$.fragment),o=T(),R(i.$$.fragment),c=T(),R(f.$$.fragment),p=T(),_.c(),d=ee(),g(n,"class","counters svelte-1bidnc5"),g(e,"class","clock-container svelte-1bidnc5")},m(y,L){v(y,e,L),b(e,n),I(t,n,null),b(n,s),I(r,n,null),b(n,a),I(u,n,null),b(n,o),I(i,n,null),b(e,c),I(f,e,null),v(y,p,L),$[m].m(y,L),v(y,d,L),S=!0},p(y,L){const D={};L[0]&64&&(D.value=y[15].asClock(y[6])),t.$set(D);const Z={};L[0]&96&&(Z.value=y[15].asClock(y[5]-y[6])),r.$set(Z);const U={};L[0]&260&&(U.value=y[2].toString()+"/"+y[8].length.toString()),u.$set(U);const q={};L[0]&520&&(q.value=y[3].toString()+"/"+y[9].tabatas),i.$set(q);const se={};L[0]&1088|L[1]&2&&(se.$$scope={dirty:L,ctx:y}),f.$set(se);let j=m;m=P(y),m===j?$[m].p(y,L):(te(),E($[j],1,1,()=>{$[j]=null}),ne(),_=$[m],_?_.p(y,L):(_=$[m]=A[m](y),_.c()),w(_,1),_.m(d.parentNode,d))},i(y){S||(w(t.$$.fragment,y),w(r.$$.fragment,y),w(u.$$.fragment,y),w(i.$$.fragment,y),w(f.$$.fragment,y),w(_),S=!0)},o(y){E(t.$$.fragment,y),E(r.$$.fragment,y),E(u.$$.fragment,y),E(i.$$.fragment,y),E(f.$$.fragment,y),E(_),S=!1},d(y){y&&k(e),C(t),C(r),C(u),C(i),C(f),y&&k(p),$[m].d(y),y&&k(d)}}}function sl(l,e,n){let t,s,r,a,u,o,i,c,f;M(l,ye,N=>n(0,s=N)),M(l,fe,N=>n(22,a=N)),M(l,_e,N=>n(7,u=N)),M(l,rs,N=>n(8,o=N)),M(l,ss,N=>n(9,i=N)),M(l,rt,N=>n(11,f=N)),_e.set(!1);const p=()=>{u||P(D)},m=()=>{n(1,G.background=null,G),window.speechSynthesis.pending&&window.speechSynthesis.cancel()},_=()=>{m(),ye.reset(),q.set(0)},d=N=>{s.length&&!ye.isComplete()&&(isNaN(D)||D<0?N.detail.active&&N.detail.toggle():N.detail.active?q.start():q.stop())},S=(N,W,V)=>{if(!a.use_voice||!ie.isSupported())return;!ie.defaultVoice&&a.preferred_voice&&(ie.defaultVoice=a.preferred_voice),ie.controlYTPlayer||(ie.controlYTPlayer=!0);let Y="";if(V==0&&ye.isComplete())Y+="Well Done. ";else if(W==1)switch(N.type){case J.WORK:Y+="Go. ";break;case J.REST:case J.BREAK:Y+="Stop. ";break}else V<3?Y+=(V+1).toString():W==2&&[J.PREPARE,J.REST].includes(N.type)?(Y+=N.type==J.PREPARE?"Prep, ":"Rest, ",Y+=A(D+1)):V==15&&N.type==J.BREAK&&(Y+="Get Ready, ",Y+=A(D+1));Y.length&&(n(4,j=Y),ie.speak(Y))},A=N=>{let W="";if(s.length&&s[N]){const V=s[N];V.type==J.WORK&&(W+="Next Exercise, "+(V.display_name||V.name)+" ",V.band_pos>0&&(W+="Band's Position, "+V.band_pos_text+":"))}return W},$=N=>{const{node:W,child:V}=y(N);W&&Array.from(W.children).forEach(Y=>{Y.classList.remove("highlight")}),!!V&&V.classList.add("highlight")},P=N=>{const{node:W,child:V}=y(N);!V||W.scroll({left:V.offsetWidth*N,behavior:"smooth"})},y=N=>{if(N<0)return{node:null,child:null};const W=document.getElementById("routine_scroll");if(!W)return{node:null,child:null};const V=W.children[N];return V?{node:W,child:V}:{node:W,child:null}};je(()=>{r>0&&s.length&&(D=s.findIndex(N=>N.completed===!1),P(D))}),Ye(()=>{m(),q.stop(),Te.setItem("tabata_time",r)});let L=0,D=-1,Z=0,U=0;const q=bt();M(l,q,N=>n(6,r=N)),q.set(parseInt(Te.getItem("tabata_time")));const se=ge(q,N=>{if(!s.length)return 0;if(D=s.findIndex(Ie=>Ie.completed===!1),L=s.reduce((Ie,it)=>Ie+(it.completed===!0?it.duration:0),0),D<0){if(ye.isComplete()){const Ie=s[s.length-1];S(Ie,N-L,0),q.stop()}return 0}const W=N-L,V=s[D],Y=V.duration-W;return q.isTicking()&&(n(2,Z=D>-1?s[D].cycle:0),n(3,U=D>-1?s[D].round:0),S(V,W,Y),n(1,G.background=ts[V.type],G),Y==0&&(P(D+1),$(D+1),ye.markItemComplete(D))),Y+1},0);M(l,se,N=>n(10,c=N));let j="";const Q=()=>G.goto("href","create"),oe=()=>G.goto("href","random");return l.$$.update=()=>{l.$$.dirty[0]&1&&n(5,t=s.reduce((N,W)=>N+("duration"in W?W.duration:0),0))},[s,G,Z,U,j,t,r,u,o,i,c,f,p,_,d,q,se,Q,oe]}class Tt extends H{constructor(e){super();z(this,e,sl,ll,X,{},null,[-1,-1])}}function rl(l){let e,n,t=[{id:n=l[0].name},l[0]],s={};for(let r=0;r<t.length;r+=1)s=Ve(s,t[r]);return{c(){e=h("input"),$e(e,s)},m(r,a){v(r,e,a),e.autofocus&&e.focus()},p(r,a){$e(e,s=Be(t,[a&1&&n!==(n=r[0].name)&&{id:n},a&1&&r[0]]))},i:O,o:O,d(r){r&&k(e)}}}function il(l){let e,n;return e=new vt({props:{checked:l[0].value,name:l[0].name}}),{c(){R(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,s){const r={};s&1&&(r.checked=t[0].value),s&1&&(r.name=t[0].name),e.$set(r)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function ol(l){let e,n,t;const s=l[2].default,r=Ce(s,l,l[1],null);let a=[{id:n=l[0].name},l[0]],u={};for(let o=0;o<a.length;o+=1)u=Ve(u,a[o]);return{c(){e=h("select"),r&&r.c(),$e(e,u)},m(o,i){v(o,e,i),r&&r.m(e,null),(u.multiple?ut:Ge)(e,u.value),e.autofocus&&e.focus(),t=!0},p(o,i){r&&r.p&&(!t||i&2)&&Le(r,s,o,o[1],t?Oe(s,o[1],i,null):Ne(o[1]),null),$e(e,u=Be(a,[(!t||i&1&&n!==(n=o[0].name))&&{id:n},i&1&&o[0]])),i&1&&"value"in u&&(u.multiple?ut:Ge)(e,u.value)},i(o){t||(w(r,o),t=!0)},o(o){E(r,o),t=!1},d(o){o&&k(e),r&&r.d(o)}}}function al(l){let e,n=l[0].title+"",t,s,r,a,u,o,i;const c=[ol,il,rl],f=[];function p(m,_){return m[0].type==="select"?0:m[0].type==="slider"?1:2}return a=p(l),u=f[a]=c[a](l),{c(){e=h("label"),t=B(n),r=T(),u.c(),o=ee(),g(e,"for",s=l[0].name)},m(m,_){v(m,e,_),b(e,t),v(m,r,_),f[a].m(m,_),v(m,o,_),i=!0},p(m,[_]){(!i||_&1)&&n!==(n=m[0].title+"")&&F(t,n),(!i||_&1&&s!==(s=m[0].name))&&g(e,"for",s);let d=a;a=p(m),a===d?f[a].p(m,_):(te(),E(f[d],1,1,()=>{f[d]=null}),ne(),u=f[a],u?u.p(m,_):(u=f[a]=c[a](m),u.c()),w(u,1),u.m(o.parentNode,o))},i(m){i||(w(u),i=!0)},o(m){E(u),i=!1},d(m){m&&k(e),m&&k(r),f[a].d(m),m&&k(o)}}}function cl(l,e,n){let{$$slots:t={},$$scope:s}=e,{props:r={}}=e;return l.$$set=a=>{"props"in a&&n(0,r=a.props),"$$scope"in a&&n(1,s=a.$$scope)},[r,s,t]}class Me extends H{constructor(e){super();z(this,e,cl,al,X,{props:0})}}function At(l,e,n){const t=l.slice();return t[5]=e[n],t}function Pt(l){let e,n,t;return n=new Me({props:{props:{name:"announce_every",title:"Announce Every (seconds)",value:l[0].announce_every,type:"number",min:0,max:3600}}}),{c(){e=h("li"),R(n.$$.fragment)},m(s,r){v(s,e,r),I(n,e,null),t=!0},p(s,r){const a={};r&1&&(a.props={name:"announce_every",title:"Announce Every (seconds)",value:s[0].announce_every,type:"number",min:0,max:3600}),n.$set(a)},i(s){t||(w(n.$$.fragment,s),t=!0)},o(s){E(n.$$.fragment,s),t=!1},d(s){s&&k(e),C(n)}}}function Rt(l){let e,n,t={ctx:l,current:null,token:null,hasCatch:!1,pending:_l,then:fl,catch:ul,value:4,blocks:[,,,]};return Qe(ie.getVoices(),t),{c(){e=h("li"),t.block.c()},m(s,r){v(s,e,r),t.block.m(e,t.anchor=null),t.mount=()=>e,t.anchor=null,n=!0},p(s,r){l=s,Xe(t,l,r)},i(s){n||(w(t.block),n=!0)},o(s){for(let r=0;r<3;r+=1){const a=t.blocks[r];E(a)}n=!1},d(s){s&&k(e),t.block.d(),t.token=null,t=null}}}function ul(l){return{c:O,m:O,p:O,i:O,o:O,d:O}}function fl(l){let e,n;return e=new Me({props:{props:{name:"preferred_voice",title:"Preferred Voice",value:l[0].preferred_voice,type:"select"},$$slots:{default:[pl]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,s){const r={};s&1&&(r.props={name:"preferred_voice",title:"Preferred Voice",value:t[0].preferred_voice,type:"select"}),s&8&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function It(l){let e,n=l[5].name+"",t,s;return{c(){e=h("option"),t=B(n),e.__value=s=l[5].name,e.value=e.__value},m(r,a){v(r,e,a),b(e,t)},p:O,d(r){r&&k(e)}}}function ml(l){let e,n=l[4],t=[];for(let s=0;s<n.length;s+=1)t[s]=It(At(l,n,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=ee()},m(s,r){for(let a=0;a<t.length;a+=1)t[a].m(s,r);v(s,e,r)},p(s,r){if(r&0){n=s[4];let a;for(a=0;a<n.length;a+=1){const u=At(s,n,a);t[a]?t[a].p(u,r):(t[a]=It(u),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(s){ae(t,s),s&&k(e)}}}function pl(l){let e;const n=l[2].default,t=Ce(n,l,l[3],null),s=t||ml(l);return{c(){s&&s.c()},m(r,a){s&&s.m(r,a),e=!0},p(r,a){t&&t.p&&(!e||a&8)&&Le(t,n,r,r[3],e?Oe(n,r[3],a,null):Ne(r[3]),null)},i(r){e||(w(s,r),e=!0)},o(r){E(s,r),e=!1},d(r){s&&s.d(r)}}}function _l(l){let e;return{c(){e=h("p"),e.textContent="Loading"},m(n,t){v(n,e,t)},p:O,i:O,o:O,d(n){n&&k(e)}}}function dl(l){let e,n,t,s,r,a,u,o,i,c,f,p;t=new Me({props:{props:{name:"prep_time",title:"Prep Time (seconds)",value:l[0].prep_time,type:"number",min:0,max:3600}}});let m=l[0].use_voice&&Pt(l);u=new Me({props:{props:{name:"show_plank",title:"Show Planks?",value:l[0].show_plank,type:"slider"}}}),c=new Me({props:{props:{name:"use_voice",title:"Use Voice?",value:l[0].use_voice,type:"slider"}}});let _=l[0].use_voice&&Rt(l);return{c(){e=h("ul"),n=h("li"),R(t.$$.fragment),s=T(),m&&m.c(),r=T(),a=h("li"),R(u.$$.fragment),o=T(),i=h("li"),R(c.$$.fragment),f=T(),_&&_.c()},m(d,S){v(d,e,S),b(e,n),I(t,n,null),b(e,s),m&&m.m(e,null),b(e,r),b(e,a),I(u,a,null),b(e,o),b(e,i),I(c,i,null),b(e,f),_&&_.m(e,null),p=!0},p(d,S){const A={};S&1&&(A.props={name:"prep_time",title:"Prep Time (seconds)",value:d[0].prep_time,type:"number",min:0,max:3600}),t.$set(A),d[0].use_voice?m?(m.p(d,S),S&1&&w(m,1)):(m=Pt(d),m.c(),w(m,1),m.m(e,r)):m&&(te(),E(m,1,1,()=>{m=null}),ne());const $={};S&1&&($.props={name:"show_plank",title:"Show Planks?",value:d[0].show_plank,type:"slider"}),u.$set($);const P={};S&1&&(P.props={name:"use_voice",title:"Use Voice?",value:d[0].use_voice,type:"slider"}),c.$set(P),d[0].use_voice?_?(_.p(d,S),S&1&&w(_,1)):(_=Rt(d),_.c(),w(_,1),_.m(e,null)):_&&(te(),E(_,1,1,()=>{_=null}),ne())},i(d){p||(w(t.$$.fragment,d),w(m),w(u.$$.fragment,d),w(c.$$.fragment,d),w(_),p=!0)},o(d){E(t.$$.fragment,d),E(m),E(u.$$.fragment,d),E(c.$$.fragment,d),E(_),p=!1},d(d){d&&k(e),C(t),m&&m.d(),C(u),C(c),_&&_.d()}}}function gl(l){let e,n;return e=new He({props:{title:"Timer Settings",$$slots:{default:[dl]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,s){const r={};s&9&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function bl(l){let e,n;return e=new nt({props:{$$slots:{default:[gl]},$$scope:{ctx:l}}}),e.$on("close",l[1]),{c(){R(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,[s]){const r={};s&9&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function hl(l,e,n){let t;M(l,fe,u=>n(0,t=u));let{$$slots:s={},$$scope:r}=e;const a=u=>{const o=u.detail.currentTarget.parentNode.parentNode,i=new FormData(o);De(fe,t.show_plank=i.has("show_plank"),t),De(fe,t.use_voice=i.has("use_voice"),t),De(fe,t.prep_time=parseInt(i.get("prep_time").toString()),t),De(fe,t.announce_every=parseInt(i.get("announce_every").toString()),t),De(fe,t.preferred_voice=i.has("use_voice")?i.get("preferred_voice"):null,t),_e.set(!1)};return l.$$set=u=>{"$$scope"in u&&n(3,r=u.$$scope)},[t,a,s,r]}class vl extends H{constructor(e){super();z(this,e,hl,bl,X,{})}}function Ct(l,e,n){const t=l.slice();return t[11]=e[n],t}function kl(l){let e,n;return{c(){e=h("img"),ke(e.src,n="/css/icons/power-outline.svg")||g(e,"src",n),g(e,"alt","Start!"),g(e,"class","loading svelte-9by8qp")},m(t,s){v(t,e,s)},p:O,d(t){t&&k(e)}}}function $l(l){let e=l[4].asClock(l[1])+"",n;return{c(){n=B(e)},m(t,s){v(t,n,s)},p(t,s){s&2&&e!==(e=t[4].asClock(t[1])+"")&&F(n,e)},d(t){t&&k(n)}}}function wl(l){let e,n;function t(a,u){return(e==null||u&2)&&(e=!!(a[1]||a[4].isTicking())),e?$l:kl}let s=t(l,-1),r=s(l);return{c(){r.c(),n=ee()},m(a,u){r.m(a,u),v(a,n,u)},p(a,u){s===(s=t(a,u))&&r?r.p(a,u):(r.d(1),r=s(a),r&&(r.c(),r.m(n.parentNode,n)))},d(a){r.d(a),a&&k(n)}}}function yl(l){let e,n,t,s;e=new tt({}),e.$on("reset",l[4].reset);let r=l[0].show_plank&&l[3]&&Lt(l);return{c(){R(e.$$.fragment),n=T(),r&&r.c(),t=ee()},m(a,u){I(e,a,u),v(a,n,u),r&&r.m(a,u),v(a,t,u),s=!0},p(a,u){a[0].show_plank&&a[3]?r?r.p(a,u):(r=Lt(a),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i(a){s||(w(e.$$.fragment,a),s=!0)},o(a){E(e.$$.fragment,a),s=!1},d(a){C(e,a),a&&k(n),r&&r.d(a),a&&k(t)}}}function El(l){let e,n;return e=new vl({}),{c(){R(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p:O,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function Lt(l){let e,n,t,s,r=l[3],a=[];for(let u=0;u<r.length;u+=1)a[u]=Nt(Ct(l,r,u));return{c(){e=h("div"),n=h("h3"),n.textContent="Plank:",t=T(),s=h("ol");for(let u=0;u<a.length;u+=1)a[u].c();g(n,"class","svelte-9by8qp"),g(e,"class","planks svelte-9by8qp")},m(u,o){v(u,e,o),b(e,n),b(e,t),b(e,s);for(let i=0;i<a.length;i+=1)a[i].m(s,null)},p(u,o){if(o&8){r=u[3];let i;for(i=0;i<r.length;i+=1){const c=Ct(u,r,i);a[i]?a[i].p(c,o):(a[i]=Nt(c),a[i].c(),a[i].m(s,null))}for(;i<a.length;i+=1)a[i].d(1);a.length=r.length}},d(u){u&&k(e),ae(a,u)}}}function Nt(l){let e,n=l[11].name+"",t;return{c(){e=h("li"),t=B(n),g(e,"class","svelte-9by8qp")},m(s,r){v(s,e,r),b(e,t)},p(s,r){r&8&&n!==(n=s[11].name+"")&&F(t,n)},d(s){s&&k(e)}}}function Sl(l){let e,n,t,s,r,a,u;n=new ht({props:{$$slots:{default:[wl]},$$scope:{ctx:l}}}),n.$on("click",l[6]);const o=[El,yl],i=[];function c(f,p){return f[2]?0:1}return s=c(l),r=i[s]=o[s](l),{c(){e=h("div"),R(n.$$.fragment),t=T(),r.c(),a=ee(),g(e,"class","bttn-container svelte-9by8qp")},m(f,p){v(f,e,p),I(n,e,null),v(f,t,p),i[s].m(f,p),v(f,a,p),u=!0},p(f,[p]){const m={};p&16386&&(m.$$scope={dirty:p,ctx:f}),n.$set(m);let _=s;s=c(f),s===_?i[s].p(f,p):(te(),E(i[_],1,1,()=>{i[_]=null}),ne(),r=i[s],r?r.p(f,p):(r=i[s]=o[s](f),r.c()),w(r,1),r.m(a.parentNode,a))},i(f){u||(w(n.$$.fragment,f),w(r),u=!0)},o(f){E(n.$$.fragment,f),E(r),u=!1},d(f){f&&k(e),C(n),f&&k(t),i[s].d(f),f&&k(a)}}}function Tl(l,e,n){let t,s,r,a,u;M(l,fe,p=>n(0,t=p)),M(l,_e,p=>n(2,a=p)),M(l,is,p=>n(3,u=p)),_e.set(!1);const o=()=>{G.background=null,window.speechSynthesis.pending&&window.speechSynthesis.cancel()};je(()=>{if(s&&t.prep_time){const p=s-t.prep_time;G.background=p<0?G.backgrounds.PREPARE:G.backgrounds.WORK}}),Ye(()=>{o(),i.stop(),Te.setItem("timer_time",s)});const i=bt();M(l,i,p=>n(9,s=p)),i.set(parseInt(Te.getItem("timer_time")));const c=ge(i,(p,m)=>{const _=t.prep_time,d=t.use_voice,S=t.announce_every;let A=p-_,$=A<0?0:A;if(i.isTicking()){if(A<0?G.background=G.backgrounds.PREPARE:A>=0&&(G.background=G.backgrounds.WORK),$=A<0?_-(_+A):A,d){!ie.defaultVoice&&t.preferred_voice&&(ie.defaultVoice=t.preferred_voice),ie.controlYTPlayer||(ie.controlYTPlayer=!0);let P="";if(A<=0&&A>=-3)P+=$===0?"Go!":$.toString();else if(S>0&&$%S==0){let{m:y,s:L}=i.minSecs($);y!==0&&(P+=y+" minute"+(y==1?" ":"s ")),L!==0&&(P+=L+" second"+(L==1?"":"s"))}P.length&&ie.speak(P)}}else o();m($)},0);return M(l,c,p=>n(1,r=p)),[t,r,a,u,i,c,p=>p.detail.active?i.start():i.stop()]}class Al extends H{constructor(e){super();z(this,e,Tl,Sl,X,{})}}function Pl(l){let e,n,t,s,r,a,u,o,i;return{c(){e=h("div"),n=h("label"),t=B(l[2]),s=T(),r=h("input"),a=T(),u=h("label"),g(n,"class","bulb-label svelte-1flq487"),g(n,"for",l[1]),g(r,"type","checkbox"),g(r,"name",l[1]),g(r,"id",l[1]),g(r,"class","svelte-1flq487"),g(u,"class","bulb svelte-1flq487"),g(u,"for",l[1]),g(e,"class","svelte-1flq487")},m(c,f){v(c,e,f),b(e,n),b(n,t),b(e,s),b(e,r),r.checked=l[0],b(e,a),b(e,u),o||(i=[K(r,"change",l[4]),K(r,"change",l[3])],o=!0)},p(c,[f]){f&4&&F(t,c[2]),f&2&&g(n,"for",c[1]),f&2&&g(r,"name",c[1]),f&2&&g(r,"id",c[1]),f&1&&(r.checked=c[0]),f&2&&g(u,"for",c[1])},i:O,o:O,d(c){c&&k(e),o=!1,Se(i)}}}function Rl(l,e,n){const t=Pe();let s=i=>{t("change",i.currentTarget.checked)},{name:r=void 0}=e,{checked:a=!1}=e,{label:u=void 0}=e;function o(){a=this.checked,n(0,a)}return l.$$set=i=>{"name"in i&&n(1,r=i.name),"checked"in i&&n(0,a=i.checked),"label"in i&&n(2,u=i.label)},[a,r,u,s,o]}class Ot extends H{constructor(e){super();z(this,e,Rl,Pl,X,{name:1,checked:0,label:2})}}function Il(l){let e,n,t,s,r,a,u=[l[4](l[1],l[2])],o={};for(let i=0;i<u.length;i+=1)o=Ve(o,u[i]);return{c(){e=h("label"),n=B(l[0]),t=T(),s=h("input"),g(e,"for",l[1]),$e(s,o),x(s,"bold",l[3])},m(i,c){v(i,e,c),b(e,n),v(i,t,c),v(i,s,c),s.autofocus&&s.focus(),r||(a=[K(s,"input",l[8]),K(s,"change",l[9]),K(s,"focus",l[5]),K(s,"blur",l[5])],r=!0)},p(i,[c]){c&1&&F(n,i[0]),c&2&&g(e,"for",i[1]),$e(s,o=Be(u,[c&6&&i[4](i[1],i[2])])),x(s,"bold",i[3])},i:O,o:O,d(i){i&&k(e),i&&k(t),i&&k(s),r=!1,Se(a)}}}function Cl(l,e,n){const t=(m,_)=>({type:o,name:m,id:m,value:_,editable:!i}),s=m=>{const _=m.currentTarget;switch(m.type){case"focus":_.parentNode.classList.add("active"),_.classList.add("bold"),_.select();break;case"blur":_.parentNode.classList.add("inactive"),_.classList.remove("bold"),setTimeout(()=>{_.parentNode.classList.remove("active"),_.parentNode.classList.remove("inactive")},600);break}};let{label:r,name:a,value:u}=e,{type:o="number"}=e,{disabled:i=!1}=e,{bold:c=!1}=e;function f(m){we.call(this,l,m)}function p(m){we.call(this,l,m)}return l.$$set=m=>{"label"in m&&n(0,r=m.label),"name"in m&&n(1,a=m.name),"value"in m&&n(2,u=m.value),"type"in m&&n(6,o=m.type),"disabled"in m&&n(7,i=m.disabled),"bold"in m&&n(3,c=m.bold)},[r,a,u,c,t,s,o,i,f,p]}class lt extends H{constructor(e){super();z(this,e,Cl,Il,X,{label:0,name:1,value:2,type:6,disabled:7,bold:3})}}function Vt(l,e,n){const t=l.slice();return t[12]=e[n],t}function Bt(l,e,n){const t=l.slice();return t[15]=e[n],t}function jt(l){let e,n,t,s;return n=new lt({props:{label:l[15].title,name:l[15].id,value:l[15].id in l[2].rules?l[2].rules[l[15].id]:0}}),n.$on("input",l[5]),{c(){e=h("li"),R(n.$$.fragment),t=T()},m(r,a){v(r,e,a),I(n,e,null),b(e,t),s=!0},p(r,a){const u={};a&8&&(u.label=r[15].title),a&8&&(u.name=r[15].id),a&12&&(u.value=r[15].id in r[2].rules?r[2].rules[r[15].id]:0),n.$set(u)},i(r){s||(w(n.$$.fragment,r),s=!0)},o(r){E(n.$$.fragment,r),s=!1},d(r){r&&k(e),C(n)}}}function Ll(l){let e,n,t=l[3],s=[];for(let a=0;a<t.length;a+=1)s[a]=jt(Bt(l,t,a));const r=a=>E(s[a],1,1,()=>{s[a]=null});return{c(){e=h("ul");for(let a=0;a<s.length;a+=1)s[a].c()},m(a,u){v(a,e,u);for(let o=0;o<s.length;o+=1)s[o].m(e,null);n=!0},p(a,u){if(u&44){t=a[3];let o;for(o=0;o<t.length;o+=1){const i=Bt(a,t,o);s[o]?(s[o].p(i,u),w(s[o],1)):(s[o]=jt(i),s[o].c(),w(s[o],1),s[o].m(e,null))}for(te(),o=t.length;o<s.length;o+=1)r(o);ne()}},i(a){if(!n){for(let u=0;u<t.length;u+=1)w(s[u]);n=!0}},o(a){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)E(s[u]);n=!1},d(a){a&&k(e),ae(s,a)}}}function Dt(l){let e,n,t;const s=[{label:l[12].label},{name:l[12].name},{value:l[12].value},l[12]];let r={};for(let a=0;a<s.length;a+=1)r=Ve(r,s[a]);return n=new lt({props:r}),n.$on("input",l[6]),{c(){e=h("li"),R(n.$$.fragment)},m(a,u){v(a,e,u),I(n,e,null),t=!0},p(a,u){const o=u&512?Be(s,[{label:a[12].label},{name:a[12].name},{value:a[12].value},ln(a[12])]):{};n.$set(o)},i(a){t||(w(n.$$.fragment,a),t=!0)},o(a){E(n.$$.fragment,a),t=!1},d(a){a&&k(e),C(n)}}}function Nl(l){let e,n,t,s,r,a=l[9](),u=[];for(let i=0;i<a.length;i+=1)u[i]=Dt(Vt(l,a,i));const o=i=>E(u[i],1,1,()=>{u[i]=null});return s=new lt({props:{label:"Total Time",name:"totalWorkoutTime",value:Ke(l[1]),type:"text",disabled:!0,bold:!0}}),{c(){e=h("ul");for(let i=0;i<u.length;i+=1)u[i].c();n=T(),t=h("li"),R(s.$$.fragment)},m(i,c){v(i,e,c);for(let f=0;f<u.length;f+=1)u[f].m(e,null);b(e,n),b(e,t),I(s,t,null),r=!0},p(i,c){if(c&576){a=i[9]();let p;for(p=0;p<a.length;p+=1){const m=Vt(i,a,p);u[p]?(u[p].p(m,c),w(u[p],1)):(u[p]=Dt(m),u[p].c(),w(u[p],1),u[p].m(e,n))}for(te(),p=a.length;p<u.length;p+=1)o(p);ne()}const f={};c&2&&(f.value=Ke(i[1])),s.$set(f)},i(i){if(!r){for(let c=0;c<a.length;c+=1)w(u[c]);w(s.$$.fragment,i),r=!0}},o(i){u=u.filter(Boolean);for(let c=0;c<u.length;c+=1)E(u[c]);E(s.$$.fragment,i),r=!1},d(i){i&&k(e),ae(u,i),C(s)}}}function Ol(l){let e,n,t,s,r,a,u,o,i;return e=new He({props:{title:"Exercises ("+l[0]+")",$$slots:{default:[Ll]},$$scope:{ctx:l}}}),t=new He({props:{title:"Tabata",$$slots:{default:[Nl]},$$scope:{ctx:l}}}),{c(){R(e.$$.fragment),n=T(),R(t.$$.fragment),s=T(),r=h("div"),a=h("button"),a.textContent="Create",g(a,"class","default-button"),g(a,"type","submit"),g(r,"class","submit svelte-53plpy")},m(c,f){I(e,c,f),v(c,n,f),I(t,c,f),v(c,s,f),v(c,r,f),b(r,a),u=!0,o||(i=K(a,"click",Ee(l[8])),o=!0)},p(c,f){const p={};f&1&&(p.title="Exercises ("+c[0]+")"),f&262156&&(p.$$scope={dirty:f,ctx:c}),e.$set(p);const m={};f&262146&&(m.$$scope={dirty:f,ctx:c}),t.$set(m)},i(c){u||(w(e.$$.fragment,c),w(t.$$.fragment,c),u=!0)},o(c){E(e.$$.fragment,c),E(t.$$.fragment,c),u=!1},d(c){C(e,c),c&&k(n),C(t,c),c&&k(s),c&&k(r),o=!1,i()}}}function Vl(l){let e,n;return e=new nt({props:{$$slots:{default:[Ol]},$$scope:{ctx:l}}}),e.$on("close",l[7]),{c(){R(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p(t,[s]){const r={};s&262159&&(r.$$scope={dirty:s,ctx:t}),e.$set(r)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function Bl(l,e,n){let t,s,r,a;M(l,dt,d=>n(3,a=d));const u=be.clone();M(l,u,d=>n(2,r=d));const o=(d,S=!1)=>{const A=parseInt(d.currentTarget.value);isNaN(A)||(S?u.updateRule(d.currentTarget.id,A):u.update($=>(d.currentTarget.id in $&&($[d.currentTarget.id]=A),$)))},i=d=>{o(d,!0)},c=d=>{o(d,!1)},f=()=>{_e.set(!1)},p=()=>{be.set(r),ce.generate(),f()};function m(){const d=["label","name","value","type","disabled","bold"],S={prep_time:"Prep Time",time_on:"Active Time",time_off:"Rest Time",rest_time:"Break Time",tabatas:"Rounds"};return Object.entries(r).filter($=>$[0]in S).map(([$,P])=>{const y=[S[$],$,P,"number",!1,!1];return Object.fromEntries(d.map((D,Z)=>[D,y[Z]]))})}const _=ge(u,(d,S)=>{S(Object.entries(d.rules).reduce((A,$)=>A+(isNaN($[1])?0:$[1]),0))},0);return M(l,_,d=>n(0,s=d)),l.$$.update=()=>{l.$$.dirty&1&&n(1,t=u.getTotalTime(s))},[s,t,r,a,u,i,c,f,p,m,_]}class jl extends H{constructor(e){super();z(this,e,Bl,Vl,X,{})}}function Dl(l){let e,n,t,s,r,a,u,o;return e=new ue({props:{src:"/css/icons/redo-svgrepo-com.svg",alt:"Replace Exercise",min_dim:"1rem",data:{"data-id":l[1],"data-type":l[0].type,"data-action":"replace"}}}),e.$on("click",l[4]),t=new ue({props:{disabled:!l[2],src:"/css/icons/arrow-up-circle.svg",alt:"Move Up",min_dim:"1rem",data:{"data-id":l[1],"data-type":l[0].type,"data-action":"up"}}}),t.$on("click",l[4]),r=new ue({props:{disabled:!l[2],src:"/css/icons/arrow-down-circle.svg",alt:"Move Down",min_dim:"1rem",data:{"data-id":l[1],"data-type":l[0].type,"data-action":"down"}}}),r.$on("click",l[4]),u=new ue({props:{disabled:!l[3],src:"/css/icons/trash.svg",alt:"Delete Exercise",min_dim:"1rem",data:{"data-id":l[1],"data-type":l[0].type,"data-action":"delete"}}}),u.$on("click",l[4]),{c(){R(e.$$.fragment),n=T(),R(t.$$.fragment),s=T(),R(r.$$.fragment),a=T(),R(u.$$.fragment)},m(i,c){I(e,i,c),v(i,n,c),I(t,i,c),v(i,s,c),I(r,i,c),v(i,a,c),I(u,i,c),o=!0},p(i,[c]){const f={};c&3&&(f.data={"data-id":i[1],"data-type":i[0].type,"data-action":"replace"}),e.$set(f);const p={};c&4&&(p.disabled=!i[2]),c&3&&(p.data={"data-id":i[1],"data-type":i[0].type,"data-action":"up"}),t.$set(p);const m={};c&4&&(m.disabled=!i[2]),c&3&&(m.data={"data-id":i[1],"data-type":i[0].type,"data-action":"down"}),r.$set(m);const _={};c&8&&(_.disabled=!i[3]),c&3&&(_.data={"data-id":i[1],"data-type":i[0].type,"data-action":"delete"}),u.$set(_)},i(i){o||(w(e.$$.fragment,i),w(t.$$.fragment,i),w(r.$$.fragment,i),w(u.$$.fragment,i),o=!0)},o(i){E(e.$$.fragment,i),E(t.$$.fragment,i),E(r.$$.fragment,i),E(u.$$.fragment,i),o=!1},d(i){C(e,i),i&&k(n),C(t,i),i&&k(s),C(r,i),i&&k(a),C(u,i)}}}function Kl(l,e,n){const t=o=>{const i=o.currentTarget.dataset;let c=parseInt(i.id),f=parseInt(i.type);switch(i.action){case"up":case"down":ce.swapExercise(c,c+(i.action=="down"?1:-1),f);break;case"delete":case"replace":ce.alterExercise(c,f,i.action);break}};let{exercise:s=null}=e,{index:r=null}=e,{movementAllowed:a=!0}=e,{deleteAllowed:u=!0}=e;return l.$$set=o=>{"exercise"in o&&n(0,s=o.exercise),"index"in o&&n(1,r=o.index),"movementAllowed"in o&&n(2,a=o.movementAllowed),"deleteAllowed"in o&&n(3,u=o.deleteAllowed)},[s,r,a,u,t]}class Kt extends H{constructor(e){super();z(this,e,Kl,Dl,X,{exercise:0,index:1,movementAllowed:2,deleteAllowed:3})}}function qt(l,e,n){const t=l.slice();return t[8]=e[n],t[10]=n,t}function Wt(l,e,n){const t=l.slice();return t[11]=e[n],t[10]=n,t}function Mt(l){let e,n,t,s=l[10]+1+"",r,a,u=l[11].display_name+"",o,i,c,f,p=l[11].target+"",m,_,d,S,A=l[11].band_pos_text+"",$,P,y,L,D,Z,U,q,se;return L=new Kt({props:{exercise:l[11],index:l[10],movementAllowed:l[4]>1,deleteAllowed:l[4]>1}}),{c(){e=h("li"),n=h("div"),t=h("h6"),r=B(s),a=B(". "),o=B(u),i=T(),c=h("span"),f=B("Target: "),m=B(p),_=T(),d=h("span"),S=B("Band: "),$=B(A),P=T(),y=h("div"),R(L.$$.fragment),D=T(),g(n,"class","exercise-info svelte-1606yd0"),g(y,"class","exercise-actions svelte-1606yd0"),g(e,"draggable",Z=l[4]>1),g(e,"class","svelte-1606yd0"),x(e,"grabbable",l[4]>1)},m(j,Q){v(j,e,Q),b(e,n),b(n,t),b(t,r),b(t,a),b(t,o),b(n,i),b(n,c),b(c,f),b(c,m),b(n,_),b(n,d),b(d,S),b(d,$),b(e,P),b(e,y),I(L,y,null),b(e,D),U=!0,q||(se=K(e,"dragstart",l[2]),q=!0)},p(j,Q){(!U||Q&1)&&u!==(u=j[11].display_name+"")&&F(o,u),(!U||Q&1)&&p!==(p=j[11].target+"")&&F(m,p),(!U||Q&1)&&A!==(A=j[11].band_pos_text+"")&&F($,A);const oe={};Q&1&&(oe.exercise=j[11]),L.$set(oe)},i(j){U||(w(L.$$.fragment,j),U=!0)},o(j){E(L.$$.fragment,j),U=!1},d(j){j&&k(e),C(L),q=!1,se()}}}function Gt(l){let e,n,t,s,r=l[0].planks,a=[];for(let o=0;o<r.length;o+=1)a[o]=Yt(qt(l,r,o));const u=o=>E(a[o],1,1,()=>{a[o]=null});return{c(){e=h("h5"),e.textContent="Planks",n=T(),t=h("ol");for(let o=0;o<a.length;o+=1)a[o].c();g(e,"class","svelte-1606yd0"),g(t,"class","row-cards")},m(o,i){v(o,e,i),v(o,n,i),v(o,t,i);for(let c=0;c<a.length;c+=1)a[c].m(t,null);s=!0},p(o,i){if(i&37){r=o[0].planks;let c;for(c=0;c<r.length;c+=1){const f=qt(o,r,c);a[c]?(a[c].p(f,i),w(a[c],1)):(a[c]=Yt(f),a[c].c(),w(a[c],1),a[c].m(t,null))}for(te(),c=r.length;c<a.length;c+=1)u(c);ne()}},i(o){if(!s){for(let i=0;i<r.length;i+=1)w(a[i]);s=!0}},o(o){a=a.filter(Boolean);for(let i=0;i<a.length;i+=1)E(a[i]);s=!1},d(o){o&&k(e),o&&k(n),o&&k(t),ae(a,o)}}}function Yt(l){let e,n,t,s=l[10]+1+"",r,a,u=l[8].display_name+"",o,i,c,f,p=l[8].target+"",m,_,d,S,A=l[8].band_pos_text+"",$,P,y,L,D,Z,U,q,se;return L=new Kt({props:{exercise:l[8],index:l[10],movementAllowed:l[5]>1,deleteAllowed:!1}}),{c(){e=h("li"),n=h("div"),t=h("h6"),r=B(s),a=B(". "),o=B(u),i=T(),c=h("span"),f=B("Target: "),m=B(p),_=T(),d=h("span"),S=B("Band: "),$=B(A),P=T(),y=h("div"),R(L.$$.fragment),D=T(),g(n,"class","exercise-info svelte-1606yd0"),g(y,"class","exercise-actions svelte-1606yd0"),g(e,"draggable",Z=l[5]>1),g(e,"class","svelte-1606yd0"),x(e,"grabbable",l[5]>1)},m(j,Q){v(j,e,Q),b(e,n),b(n,t),b(t,r),b(t,a),b(t,o),b(n,i),b(n,c),b(c,f),b(c,m),b(n,_),b(n,d),b(d,S),b(d,$),b(e,P),b(e,y),I(L,y,null),b(e,D),U=!0,q||(se=K(e,"dragstart",l[2]),q=!0)},p(j,Q){(!U||Q&1)&&u!==(u=j[8].display_name+"")&&F(o,u),(!U||Q&1)&&p!==(p=j[8].target+"")&&F(m,p),(!U||Q&1)&&A!==(A=j[8].band_pos_text+"")&&F($,A);const oe={};Q&1&&(oe.exercise=j[8]),L.$set(oe)},i(j){U||(w(L.$$.fragment,j),U=!0)},o(j){E(L.$$.fragment,j),U=!1},d(j){j&&k(e),C(L),q=!1,se()}}}function ql(l){let e,n,t,s,r,a,u,o,i=l[0].exercises,c=[];for(let m=0;m<i.length;m+=1)c[m]=Mt(Wt(l,i,m));const f=m=>E(c[m],1,1,()=>{c[m]=null});let p=l[0].planks.length>0&&l[1]===!0&&Gt(l);return{c(){e=h("h5"),e.textContent="Exercises",n=T(),t=h("ol");for(let m=0;m<c.length;m+=1)c[m].c();s=T(),p&&p.c(),r=ee(),g(e,"class","svelte-1606yd0"),g(t,"class","row-cards")},m(m,_){v(m,e,_),v(m,n,_),v(m,t,_);for(let d=0;d<c.length;d+=1)c[d].m(t,null);v(m,s,_),p&&p.m(m,_),v(m,r,_),a=!0,u||(o=[K(t,"dragover",Ee(l[6])),K(t,"drop",l[3])],u=!0)},p(m,[_]){if(_&21){i=m[0].exercises;let d;for(d=0;d<i.length;d+=1){const S=Wt(m,i,d);c[d]?(c[d].p(S,_),w(c[d],1)):(c[d]=Mt(S),c[d].c(),w(c[d],1),c[d].m(t,null))}for(te(),d=i.length;d<c.length;d+=1)f(d);ne()}m[0].planks.length>0&&m[1]===!0?p?(p.p(m,_),_&3&&w(p,1)):(p=Gt(m),p.c(),w(p,1),p.m(r.parentNode,r)):p&&(te(),E(p,1,1,()=>{p=null}),ne())},i(m){if(!a){for(let _=0;_<i.length;_+=1)w(c[_]);w(p),a=!0}},o(m){c=c.filter(Boolean);for(let _=0;_<c.length;_+=1)E(c[_]);E(p),a=!1},d(m){m&&k(e),m&&k(n),m&&k(t),ae(c,m),m&&k(s),p&&p.d(m),m&&k(r),u=!1,Se(o)}}}function Wl(l,e,n){let t,s;M(l,ce,f=>n(0,t=f)),M(l,Ue,f=>n(1,s=f));let r=null;const a=f=>{r=f.currentTarget,f.dataTransfer.effectAllowed="move"},u=f=>{f.preventDefault();const p=f.path.indexOf(r.parentNode);if(p<1)return;const m=f.path[p-1];if(r===m)return;const _=Array.from(r.parentNode.children);ce.swapExercise(_.indexOf(r),_.indexOf(m),Ae.EXERCISE)};let o=t.exercises.length,i=t.planks.length;function c(f){we.call(this,l,f)}return[t,s,a,u,o,i,c]}class Ml extends H{constructor(e){super();z(this,e,Wl,ql,X,{})}}function Ft(l,e,n){const t=l.slice();return t[10]=e[n],t}function Ut(l){let e,n=l[10][1]+"",t,s,r,a,u,o;return{c(){e=h("span"),t=B(n),s=T(),g(e,"class","sel-box-option svelte-1jv4xur"),g(e,"data-value",r=l[10][0]),g(e,"data-text",a=l[10][1]),x(e,"selected",l[0]===l[10][0])},m(i,c){v(i,e,c),b(e,t),b(e,s),u||(o=K(e,"click",l[5]),u=!0)},p(i,c){c&4&&n!==(n=i[10][1]+"")&&F(t,n),c&4&&r!==(r=i[10][0])&&g(e,"data-value",r),c&4&&a!==(a=i[10][1])&&g(e,"data-text",a),c&5&&x(e,"selected",i[0]===i[10][0])},d(i){i&&k(e),u=!1,o()}}}function Gl(l){let e,n,t,s,r,a,u,o=l[2],i=[];for(let c=0;c<o.length;c+=1)i[c]=Ut(Ft(l,o,c));return{c(){e=h("div"),n=h("span"),t=B(l[3]),s=T(),r=h("div");for(let c=0;c<i.length;c+=1)i[c].c();g(n,"class","sel-placeholder svelte-1jv4xur"),g(n,"data-placeholder",l[3]),g(r,"class","sel-box svelte-1jv4xur"),g(e,"class","sel svelte-1jv4xur"),g(e,"id",l[1]),x(e,"active",l[4])},m(c,f){v(c,e,f),b(e,n),b(n,t),b(e,s),b(e,r);for(let p=0;p<i.length;p+=1)i[p].m(r,null);a||(u=K(e,"click",l[6]),a=!0)},p(c,[f]){if(f&8&&F(t,c[3]),f&8&&g(n,"data-placeholder",c[3]),f&37){o=c[2];let p;for(p=0;p<o.length;p+=1){const m=Ft(c,o,p);i[p]?i[p].p(m,f):(i[p]=Ut(m),i[p].c(),i[p].m(r,null))}for(;p<i.length;p+=1)i[p].d(1);i.length=o.length}f&2&&g(e,"id",c[1]),f&16&&x(e,"active",c[4])},i:O,o:O,d(c){c&&k(e),ae(i,c),a=!1,u()}}}function Yl(l,e,n){const t=Pe(),s=()=>{const m=document.getElementById(i);if(!m)return null;let _="";return m.querySelectorAll(".sel-box-option").forEach(d=>{d.dataset.value==f&&(_=d.dataset.text)}),_},r=m=>{const _=document.getElementById(i).querySelector(".sel-placeholder");_.textContent=m},a=m=>{m.currentTarget.dataset.value!=f&&(n(0,f=m.currentTarget.dataset.value),r(m.currentTarget.dataset.text),t("change",f))},u=()=>{n(4,o=!o),t("open",o)};je(()=>{const m=s();m&&r(m)});let o=!1,{name:i,options:c,value:f,placeholder:p}=e;return l.$$set=m=>{"name"in m&&n(1,i=m.name),"options"in m&&n(2,c=m.options),"value"in m&&n(0,f=m.value),"placeholder"in m&&n(3,p=m.placeholder)},[f,i,c,p,o,a,u]}class Fl extends H{constructor(e){super();z(this,e,Yl,Gl,X,{name:1,options:2,value:0,placeholder:3})}}function Ul(l){let e,n,t,s,r,a,u,o,i,c;e=new Fl({props:{name:"workout_type",options:l[3].map(zt),value:l[2].id,placeholder:"Presets"}}),e.$on("change",l[8]),e.$on("open",l[11]),s=new Ot({props:{checked:l[5],name:"with_equipment",label:"Bands?"}}),s.$on("change",l[9]);function f(_){l[14](_)}let p={name:"with_planks",label:"Planks?"};l[6]!==void 0&&(p.checked=l[6]),a=new Ot({props:p}),at.push(()=>ct(a,"checked",f));let m=!l[0]&&l[1].exercises.length&&Ht(l);return{c(){R(e.$$.fragment),n=T(),t=h("div"),R(s.$$.fragment),r=T(),R(a.$$.fragment),o=T(),m&&m.c(),i=ee(),g(t,"class","glow-buttons svelte-4wdsfb")},m(_,d){I(e,_,d),v(_,n,d),v(_,t,d),I(s,t,null),b(t,r),I(a,t,null),v(_,o,d),m&&m.m(_,d),v(_,i,d),c=!0},p(_,d){const S={};d&8&&(S.options=_[3].map(zt)),d&4&&(S.value=_[2].id),e.$set(S);const A={};d&32&&(A.checked=_[5]),s.$set(A);const $={};!u&&d&64&&(u=!0,$.checked=_[6],ot(()=>u=!1)),a.$set($),!_[0]&&_[1].exercises.length?m?(m.p(_,d),d&3&&w(m,1)):(m=Ht(_),m.c(),w(m,1),m.m(i.parentNode,i)):m&&(te(),E(m,1,1,()=>{m=null}),ne())},i(_){c||(w(e.$$.fragment,_),w(s.$$.fragment,_),w(a.$$.fragment,_),w(m),c=!0)},o(_){E(e.$$.fragment,_),E(s.$$.fragment,_),E(a.$$.fragment,_),E(m),c=!1},d(_){C(e,_),_&&k(n),_&&k(t),C(s),C(a),_&&k(o),m&&m.d(_),_&&k(i)}}}function Hl(l){let e,n;return e=new jl({}),{c(){R(e.$$.fragment)},m(t,s){I(e,t,s),n=!0},p:O,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){E(e.$$.fragment,t),n=!1},d(t){C(e,t)}}}function Ht(l){let e,n,t,s,r,a,u,o,i,c,f,p,m,_,d,S,A;return n=new ue({props:{src:"/css/icons/power-outline.svg",alt:"Go!",min_dim:"1.9rem"}}),n.$on("click",l[13]),r=new We({props:{label:"Total Time",value:Ke(be.getTotalTime(l[1].exercises.length))}}),u=new ue({props:{src:"/css/icons/"+l[7],alt:"Share",min_dim:"1.9rem"}}),u.$on("click",l[12]),i=new tt({}),i.$on("reset",l[10]),f=new Ml({}),_=new ue({props:{src:"/css/icons/power-outline.svg",alt:"Go!",min_dim:"1.9rem"}}),_.$on("click",l[13]),S=new ue({props:{src:"/css/icons/"+l[7],alt:"Share",min_dim:"1.9rem"}}),S.$on("click",l[12]),{c(){e=h("div"),R(n.$$.fragment),t=T(),s=h("div"),R(r.$$.fragment),a=T(),R(u.$$.fragment),o=T(),R(i.$$.fragment),c=T(),R(f.$$.fragment),p=T(),m=h("div"),R(_.$$.fragment),d=T(),R(S.$$.fragment),g(s,"class","timer-counter svelte-4wdsfb"),g(e,"class","action-row svelte-4wdsfb"),g(m,"class","action-row svelte-4wdsfb")},m($,P){v($,e,P),I(n,e,null),b(e,t),b(e,s),I(r,s,null),b(e,a),I(u,e,null),v($,o,P),I(i,$,P),v($,c,P),I(f,$,P),v($,p,P),v($,m,P),I(_,m,null),b(m,d),I(S,m,null),A=!0},p($,P){const y={};P&2&&(y.value=Ke(be.getTotalTime($[1].exercises.length))),r.$set(y)},i($){A||(w(n.$$.fragment,$),w(r.$$.fragment,$),w(u.$$.fragment,$),w(i.$$.fragment,$),w(f.$$.fragment,$),w(_.$$.fragment,$),w(S.$$.fragment,$),A=!0)},o($){E(n.$$.fragment,$),E(r.$$.fragment,$),E(u.$$.fragment,$),E(i.$$.fragment,$),E(f.$$.fragment,$),E(_.$$.fragment,$),E(S.$$.fragment,$),A=!1},d($){$&&k(e),C(n),C(r),C(u),$&&k(o),C(i,$),$&&k(c),C(f,$),$&&k(p),$&&k(m),C(_),C(S)}}}function zl(l){let e,n,t,s;const r=[Hl,Ul],a=[];function u(o,i){return o[4]?0:1}return e=u(l),n=a[e]=r[e](l),{c(){n.c(),t=ee()},m(o,i){a[e].m(o,i),v(o,t,i),s=!0},p(o,[i]){let c=e;e=u(o),e===c?a[e].p(o,i):(te(),E(a[c],1,1,()=>{a[c]=null}),ne(),n=a[e],n?n.p(o,i):(n=a[e]=r[e](o),n.c()),w(n,1),n.m(t.parentNode,t))},i(o){s||(w(n),s=!0)},o(o){E(n),s=!1},d(o){a[e].d(o),o&&k(t)}}}const zt=l=>[l.id,l.title];function Xl(l,e,n){let t,s,r,a,u,o;M(l,ce,P=>n(1,t=P)),M(l,be,P=>n(2,s=P)),M(l,pn,P=>n(3,r=P)),M(l,_e,P=>n(4,a=P)),M(l,Fe,P=>n(5,u=P)),M(l,Ue,P=>n(6,o=P));let i=!1,c=navigator.share&&navigator.canShare(),f=c?"share.svg":"link.svg";const p=P=>{const y=r.find(L=>L.id==P.detail);y&&(be.set(y),ce.generate())},m=P=>{Fe.set(P.detail),ce.generate()},_=()=>{s.id&&ce.generate()},d=P=>{n(0,i=P.detail)},S=async()=>{ce.save();const P={title:"Share Test",text:"Kalabaaz Workout",url:"https://navneet.github.io"};c?window.navigator.share(P).catch(y=>{console.error(y)}):navigator.clipboard&&navigator.clipboard.writeText(P.url).then(y=>{console.log("Show copied notification here")}).catch(y=>{console.error(y)})},A=()=>{ce.save(),rt.triggerNew(t,!0),G.goto("name","Tabata")};_e.set(!1);function $(P){o=P,Ue.set(o)}return[i,t,s,r,a,u,o,f,p,m,_,d,S,A,$]}class Ql extends H{constructor(e){super();z(this,e,Xl,zl,X,{})}}function Jl(l){return je(()=>{Je.set(!0)}),Ye(()=>{Je.set(!1)}),[]}class Zl extends H{constructor(e){super();z(this,e,Jl,null,X,{})}}const xl=()=>{const{subscribe:l,set:e}=re(Object.preventExtensions({name:"",pageTitle:"",href:"",component:null,submenu:[]})),n=(o,i,c=t())=>{c.forEach(f=>{f.submenu.length?n(o,i,f.submenu):i==f[o]&&e(f)})},t=()=>{const o=new Array;return o.push({name:"Tabata",pageTitle:"Tabata Workout",href:"tabata",component:Tt,submenu:[]}),o.push({name:"Timer",pageTitle:"Timer",href:"timer",component:Al,submenu:[]}),o.push({name:"Workout",pageTitle:void 0,href:"/",component:void 0,submenu:[{name:"Create New()",pageTitle:"Create New Workout",href:"create",component:Ql,submenu:[]},{name:"Get Random()",pageTitle:"Random Workout",href:"random",component:Tt,submenu:[]}]}),o.push({name:"Music",pageTitle:"Music",href:"music",component:Zl,submenu:[]}),o},s=()=>["img-1.jpg","img-2.jpg","img-3.jpg","img-4.jpg","img-5.jpg","img-6.jpg","img-7.png"].map(o=>Ze.NAVBAR_IMG_BASE_URL+"/"+o),r=()=>Object.preventExtensions({PREPARE:"prep",WORK:"work",REST:"rest",BREAK:"break"}),a=(o=null)=>{if(o==u)return;const i=Object.values(r());document.body.classList.remove(...i),i.includes(o)&&document.body.classList.add(o),u=o};let u=null;return{subscribe:l,goto:n,get items(){return t()},get bgImages(){return s()},get backgrounds(){return r()},get background(){return u},set background(o){a(o)},set open(o){st.set(Boolean(o))}}},G=xl(),st=re(!1),J={PREPARE:-3,BREAK:-2,REST:-1,WORK:1},ze=(l=null)=>{const e=Object.preventExtensions(Object.assign({completed:!1,cycle:0,round:0,duration:0},xe()));return l?Object.assign(e,l):e},es=()=>{const{subscribe:l,set:e,update:n}=re([]),t=o=>{"meta"in o&&e(s(o.meta,o.exercises))},s=(o,i)=>{let c=[];for(let f=0;f<o.tabatas;f++)if(i.forEach((p,m)=>{const _=Object.assign({completed:!1,cycle:m+1,round:f+1,duration:o.time_on},p);if(c.push(ze(_)),m<i.length-1){const d={name:"Rest",display_name:"Rest",type:J.REST,completed:!1,cycle:m+1,round:f+1,duration:o.time_off};c.push(ze(d))}}),f<o.tabatas-1){const p={name:"Break",display_name:"Break",type:J.BREAK,completed:!1,cycle:0,round:f+2,duration:o.rest_time};c.push(ze(p))}return o.prep_time&&c.unshift(ze({name:"Prepare",display_name:"Prepare",type:J.PREPARE,completed:!1,cycle:0,round:0,duration:o.prep_time})),c};function r(o){o>=0&&n(i=>(i[o]&&(i[o].completed=!0),i))}return{subscribe:l,init:t,reset:()=>{n(o=>o.map(i=>(i.completed=!1,i)))},isComplete:()=>{let o=!1;return n(i=>(o=Boolean(i.length)&&i.every(c=>c.completed===!0),i)),o},markItemComplete:r}},ts={[J.PREPARE]:G.backgrounds.PREPARE,[J.REST]:G.backgrounds.REST,[J.BREAK]:G.backgrounds.BREAK,[J.WORK]:G.backgrounds.WORK},ye=es(),ns=()=>{const{subscribe:l,set:e,update:n}=re(""),t=async()=>{const a=cn(window.location.href);if(a.get("w")&&!le.isStemWorkout(a.get("w"))){s(a.get("w"));return}const u=le.getItem("workout");u&&r(u)},s=async a=>{mt.getWorkout(a).then(u=>{r(u)}).catch(u=>{console.error(u);const o=le.getBackupStem(a);o&&r(o)})},r=(a,u=!1)=>{const o=a.meta.path_stem;let i=u;u||n(c=>(i=o!==c,c)),i===!0&&(le.setItem("workout",a),Te.setItem("tabata_time",0),e(o),de.set(a))};return{subscribe:l,init:t,triggerNew:r,set:s}},ls=()=>{const{subscribe:l,set:e}=re([]);return{subscribe:l,set:t=>{e(t),ye.init(t)}}},de=ls(),rt=ns(),ss=ge(de,l=>"meta"in l?l.meta:{tabatas:0,prep_time:0,time_on:0,time_off:0,rest_time:0},{}),rs=ge(de,l=>"exercises"in l?l.exercises:[],[]),is=ge(de,l=>"planks"in l?l.planks:[],[]);function Xt(l,e,n){const t=l.slice();return t[5]=e[n],t}function Qt(l,e,n){const t=l.slice();return t[8]=e[n],t}function os(l){let e,n=l[5].name+"",t,s,r,a;return{c(){e=h("a"),t=B(n),g(e,"href",s=l[5].href),g(e,"class","text-item")},m(u,o){v(u,e,o),b(e,t),r||(a=K(e,"click",Ee(l[2])),r=!0)},p(u,o){o&1&&n!==(n=u[5].name+"")&&F(t,n),o&1&&s!==(s=u[5].href)&&g(e,"href",s)},d(u){u&&k(e),r=!1,a()}}}function as(l){let e,n=l[5].name+"",t,s,r,a,u,o,i,c=l[5].submenu,f=[];for(let p=0;p<c.length;p+=1)f[p]=Jt(Qt(l,c,p));return{c(){e=h("a"),t=B(n),s=h("span"),a=T(),u=h("ul");for(let p=0;p<f.length;p+=1)f[p].c();g(s,"class","icon"),g(e,"href",r=l[5].href),g(e,"class","text-item"),g(u,"class","submenu")},m(p,m){v(p,e,m),b(e,t),b(e,s),v(p,a,m),v(p,u,m);for(let _=0;_<f.length;_+=1)f[_].m(u,null);o||(i=K(e,"click",Ee(l[3])),o=!0)},p(p,m){if(m&1&&n!==(n=p[5].name+"")&&F(t,n),m&1&&r!==(r=p[5].href)&&g(e,"href",r),m&5){c=p[5].submenu;let _;for(_=0;_<c.length;_+=1){const d=Qt(p,c,_);f[_]?f[_].p(d,m):(f[_]=Jt(d),f[_].c(),f[_].m(u,null))}for(;_<f.length;_+=1)f[_].d(1);f.length=c.length}},d(p){p&&k(e),p&&k(a),p&&k(u),ae(f,p),o=!1,i()}}}function Jt(l){let e,n,t=l[8].name+"",s,r,a,u,o;return{c(){e=h("li"),n=h("a"),s=B(t),a=T(),g(n,"href",r=l[8].href),g(e,"class","sub-item")},m(i,c){v(i,e,c),b(e,n),b(n,s),b(e,a),u||(o=K(n,"click",Ee(l[2])),u=!0)},p(i,c){c&1&&t!==(t=i[8].name+"")&&F(s,t),c&1&&r!==(r=i[8].href)&&g(n,"href",r)},d(i){i&&k(e),u=!1,o()}}}function Zt(l){let e,n;function t(a,u){return a[5].submenu.length?as:os}let s=t(l),r=s(l);return{c(){e=h("li"),r.c(),n=T(),Re(e,"background-image","url("+l[1]+")"),g(e,"class","menu-link"),x(e,"sub",l[5].submenu.length)},m(a,u){v(a,e,u),r.m(e,null),b(e,n)},p(a,u){s===(s=t(a))&&r?r.p(a,u):(r.d(1),r=s(a),r&&(r.c(),r.m(e,n))),u&2&&Re(e,"background-image","url("+a[1]+")"),u&1&&x(e,"sub",a[5].submenu.length)},d(a){a&&k(e),r.d()}}}function cs(l){let e,n,t,s,r,a,u,o,i=l[0].items,c=[];for(let f=0;f<i.length;f+=1)c[f]=Zt(Xt(l,i,f));return{c(){e=h("nav"),n=h("a"),n.textContent="Kalabaaz",t=T(),s=h("i"),s.innerHTML="<span></span>",r=T(),a=h("ul");for(let f=0;f<c.length;f+=1)c[f].c();g(n,"href","/"),g(n,"class","home"),g(s,"class","hamburger"),g(e,"class","menubar"),g(a,"class","menu")},m(f,p){v(f,e,p),b(e,n),b(e,t),b(e,s),v(f,r,p),v(f,a,p);for(let m=0;m<c.length;m+=1)c[m].m(a,null);u||(o=K(s,"click",l[2]),u=!0)},p(f,[p]){if(p&15){i=f[0].items;let m;for(m=0;m<i.length;m+=1){const _=Xt(f,i,m);c[m]?c[m].p(_,p):(c[m]=Zt(_),c[m].c(),c[m].m(a,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=i.length}},i:O,o:O,d(f){f&&k(e),f&&k(r),f&&k(a),ae(c,f),u=!1,o()}}}function us(l,e,n){let t;je(()=>{n(1,t=a())});const s=u=>{const o=document.querySelector(".hamburger"),i=document.querySelector(".menu");i.classList.contains("open")?(G.goto("href",u.currentTarget.getAttribute("href")),i.classList.add("close"),o.classList.remove("icon-cross"),n(0,G.open=!1,G),setTimeout(()=>{i.classList.remove("open")},1300)):(n(1,t=a()),i.classList.remove("close"),i.classList.add("open"),o.classList.add("icon-cross"),n(0,G.open=!0,G))},r=u=>{u.currentTarget.parentNode.classList.toggle("active")},a=()=>G.bgImages[Math.floor(Math.random()*G.bgImages.length)];return[G,t,s,r]}class fs extends H{constructor(e){super();z(this,e,us,cs,X,{})}}function ms(l){let e,n;return{c(){e=h("h2"),n=B(l[0]),g(e,"class","svelte-jm90z1")},m(t,s){v(t,e,s),b(e,n)},p(t,[s]){s&1&&F(n,t[0])},i:O,o:O,d(t){t&&k(e)}}}function ps(l,e,n){let{title:t=""}=e;return l.$$set=s=>{"title"in s&&n(0,t=s.title)},[t]}class _s extends H{constructor(e){super();z(this,e,ps,ms,X,{title:0})}}function ds(l){let e,n=l[4]+"",t;return{c(){e=h("p"),t=B(n)},m(s,r){v(s,e,r),b(e,t)},p:O,d(s){s&&k(e)}}}function gs(l){let e,n,t;return{c(){e=h("div")},m(s,r){v(s,e,r),n||(t=sn(l[2].call(null,e)),n=!0)},p:O,d(s){s&&k(e),n=!1,t()}}}function bs(l){let e;return{c(){e=h("p"),e.textContent="Loading"},m(n,t){v(n,e,t)},p:O,d(n){n&&k(e)}}}function hs(l){let e,n={ctx:l,current:null,token:null,hasCatch:!0,pending:bs,then:gs,catch:ds,error:4};return Qe(he.loader,n),{c(){e=h("div"),n.block.c(),g(e,"class","yt-iframe-container"),x(e,"hide",!l[0]||l[1])},m(t,s){v(t,e,s),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null},p(t,[s]){l=t,Xe(n,l,s),s&3&&x(e,"hide",!l[0]||l[1])},i:O,o:O,d(t){t&&k(e),n.block.d(),n.token=null,n=null}}}function vs(l,e,n){let t,s;M(l,Je,u=>n(0,t=u)),M(l,st,u=>n(1,s=u));const r=u=>{const o=u.target;o.setSize("100%","100%"),o.setVolume(100),o.cuePlaylist({list:"PLXbcR6eu19MIR6yMyfFnRWdiRptMO7Eai",listType:"playlist"})},a=u=>{he.addEventListener(he.READY,r),he.mount(u)};return Ye(()=>{he.removeEventListener(he.READY,r),he.destroy()}),[t,s,a]}class ks extends H{constructor(e){super();z(this,e,vs,hs,X,{})}}function xt(l){let e,n,t,s,r;e=new _s({props:{title:l[1].pageTitle}});var a=l[1].component;function u(o){return{}}return a&&(t=new a(u())),{c(){R(e.$$.fragment),n=T(),t&&R(t.$$.fragment),s=ee()},m(o,i){I(e,o,i),v(o,n,i),t&&I(t,o,i),v(o,s,i),r=!0},p(o,i){const c={};if(i&2&&(c.title=o[1].pageTitle),e.$set(c),a!==(a=o[1].component)){if(t){te();const f=t;E(f.$$.fragment,1,0,()=>{C(f,1)}),ne()}a?(t=new a(u()),R(t.$$.fragment),w(t.$$.fragment,1),I(t,s.parentNode,s)):t=null}},i(o){r||(w(e.$$.fragment,o),t&&w(t.$$.fragment,o),r=!0)},o(o){E(e.$$.fragment,o),t&&E(t.$$.fragment,o),r=!1},d(o){C(e,o),o&&k(n),o&&k(s),t&&C(t,o)}}}function $s(l){let e,n,t,s,r,a,u;n=new fs({});let o=!l[0]&&xt(l);return a=new ks({}),{c(){e=h("header"),R(n.$$.fragment),t=T(),s=h("main"),o&&o.c(),r=T(),R(a.$$.fragment)},m(i,c){v(i,e,c),I(n,e,null),v(i,t,c),v(i,s,c),o&&o.m(s,null),b(s,r),I(a,s,null),u=!0},p(i,[c]){i[0]?o&&(te(),E(o,1,1,()=>{o=null}),ne()):o?(o.p(i,c),c&1&&w(o,1)):(o=xt(i),o.c(),w(o,1),o.m(s,r))},i(i){u||(w(n.$$.fragment,i),w(o),w(a.$$.fragment,i),u=!0)},o(i){E(n.$$.fragment,i),E(o),E(a.$$.fragment,i),u=!1},d(i){i&&k(e),C(n),i&&k(t),i&&k(s),o&&o.d(),C(a)}}}function ws(l,e,n){let t,s;return M(l,st,r=>n(0,t=r)),M(l,G,r=>n(1,s=r)),rt.init(),G.goto("href","tabata"),[t,s]}class ys extends H{constructor(e){super();z(this,e,ws,$s,X,{})}}new ys({target:document.getElementById("app_container")});
